{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { addClass, Browser, EventHandler, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getElement, isBlazor } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport { MonthEvent } from '../event-renderer/month';\n/**\n * Schedule events resize actions\n */\n\nvar Resize =\n/** @class */\nfunction (_super) {\n  __extends(Resize, _super);\n\n  function Resize() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  Resize.prototype.wireResizeEvent = function (element) {\n    var _this = this;\n\n    var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n    resizeElement.forEach(function (element) {\n      return EventHandler.add(element, Browser.touchStartEvent, _this.resizeStart, _this);\n    });\n  };\n\n  Resize.prototype.resizeHelper = function () {\n    var _this = this;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n      this.actionObj.originalElement.forEach(function (element, index) {\n        var cloneElement = _this.createCloneElement(element);\n\n        _this.actionObj.cloneElement[index] = cloneElement;\n\n        if (_this.actionObj.element === element) {\n          _this.actionObj.clone = cloneElement;\n        }\n      });\n    } else {\n      this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n      this.actionObj.cloneElement = [this.actionObj.clone];\n      this.actionObj.originalElement = [this.actionObj.element];\n    }\n  };\n\n  Resize.prototype.resizeStart = function (e) {\n    var _this = this;\n\n    this.actionObj.action = 'resize';\n    this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n    this.actionObj.interval = this.actionObj.slotInterval;\n    var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n    this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n    this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      interval: this.actionObj.interval,\n      scroll: {\n        enable: true,\n        scrollBy: 30,\n        timeDelay: 100\n      }\n    };\n    this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      if (isBlazor()) {\n        if (resizeEventArgs.element) {\n          resizeEventArgs.element = getElement(resizeEventArgs.element);\n        }\n\n        resizeEventArgs.data[_this.parent.eventFields.startTime] = _this.parent.getDateTime(resizeEventArgs.data[_this.parent.eventFields.startTime]);\n        resizeEventArgs.data[_this.parent.eventFields.endTime] = _this.parent.getDateTime(resizeEventArgs.data[_this.parent.eventFields.endTime]);\n      }\n\n      _this.actionClass('addClass');\n\n      _this.parent.uiStateValues.action = true;\n      _this.resizeEdges = {\n        left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n        right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n        top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n        bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n      };\n      _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n\n      var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n\n      _this.actionObj.cellWidth = workCell.offsetWidth;\n      _this.actionObj.cellHeight = workCell.offsetHeight;\n\n      var headerRows = _this.parent.activeViewOptions.headerRows.map(function (row) {\n        return row.option;\n      });\n\n      if (_this.parent.activeView.isTimelineView() && headerRows.length > 0 && ['Date', 'Hour'].indexOf(headerRows.slice(-1)[0]) < 0) {\n        var tr = _this.parent.getContentTable().querySelector('tr');\n\n        var noOfDays_1 = 0;\n        var tdCollections = [].slice.call(tr.children);\n        tdCollections.forEach(function (td) {\n          return noOfDays_1 += parseInt(td.getAttribute('colspan'), 10);\n        });\n        _this.actionObj.cellWidth = tr.offsetWidth / noOfDays_1;\n        _this.actionObj.cellHeight = tr.offsetHeight;\n      }\n\n      var pages = _this.getPageCoordinates(e);\n\n      _this.actionObj.X = pages.pageX;\n      _this.actionObj.Y = pages.pageY;\n      _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n      _this.actionObj.interval = resizeEventArgs.interval;\n      _this.actionObj.scroll = resizeEventArgs.scroll;\n      _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n      _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n      _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n\n      if (_this.parent.currentView === 'Month') {\n        _this.daysVariation = -1;\n        _this.monthEvent = new MonthEvent(_this.parent);\n      }\n\n      var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n\n      _this.scrollArgs = {\n        element: viewElement,\n        width: viewElement.scrollWidth,\n        height: viewElement.scrollHeight\n      };\n      EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n      EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n    });\n  };\n\n  Resize.prototype.resizing = function (e) {\n    this.parent.quickPopup.quickPopupHide();\n\n    if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n      this.resizeHelper();\n    }\n\n    if (!isNullOrUndefined(e.target) && e.target.classList.contains(cls.DISABLE_DATES)) {\n      return;\n    }\n\n    var pages = this.getPageCoordinates(e);\n    this.actionObj.pageX = pages.pageX;\n    this.actionObj.pageY = pages.pageY;\n    this.updateScrollPosition(e);\n    this.updateResizingDirection(e);\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    var resizeArgs = {\n      cancel: false,\n      data: eventObj,\n      element: this.actionObj.element,\n      event: e,\n      startTime: this.actionObj.start,\n      endTime: this.actionObj.end\n    };\n\n    if (this.parent.group.resources.length > 0) {\n      resizeArgs.groupIndex = this.actionObj.groupIndex;\n    }\n\n    this.parent.trigger(event.resizing, resizeArgs);\n  };\n\n  Resize.prototype.updateResizingDirection = function (e) {\n    if (this.parent.currentView === 'Month') {\n      this.monthResizing();\n      return;\n    }\n\n    var resizeValidation = this.resizeValidation(e);\n\n    if (this.resizeEdges.left) {\n      if (resizeValidation) {\n        var leftStyles = this.getLeftRightStyles(e, true);\n\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n          var cloneElement = _a[_i];\n          setStyleAttribute(cloneElement, leftStyles);\n          addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(!this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.right) {\n      if (resizeValidation) {\n        var rightStyles = this.getLeftRightStyles(e, false);\n\n        for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n          var cloneElement = _c[_b];\n          setStyleAttribute(cloneElement, rightStyles);\n          addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n        }\n      }\n\n      this.horizontalResizing(this.parent.enableRtl);\n    }\n\n    if (this.resizeEdges.top) {\n      if (resizeValidation) {\n        var topStyles = this.getTopBottomStyles(e, true);\n\n        for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n          var cloneElement = _e[_d];\n          setStyleAttribute(cloneElement, topStyles);\n          addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(true);\n    }\n\n    if (this.resizeEdges.bottom) {\n      if (resizeValidation) {\n        var bottomStyles = this.getTopBottomStyles(e, false);\n\n        for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n          var cloneElement = _g[_f];\n          setStyleAttribute(cloneElement, bottomStyles);\n          addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n        }\n      }\n\n      this.verticalResizing(false);\n    }\n  };\n\n  Resize.prototype.monthResizing = function () {\n    this.removeCloneElement();\n    var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n\n    if (isNullOrUndefined(td)) {\n      return;\n    }\n\n    var resizeTime = this.parent.getDateFromElement(td);\n    var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n    var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n\n    if (!this.parent.enableRtl && this.resizeEdges.left || this.parent.enableRtl && this.resizeEdges.right) {\n      startTime = resizeTime;\n    } else if (!this.parent.enableRtl && this.resizeEdges.right || this.parent.enableRtl && this.resizeEdges.left) {\n      endTime = util.addDays(resizeTime, 1);\n    }\n\n    if (isSameCell && startTime < endTime) {\n      this.actionObj.start = startTime;\n      this.actionObj.end = endTime;\n      var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n      this.dynamicEventsRendering(event_1);\n      this.updateOriginalElement(this.actionObj.clone);\n    }\n  };\n\n  Resize.prototype.resizeStop = function (e) {\n    var _this = this;\n\n    EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n    EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n    clearInterval(this.actionObj.scrollInterval);\n    this.actionObj.scrollInterval = null;\n    this.removeCloneElementClasses();\n    this.removeCloneElement();\n    this.actionClass('removeClass');\n    this.parent.uiStateValues.action = false;\n    var resizeArgs = {\n      cancel: false,\n      data: this.getChangedData(),\n      element: this.actionObj.element,\n      event: e\n    };\n    this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n      if (resizeEventArgs.cancel) {\n        return;\n      }\n\n      _this.saveChangedData(resizeEventArgs);\n    });\n  };\n\n  Resize.prototype.verticalResizing = function (isTop) {\n    var offsetValue = this.actionObj.clone.offsetTop;\n\n    if (!isTop) {\n      offsetValue += this.actionObj.clone.offsetHeight;\n    }\n\n    var minutes = offsetValue / this.actionObj.cellHeight * this.actionObj.slotInterval;\n    var element = this.actionObj.clone.offsetParent;\n\n    if (isNullOrUndefined(element)) {\n      return;\n    }\n\n    var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n    resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n    resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n\n    if (isTop) {\n      this.actionObj.start = this.calculateIntervalTime(resizeTime);\n    } else {\n      this.actionObj.end = this.calculateIntervalTime(resizeTime);\n    }\n\n    this.updateTimePosition(resizeTime);\n  };\n\n  Resize.prototype.horizontalResizing = function (isLeft) {\n    var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n    var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n    var resizeTime;\n\n    if (this.parent.activeView.isTimelineView()) {\n      var tr = this.parent.getContentTable().querySelector('tr');\n      var headerName = this.parent.currentView;\n\n      if (this.parent.activeViewOptions.headerRows.length > 0) {\n        var rows = this.parent.activeViewOptions.headerRows.map(function (row) {\n          return row.option;\n        });\n        headerName = rows.slice(-1)[0];\n\n        if (this.parent.currentView === 'TimelineMonth' && headerName === 'Hour') {\n          headerName = rows.slice(-2)[0] || 'Month';\n        }\n      }\n\n      resizeTime = isLeft ? eventStart : eventEnd;\n      var cellIndex = 0;\n      var tdCollections = [].slice.call(tr.children);\n      var isLastCell = false;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        var noOfDays_2 = 0;\n        tdCollections.forEach(function (td) {\n          return noOfDays_2 += parseInt(td.getAttribute('colspan'), 10);\n        });\n        var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) : parseInt(this.actionObj.clone.style.left, 10);\n\n        if (!isLeft) {\n          offsetValue += this.actionObj.clone.offsetWidth - this.actionObj.cellWidth;\n        }\n\n        cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays_2));\n        cellIndex = isLeft ? cellIndex : this.parent.currentView === 'TimelineMonth' ? cellIndex + 1 : cellIndex;\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = cellIndex < 0 ? 0 : cellIndex >= noOfDays_2 ? noOfDays_2 - 1 : cellIndex;\n      } else {\n        var cellWidth = this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ? this.actionObj.cellWidth : this.actionObj.cellWidth - this.actionObj.interval * (this.actionObj.cellWidth / this.actionObj.slotInterval);\n        cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) : Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) / this.actionObj.cellWidth);\n\n        if (this.parent.enableRtl) {\n          var cellOffsetWidth = 0;\n\n          if (headerName === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'TimelineMonth') {\n            cellOffsetWidth = this.actionObj.cellWidth;\n          }\n\n          var offsetWidth = Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) * this.actionObj.cellWidth + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n          cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n        }\n\n        isLastCell = cellIndex === tdCollections.length;\n        cellIndex = this.getIndex(cellIndex);\n      }\n\n      var resizeDate = void 0;\n\n      if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n        resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n      } else {\n        resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n      }\n\n      if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 || !this.parent.activeViewOptions.timeScale.enable) {\n        resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n      } else {\n        var offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) : parseFloat(this.actionObj.clone.style.left);\n\n        if (!isLeft) {\n          offsetValue += this.actionObj.clone.offsetWidth;\n        }\n\n        var spanMinutes = Math.ceil(this.actionObj.slotInterval / this.actionObj.cellWidth * (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n        spanMinutes = isLastCell ? this.actionObj.slotInterval : spanMinutes;\n        resizeTime = new Date(resizeDate.getTime());\n        resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n        this.updateTimePosition(resizeTime);\n      }\n    } else {\n      var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n      var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n      var noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n      var tr = closest(this.actionObj.clone, 'tr');\n      var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n      dayIndex = this.getIndex(dayIndex);\n      resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n\n      if (isLeft) {\n        resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n      } else {\n        resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n      }\n    }\n\n    if (isLeft) {\n      this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n    } else {\n      var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;\n      var resizeEnd = !isTimeViews && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0 ? util.addDays(resizeTime, 1) : resizeTime;\n      this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ? this.calculateIntervalTime(resizeEnd) : resizeEnd;\n    }\n  };\n\n  Resize.prototype.getTopBottomStyles = function (e, isTop) {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var slotInterval = this.actionObj.cellHeight / this.actionObj.slotInterval * this.actionObj.interval;\n    var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n    var clnTop = isTop ? this.actionObj.element.offsetTop - (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n    clnHeight = clnTop < 0 ? this.actionObj.clone.offsetHeight : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight > this.scrollArgs.height ? this.actionObj.clone.offsetHeight : clnHeight;\n    clnTop = clnTop < 0 ? 0 : clnTop;\n    clnTop = Math.floor(clnTop / slotInterval) * slotInterval;\n    clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop : Math.ceil(clnHeight / slotInterval) * slotInterval;\n    var styles = {\n      height: formatUnit(clnHeight < this.actionObj.cellHeight ? this.actionObj.cellHeight : clnHeight),\n      top: formatUnit(clnHeight < this.actionObj.cellHeight && isTop ? this.actionObj.clone.offsetTop : clnTop),\n      left: '0px',\n      right: '0px',\n      width: '100%'\n    };\n    return styles;\n  };\n\n  Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n    var styles = {};\n    var isTimelineView = this.parent.activeView.isTimelineView();\n    var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 && this.parent.activeViewOptions.timeScale.enable;\n    var slotInterval = this.actionObj.cellWidth / this.actionObj.slotInterval * this.actionObj.interval;\n    var pageWidth = isLeft ? this.actionObj.X - this.actionObj.pageX : this.actionObj.pageX - this.actionObj.X;\n    var targetWidth = isTimelineView ? this.actionObj.element.offsetWidth / this.actionObj.cellWidth * this.actionObj.cellWidth : this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth : Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var offsetWidth = targetWidth + Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n    var left = this.parent.enableRtl ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n\n    if (isTimeViews) {\n      offsetWidth = targetWidth + Math.ceil(pageWidth / slotInterval) * slotInterval;\n      offsetWidth = Math.ceil((left + offsetWidth) / slotInterval) * slotInterval - left;\n      this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n    }\n\n    var width = !isLeft && offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : offsetWidth < this.actionObj.cellWidth ? this.actionObj.cellWidth : offsetWidth;\n\n    if (this.parent.enableRtl) {\n      var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) : -(offsetWidth - this.actionObj.cellWidth);\n      rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n\n      if (isTimelineView && !isLeft) {\n        rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth + (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n        rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n      }\n\n      rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n      styles.right = formatUnit(rightValue);\n      width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n    } else {\n      var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) : this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n\n      if (isTimelineView) {\n        offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n\n        if (this.parent.enableRtl) {\n          offsetLeft = !isLeft ? this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth ? parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n        } else {\n          offsetLeft = isLeft ? this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth && this.actionObj.clone.offsetWidth === this.actionObj.cellWidth ? parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n        }\n      }\n\n      var leftValue = offsetLeft;\n      offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft : Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth : Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (offsetLeft < 0) {\n        offsetLeft = 0;\n        width = this.actionObj.clone.offsetWidth;\n      }\n\n      var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n\n      if (isLeft) {\n        styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft : Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth : offsetLeft);\n      }\n    }\n\n    styles.width = formatUnit(width);\n    return styles;\n  };\n\n  Resize.prototype.resizeValidation = function (e) {\n    var pages = this.getPageCoordinates(e);\n    var viewDimension = this.getContentAreaDimension();\n    var resizeValidation = false;\n\n    if (this.resizeEdges.left) {\n      resizeValidation = pages.pageX - this.actionObj.cellWidth >= viewDimension.left;\n    }\n\n    if (this.resizeEdges.right) {\n      resizeValidation = pages.pageX + this.actionObj.cellWidth <= viewDimension.right;\n    }\n\n    if (this.resizeEdges.top) {\n      resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n    }\n\n    if (this.resizeEdges.bottom) {\n      resizeValidation = this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight <= this.scrollArgs.height;\n    }\n\n    return resizeValidation;\n  };\n  /**\n   * Get module name.\n   */\n\n\n  Resize.prototype.getModuleName = function () {\n    return 'resize';\n  };\n\n  return Resize;\n}(ActionBase);\n\nexport { Resize };","map":{"version":3,"sources":["D:/developing/projects/Whiteboard/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/resize.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","addClass","Browser","EventHandler","closest","extend","formatUnit","setStyleAttribute","isNullOrUndefined","getElement","isBlazor","ActionBase","util","event","cls","MonthEvent","Resize","_super","apply","arguments","wireResizeEvent","element","_this","resizeElement","slice","call","querySelectorAll","EVENT_RESIZE_CLASS","forEach","add","touchStartEvent","resizeStart","resizeHelper","parent","activeViewOptions","group","resources","length","allowGroupEdit","actionObj","originalElement","index","cloneElement","createCloneElement","clone","e","action","slotInterval","timeScale","interval","slotCount","resizeTarget","target","APPOINTMENT_CLASS","eventBase","getEventByGuid","getAttribute","eventObj","resizeArgs","cancel","data","scroll","enable","scrollBy","timeDelay","trigger","resizeEventArgs","eventFields","startTime","getDateTime","endTime","actionClass","uiStateValues","resizeEdges","left","classList","contains","LEFT_RESIZE_HANDLER","right","RIGHT_RESIZE_HANDLER","top","TOP_RESIZE_HANDLER","bottom","BOTTOM_RESIZE_HANDLER","groupIndex","isGroupAdaptive","workCell","querySelector","WORK_CELLS_CLASS","cellWidth","offsetWidth","cellHeight","offsetHeight","headerRows","map","row","option","activeView","isTimelineView","indexOf","tr","getContentTable","noOfDays_1","tdCollections","children","td","parseInt","pages","getPageCoordinates","X","pageX","Y","pageY","start","Date","getTime","end","getOriginalElement","currentView","daysVariation","monthEvent","viewElement","CONTENT_WRAP_CLASS","scrollArgs","width","scrollWidth","height","scrollHeight","document","touchMoveEvent","resizing","touchEndEvent","resizeStop","quickPopup","quickPopupHide","RESIZE_CLONE_CLASS","DISABLE_DATES","updateScrollPosition","updateResizingDirection","monthResizing","resizeValidation","leftStyles","getLeftRightStyles","_i","_a","horizontalResizing","enableRtl","rightStyles","_b","_c","topStyles","getTopBottomStyles","_d","_e","verticalResizing","bottomStyles","_f","_g","removeCloneElement","elementFromPoint","resizeTime","getDateFromElement","isSameCell","addDays","event_1","getUpdatedEvent","dynamicEventsRendering","updateOriginalElement","remove","clearInterval","scrollInterval","removeCloneElementClasses","getChangedData","saveChangedData","isTop","offsetValue","offsetTop","minutes","offsetParent","resetTime","setHours","getStartHour","getHours","setMinutes","getMinutes","calculateIntervalTime","updateTimePosition","isLeft","eventStart","eventEnd","headerName","rows","cellIndex","isLastCell","noOfDays_2","style","Math","floor","offsetLeft","ceil","cellOffsetWidth","getIndex","resizeDate","renderDates","getSeconds","parseFloat","spanMinutes","cloneIndex","originalWidth","noOfDays","dayIndex","isTimeViews","resizeEnd","clnHeight","clnTop","styles","pageWidth","targetWidth","isAllDay","rightValue","abs","leftValue","cloneWidth","viewDimension","getContentAreaDimension","getModuleName"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { addClass, Browser, EventHandler, closest, extend, formatUnit, setStyleAttribute, isNullOrUndefined } from '@syncfusion/ej2-base';\nimport { getElement, isBlazor } from '@syncfusion/ej2-base';\nimport { ActionBase } from '../actions/action-base';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\nimport { MonthEvent } from '../event-renderer/month';\n/**\n * Schedule events resize actions\n */\nvar Resize = /** @class */ (function (_super) {\n    __extends(Resize, _super);\n    function Resize() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    Resize.prototype.wireResizeEvent = function (element) {\n        var _this = this;\n        var resizeElement = [].slice.call(element.querySelectorAll('.' + cls.EVENT_RESIZE_CLASS));\n        resizeElement.forEach(function (element) { return EventHandler.add(element, Browser.touchStartEvent, _this.resizeStart, _this); });\n    };\n    Resize.prototype.resizeHelper = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.group.resources.length > 0 && this.parent.activeViewOptions.group.allowGroupEdit) {\n            this.actionObj.originalElement.forEach(function (element, index) {\n                var cloneElement = _this.createCloneElement(element);\n                _this.actionObj.cloneElement[index] = cloneElement;\n                if (_this.actionObj.element === element) {\n                    _this.actionObj.clone = cloneElement;\n                }\n            });\n        }\n        else {\n            this.actionObj.clone = this.createCloneElement(this.actionObj.element);\n            this.actionObj.cloneElement = [this.actionObj.clone];\n            this.actionObj.originalElement = [this.actionObj.element];\n        }\n    };\n    Resize.prototype.resizeStart = function (e) {\n        var _this = this;\n        this.actionObj.action = 'resize';\n        this.actionObj.slotInterval = this.parent.activeViewOptions.timeScale.interval / this.parent.activeViewOptions.timeScale.slotCount;\n        this.actionObj.interval = this.actionObj.slotInterval;\n        var resizeTarget = closest(e.target, '.' + cls.EVENT_RESIZE_CLASS);\n        this.actionObj.element = closest(resizeTarget, '.' + cls.APPOINTMENT_CLASS);\n        this.actionObj.event = this.parent.eventBase.getEventByGuid(this.actionObj.element.getAttribute('data-guid'));\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            interval: this.actionObj.interval,\n            scroll: { enable: true, scrollBy: 30, timeDelay: 100 }\n        };\n        this.parent.trigger(event.resizeStart, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            if (isBlazor()) {\n                if (resizeEventArgs.element) {\n                    resizeEventArgs.element = getElement(resizeEventArgs.element);\n                }\n                resizeEventArgs.data[_this.parent.eventFields.startTime] = _this.parent.getDateTime(resizeEventArgs.data[_this.parent.eventFields.startTime]);\n                resizeEventArgs.data[_this.parent.eventFields.endTime] = _this.parent.getDateTime(resizeEventArgs.data[_this.parent.eventFields.endTime]);\n            }\n            _this.actionClass('addClass');\n            _this.parent.uiStateValues.action = true;\n            _this.resizeEdges = {\n                left: resizeTarget.classList.contains(cls.LEFT_RESIZE_HANDLER),\n                right: resizeTarget.classList.contains(cls.RIGHT_RESIZE_HANDLER),\n                top: resizeTarget.classList.contains(cls.TOP_RESIZE_HANDLER),\n                bottom: resizeTarget.classList.contains(cls.BOTTOM_RESIZE_HANDLER)\n            };\n            _this.actionObj.groupIndex = _this.parent.uiStateValues.isGroupAdaptive ? _this.parent.uiStateValues.groupIndex : 0;\n            var workCell = _this.parent.element.querySelector('.' + cls.WORK_CELLS_CLASS);\n            _this.actionObj.cellWidth = workCell.offsetWidth;\n            _this.actionObj.cellHeight = workCell.offsetHeight;\n            var headerRows = _this.parent.activeViewOptions.headerRows.map(function (row) {\n                return row.option;\n            });\n            if (_this.parent.activeView.isTimelineView() && headerRows.length > 0 &&\n                ['Date', 'Hour'].indexOf(headerRows.slice(-1)[0]) < 0) {\n                var tr = _this.parent.getContentTable().querySelector('tr');\n                var noOfDays_1 = 0;\n                var tdCollections = [].slice.call(tr.children);\n                tdCollections.forEach(function (td) { return noOfDays_1 += parseInt(td.getAttribute('colspan'), 10); });\n                _this.actionObj.cellWidth = tr.offsetWidth / noOfDays_1;\n                _this.actionObj.cellHeight = tr.offsetHeight;\n            }\n            var pages = _this.getPageCoordinates(e);\n            _this.actionObj.X = pages.pageX;\n            _this.actionObj.Y = pages.pageY;\n            _this.actionObj.groupIndex = parseInt(_this.actionObj.element.getAttribute('data-group-index') || '0', 10);\n            _this.actionObj.interval = resizeEventArgs.interval;\n            _this.actionObj.scroll = resizeEventArgs.scroll;\n            _this.actionObj.start = new Date(eventObj[_this.parent.eventFields.startTime].getTime());\n            _this.actionObj.end = new Date(eventObj[_this.parent.eventFields.endTime].getTime());\n            _this.actionObj.originalElement = _this.getOriginalElement(_this.actionObj.element);\n            if (_this.parent.currentView === 'Month') {\n                _this.daysVariation = -1;\n                _this.monthEvent = new MonthEvent(_this.parent);\n            }\n            var viewElement = _this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n            _this.scrollArgs = { element: viewElement, width: viewElement.scrollWidth, height: viewElement.scrollHeight };\n            EventHandler.add(document, Browser.touchMoveEvent, _this.resizing, _this);\n            EventHandler.add(document, Browser.touchEndEvent, _this.resizeStop, _this);\n        });\n    };\n    Resize.prototype.resizing = function (e) {\n        this.parent.quickPopup.quickPopupHide();\n        if (this.parent.element.querySelectorAll('.' + cls.RESIZE_CLONE_CLASS).length === 0) {\n            this.resizeHelper();\n        }\n        if ((!isNullOrUndefined(e.target)) && e.target.classList.contains(cls.DISABLE_DATES)) {\n            return;\n        }\n        var pages = this.getPageCoordinates(e);\n        this.actionObj.pageX = pages.pageX;\n        this.actionObj.pageY = pages.pageY;\n        this.updateScrollPosition(e);\n        this.updateResizingDirection(e);\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        var resizeArgs = {\n            cancel: false,\n            data: eventObj,\n            element: this.actionObj.element,\n            event: e,\n            startTime: this.actionObj.start,\n            endTime: this.actionObj.end\n        };\n        if (this.parent.group.resources.length > 0) {\n            resizeArgs.groupIndex = this.actionObj.groupIndex;\n        }\n        this.parent.trigger(event.resizing, resizeArgs);\n    };\n    Resize.prototype.updateResizingDirection = function (e) {\n        if (this.parent.currentView === 'Month') {\n            this.monthResizing();\n            return;\n        }\n        var resizeValidation = this.resizeValidation(e);\n        if (this.resizeEdges.left) {\n            if (resizeValidation) {\n                var leftStyles = this.getLeftRightStyles(e, true);\n                for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n                    var cloneElement = _a[_i];\n                    setStyleAttribute(cloneElement, leftStyles);\n                    addClass([cloneElement], cls.LEFT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(!this.parent.enableRtl);\n        }\n        if (this.resizeEdges.right) {\n            if (resizeValidation) {\n                var rightStyles = this.getLeftRightStyles(e, false);\n                for (var _b = 0, _c = this.actionObj.cloneElement; _b < _c.length; _b++) {\n                    var cloneElement = _c[_b];\n                    setStyleAttribute(cloneElement, rightStyles);\n                    addClass([cloneElement], cls.RIGHT_RESIZE_HANDLER);\n                }\n            }\n            this.horizontalResizing(this.parent.enableRtl);\n        }\n        if (this.resizeEdges.top) {\n            if (resizeValidation) {\n                var topStyles = this.getTopBottomStyles(e, true);\n                for (var _d = 0, _e = this.actionObj.cloneElement; _d < _e.length; _d++) {\n                    var cloneElement = _e[_d];\n                    setStyleAttribute(cloneElement, topStyles);\n                    addClass([cloneElement], cls.TOP_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(true);\n        }\n        if (this.resizeEdges.bottom) {\n            if (resizeValidation) {\n                var bottomStyles = this.getTopBottomStyles(e, false);\n                for (var _f = 0, _g = this.actionObj.cloneElement; _f < _g.length; _f++) {\n                    var cloneElement = _g[_f];\n                    setStyleAttribute(cloneElement, bottomStyles);\n                    addClass([cloneElement], cls.BOTTOM_RESIZE_HANDLER);\n                }\n            }\n            this.verticalResizing(false);\n        }\n    };\n    Resize.prototype.monthResizing = function () {\n        this.removeCloneElement();\n        var td = document.elementFromPoint(this.actionObj.pageX, this.actionObj.pageY);\n        if (isNullOrUndefined(td)) {\n            return;\n        }\n        var resizeTime = this.parent.getDateFromElement(td);\n        var isSameCell = this.parent.activeViewOptions.group.resources.length > 0 ?\n            parseInt(td.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        var startTime = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var endTime = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        if ((!this.parent.enableRtl && this.resizeEdges.left) || (this.parent.enableRtl && this.resizeEdges.right)) {\n            startTime = resizeTime;\n        }\n        else if ((!this.parent.enableRtl && this.resizeEdges.right) || (this.parent.enableRtl && this.resizeEdges.left)) {\n            endTime = util.addDays(resizeTime, 1);\n        }\n        if (isSameCell && startTime < endTime) {\n            this.actionObj.start = startTime;\n            this.actionObj.end = endTime;\n            var event_1 = this.getUpdatedEvent(this.actionObj.start, this.actionObj.end, this.actionObj.event);\n            this.dynamicEventsRendering(event_1);\n            this.updateOriginalElement(this.actionObj.clone);\n        }\n    };\n    Resize.prototype.resizeStop = function (e) {\n        var _this = this;\n        EventHandler.remove(document, Browser.touchMoveEvent, this.resizing);\n        EventHandler.remove(document, Browser.touchEndEvent, this.resizeStop);\n        clearInterval(this.actionObj.scrollInterval);\n        this.actionObj.scrollInterval = null;\n        this.removeCloneElementClasses();\n        this.removeCloneElement();\n        this.actionClass('removeClass');\n        this.parent.uiStateValues.action = false;\n        var resizeArgs = { cancel: false, data: this.getChangedData(), element: this.actionObj.element, event: e };\n        this.parent.trigger(event.resizeStop, resizeArgs, function (resizeEventArgs) {\n            if (resizeEventArgs.cancel) {\n                return;\n            }\n            _this.saveChangedData(resizeEventArgs);\n        });\n    };\n    Resize.prototype.verticalResizing = function (isTop) {\n        var offsetValue = this.actionObj.clone.offsetTop;\n        if (!isTop) {\n            offsetValue += this.actionObj.clone.offsetHeight;\n        }\n        var minutes = (offsetValue / this.actionObj.cellHeight) * this.actionObj.slotInterval;\n        var element = this.actionObj.clone.offsetParent;\n        if (isNullOrUndefined(element)) {\n            return;\n        }\n        var resizeTime = util.resetTime(this.parent.getDateFromElement(element));\n        resizeTime.setHours(this.parent.activeView.getStartHour().getHours());\n        resizeTime.setMinutes(minutes + this.parent.activeView.getStartHour().getMinutes());\n        if (isTop) {\n            this.actionObj.start = this.calculateIntervalTime(resizeTime);\n        }\n        else {\n            this.actionObj.end = this.calculateIntervalTime(resizeTime);\n        }\n        this.updateTimePosition(resizeTime);\n    };\n    Resize.prototype.horizontalResizing = function (isLeft) {\n        var eventStart = new Date(this.actionObj.event[this.parent.eventFields.startTime].getTime());\n        var eventEnd = new Date(this.actionObj.event[this.parent.eventFields.endTime].getTime());\n        var resizeTime;\n        if (this.parent.activeView.isTimelineView()) {\n            var tr = this.parent.getContentTable().querySelector('tr');\n            var headerName = this.parent.currentView;\n            if (this.parent.activeViewOptions.headerRows.length > 0) {\n                var rows = this.parent.activeViewOptions.headerRows.map(function (row) { return row.option; });\n                headerName = rows.slice(-1)[0];\n                if (this.parent.currentView === 'TimelineMonth' && headerName === 'Hour') {\n                    headerName = rows.slice(-2)[0] || 'Month';\n                }\n            }\n            resizeTime = isLeft ? eventStart : eventEnd;\n            var cellIndex = 0;\n            var tdCollections = [].slice.call(tr.children);\n            var isLastCell = false;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                var noOfDays_2 = 0;\n                tdCollections.forEach(function (td) { return noOfDays_2 += parseInt(td.getAttribute('colspan'), 10); });\n                var offsetValue = this.parent.enableRtl ? parseInt(this.actionObj.clone.style.right, 10) :\n                    parseInt(this.actionObj.clone.style.left, 10);\n                if (!isLeft) {\n                    offsetValue += (this.actionObj.clone.offsetWidth - this.actionObj.cellWidth);\n                }\n                cellIndex = Math.floor(offsetValue / Math.floor(tr.offsetWidth / noOfDays_2));\n                cellIndex = isLeft ? cellIndex : this.parent.currentView === 'TimelineMonth' ? cellIndex + 1 : cellIndex;\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = (cellIndex < 0) ? 0 : (cellIndex >= noOfDays_2) ? noOfDays_2 - 1 : cellIndex;\n            }\n            else {\n                var cellWidth = this.parent.currentView === 'TimelineMonth' || !this.parent.activeViewOptions.timeScale.enable ?\n                    this.actionObj.cellWidth : this.actionObj.cellWidth - (this.actionObj.interval *\n                    (this.actionObj.cellWidth / this.actionObj.slotInterval));\n                cellIndex = isLeft ? Math.floor(this.actionObj.clone.offsetLeft / this.actionObj.cellWidth) :\n                    Math.ceil((this.actionObj.clone.offsetLeft + (this.actionObj.clone.offsetWidth - cellWidth)) /\n                        this.actionObj.cellWidth);\n                if (this.parent.enableRtl) {\n                    var cellOffsetWidth = 0;\n                    if (headerName === 'TimelineMonth' || (!this.parent.activeViewOptions.timeScale.enable &&\n                        this.parent.currentView !== 'TimelineMonth')) {\n                        cellOffsetWidth = this.actionObj.cellWidth;\n                    }\n                    var offsetWidth = (Math.floor(parseInt(this.actionObj.clone.style.right, 10) / this.actionObj.cellWidth) *\n                        this.actionObj.cellWidth) + (isLeft ? 0 : this.actionObj.clone.offsetWidth - cellOffsetWidth);\n                    cellIndex = Math.floor(offsetWidth / this.actionObj.cellWidth);\n                }\n                isLastCell = cellIndex === tdCollections.length;\n                cellIndex = this.getIndex(cellIndex);\n            }\n            var resizeDate = void 0;\n            if (['Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1) {\n                resizeDate = new Date(this.parent.activeView.renderDates[cellIndex].getTime());\n            }\n            else {\n                resizeDate = this.parent.getDateFromElement(tr.children[cellIndex]);\n            }\n            if (['TimelineMonth', 'Year', 'Month', 'Week', 'Date'].indexOf(headerName) !== -1 ||\n                !this.parent.activeViewOptions.timeScale.enable) {\n                resizeTime = new Date(resizeDate.setHours(resizeTime.getHours(), resizeTime.getMinutes(), resizeTime.getSeconds()));\n            }\n            else {\n                var offsetValue = this.parent.enableRtl ? parseFloat(this.actionObj.clone.style.right) :\n                    parseFloat(this.actionObj.clone.style.left);\n                if (!isLeft) {\n                    offsetValue += this.actionObj.clone.offsetWidth;\n                }\n                var spanMinutes = Math.ceil((this.actionObj.slotInterval / this.actionObj.cellWidth) *\n                    (offsetValue - Math.floor(offsetValue / this.actionObj.cellWidth) * this.actionObj.cellWidth));\n                spanMinutes = isLastCell ? this.actionObj.slotInterval : spanMinutes;\n                resizeTime = new Date(resizeDate.getTime());\n                resizeTime.setMinutes(resizeTime.getMinutes() + spanMinutes);\n                this.updateTimePosition(resizeTime);\n            }\n        }\n        else {\n            var cloneIndex = closest(this.actionObj.clone, 'td').cellIndex;\n            var originalWidth = Math.ceil((isLeft ? this.actionObj.element.offsetWidth : 0) / this.actionObj.cellWidth) *\n                this.actionObj.cellWidth;\n            var noOfDays = Math.ceil((this.actionObj.clone.offsetWidth - originalWidth) / this.actionObj.cellWidth);\n            var tr = closest(this.actionObj.clone, 'tr');\n            var dayIndex = isLeft ? cloneIndex - noOfDays : cloneIndex + noOfDays - 1;\n            dayIndex = this.getIndex(dayIndex);\n            resizeTime = this.parent.getDateFromElement(tr.children[dayIndex]);\n            if (isLeft) {\n                resizeTime.setHours(eventStart.getHours(), eventStart.getMinutes(), eventStart.getSeconds());\n            }\n            else {\n                resizeTime.setHours(eventEnd.getHours(), eventEnd.getMinutes(), eventEnd.getSeconds());\n            }\n        }\n        if (isLeft) {\n            this.actionObj.start = this.parent.activeViewOptions.timeScale.enable ? this.calculateIntervalTime(resizeTime) : resizeTime;\n        }\n        else {\n            var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n                this.parent.activeViewOptions.timeScale.enable;\n            var resizeEnd = (!isTimeViews && resizeTime.getHours() === 0 && resizeTime.getMinutes() === 0) ?\n                util.addDays(resizeTime, 1) : resizeTime;\n            this.actionObj.end = this.parent.activeViewOptions.timeScale.enable && this.parent.currentView !== 'Month' ?\n                this.calculateIntervalTime(resizeEnd) : resizeEnd;\n        }\n    };\n    Resize.prototype.getTopBottomStyles = function (e, isTop) {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var slotInterval = (this.actionObj.cellHeight / this.actionObj.slotInterval) * this.actionObj.interval;\n        var clnHeight = isTop ? this.actionObj.element.offsetHeight + (this.actionObj.Y - this.actionObj.pageY) :\n            this.actionObj.element.offsetHeight + (this.actionObj.pageY - this.actionObj.Y);\n        var clnTop = isTop ? this.actionObj.element.offsetTop -\n            (this.actionObj.Y - this.actionObj.pageY) : this.actionObj.clone.offsetTop;\n        clnHeight = (clnTop < 0) ? this.actionObj.clone.offsetHeight :\n            (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) > this.scrollArgs.height ?\n                this.actionObj.clone.offsetHeight : clnHeight;\n        clnTop = (clnTop < 0) ? 0 : clnTop;\n        clnTop = Math.floor(clnTop / slotInterval) * slotInterval;\n        clnHeight = clnTop + clnHeight >= viewElement.scrollHeight ? viewElement.scrollHeight - clnTop :\n            Math.ceil(clnHeight / slotInterval) * slotInterval;\n        var styles = {\n            height: formatUnit(clnHeight < this.actionObj.cellHeight ? this.actionObj.cellHeight : clnHeight),\n            top: formatUnit((clnHeight < this.actionObj.cellHeight && isTop) ? this.actionObj.clone.offsetTop : clnTop),\n            left: '0px', right: '0px', width: '100%'\n        };\n        return styles;\n    };\n    Resize.prototype.getLeftRightStyles = function (e, isLeft) {\n        var styles = {};\n        var isTimelineView = this.parent.activeView.isTimelineView();\n        var isTimeViews = ['TimelineDay', 'TimelineWeek', 'TimelineWorkWeek'].indexOf(this.parent.currentView) > -1 &&\n            this.parent.activeViewOptions.timeScale.enable;\n        var slotInterval = (this.actionObj.cellWidth / this.actionObj.slotInterval) * this.actionObj.interval;\n        var pageWidth = isLeft ? (this.actionObj.X - this.actionObj.pageX) : (this.actionObj.pageX - this.actionObj.X);\n        var targetWidth = isTimelineView ?\n            (this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n            this.parent.currentView === 'Month' ? this.actionObj.element.offsetWidth :\n                Math.ceil(this.actionObj.element.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n        var offsetWidth = targetWidth + (Math.ceil(pageWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth);\n        var left = (this.parent.enableRtl) ? parseInt(this.actionObj.element.style.right, 10) : this.actionObj.clone.offsetLeft;\n        if (isTimeViews) {\n            offsetWidth = targetWidth + (Math.ceil(pageWidth / slotInterval) * slotInterval);\n            offsetWidth = (Math.ceil((left + offsetWidth) / slotInterval) * slotInterval) - left;\n            this.actionObj.event[this.parent.eventFields.isAllDay] = false;\n        }\n        var width = !isLeft && ((offsetWidth + this.actionObj.clone.offsetLeft > this.scrollArgs.width)) ?\n            this.actionObj.clone.offsetWidth : (offsetWidth < this.actionObj.cellWidth) ? this.actionObj.cellWidth : offsetWidth;\n        if (this.parent.enableRtl) {\n            var rightValue = isTimelineView ? parseInt(this.actionObj.element.style.right, 10) :\n                -(offsetWidth - this.actionObj.cellWidth);\n            rightValue = isTimelineView ? rightValue : isLeft ? 0 : rightValue > 0 ? 0 : rightValue;\n            if (isTimelineView && !isLeft) {\n                rightValue = Math.ceil((this.actionObj.element.offsetLeft + (this.actionObj.element.offsetWidth +\n                    (this.actionObj.pageX - this.actionObj.X))) / slotInterval) * slotInterval;\n                rightValue = rightValue < 0 ? Math.abs(rightValue) : -rightValue;\n            }\n            rightValue = rightValue >= this.scrollArgs.width ? this.scrollArgs.width - this.actionObj.cellWidth : rightValue;\n            styles.right = formatUnit(rightValue);\n            width = width + rightValue > this.scrollArgs.width ? this.actionObj.clone.offsetWidth : width;\n        }\n        else {\n            var offsetLeft = isLeft ? this.actionObj.element.offsetLeft - (this.actionObj.X - this.actionObj.pageX) :\n                this.parent.enableRtl ? this.actionObj.element.offsetLeft : 0;\n            if (isTimelineView) {\n                offsetLeft = isLeft ? offsetLeft : parseInt(this.actionObj.clone.style.left, 10);\n                if (this.parent.enableRtl) {\n                    offsetLeft = !isLeft ? (this.actionObj.pageX < this.actionObj.X - this.actionObj.clone.offsetWidth) ?\n                        parseInt(this.actionObj.clone.style.right, 10) : offsetLeft : offsetLeft;\n                }\n                else {\n                    offsetLeft = isLeft ? (this.actionObj.pageX > this.actionObj.X + this.actionObj.clone.offsetWidth &&\n                        this.actionObj.clone.offsetWidth === this.actionObj.cellWidth) ?\n                        parseInt(this.actionObj.clone.style.left, 10) : offsetLeft : offsetLeft;\n                }\n            }\n            var leftValue = offsetLeft;\n            offsetLeft = isTimelineView ? isTimeViews ? isLeft ? Math.floor(offsetLeft / slotInterval) * slotInterval : offsetLeft :\n                Math.floor(offsetLeft / this.actionObj.cellWidth) * this.actionObj.cellWidth :\n                Math.ceil(Math.abs(offsetLeft) / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (offsetLeft < 0) {\n                offsetLeft = 0;\n                width = this.actionObj.clone.offsetWidth;\n            }\n            var cloneWidth = Math.ceil(this.actionObj.clone.offsetWidth / this.actionObj.cellWidth) * this.actionObj.cellWidth;\n            if (isLeft) {\n                styles.left = formatUnit(isTimelineView ? offsetLeft : isLeft ? leftValue < 0 ? -offsetLeft :\n                    (Math.ceil((targetWidth - cloneWidth) / this.actionObj.cellWidth) * this.actionObj.cellWidth) : offsetLeft);\n            }\n        }\n        styles.width = formatUnit(width);\n        return styles;\n    };\n    Resize.prototype.resizeValidation = function (e) {\n        var pages = this.getPageCoordinates(e);\n        var viewDimension = this.getContentAreaDimension();\n        var resizeValidation = false;\n        if (this.resizeEdges.left) {\n            resizeValidation = (pages.pageX - this.actionObj.cellWidth) >= viewDimension.left;\n        }\n        if (this.resizeEdges.right) {\n            resizeValidation = (pages.pageX + this.actionObj.cellWidth) <= viewDimension.right;\n        }\n        if (this.resizeEdges.top) {\n            resizeValidation = this.actionObj.clone.offsetTop >= viewDimension.top;\n        }\n        if (this.resizeEdges.bottom) {\n            resizeValidation = (this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight) <= this.scrollArgs.height;\n        }\n        return resizeValidation;\n    };\n    /**\n     * Get module name.\n     */\n    Resize.prototype.getModuleName = function () {\n        return 'resize';\n    };\n    return Resize;\n}(ActionBase));\nexport { Resize };\n"]},"metadata":{},"sourceType":"module"}