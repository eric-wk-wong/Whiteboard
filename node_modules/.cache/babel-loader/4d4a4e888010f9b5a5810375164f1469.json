{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { createElement, selectAll, closest } from './dom';\nimport { Base } from './base';\nimport { Browser } from './browser';\nimport { EventHandler } from './event-handler';\nimport { Property, NotifyPropertyChanges, Event } from './notify-property-change';\n/**\n * The Animation framework provide options to animate the html DOM elements\n * ```typescript\n *   let animeObject = new Animation({\n *      name: 'SlideLeftIn',\n *      duration: 1000\n *   });\n *   animeObject.animate('#anime1');\n *   animeObject.animate('#anime2', { duration: 500 });\n * ```\n */\n\nvar Animation =\n/** @class */\nfunction (_super) {\n  __extends(Animation, _super);\n\n  function Animation(options) {\n    var _this = _super.call(this, options, undefined) || this;\n    /**\n     * @private\n     */\n\n\n    _this.easing = {\n      ease: 'cubic-bezier(0.250, 0.100, 0.250, 1.000)',\n      linear: 'cubic-bezier(0.250, 0.250, 0.750, 0.750)',\n      easeIn: 'cubic-bezier(0.420, 0.000, 1.000, 1.000)',\n      easeOut: 'cubic-bezier(0.000, 0.000, 0.580, 1.000)',\n      easeInOut: 'cubic-bezier(0.420, 0.000, 0.580, 1.000)',\n      elasticInOut: 'cubic-bezier(0.5,-0.58,0.38,1.81)',\n      elasticIn: 'cubic-bezier(0.17,0.67,0.59,1.81)',\n      elasticOut: 'cubic-bezier(0.7,-0.75,0.99,1.01)'\n    };\n    return _this;\n  }\n\n  Animation_1 = Animation;\n  /**\n   * Applies animation to the current element.\n   * @param {string | HTMLElement} element - Element which needs to be animated.\n   * @param {AnimationModel} options - Overriding default animation settings.\n   * @return {void}\n   */\n\n  Animation.prototype.animate = function (element, options) {\n    options = !options ? {} : options;\n    var model = this.getModel(options);\n\n    if (typeof element === 'string') {\n      var elements = Array.prototype.slice.call(selectAll(element, document));\n\n      for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n        var element_1 = elements_1[_i];\n        model.element = element_1;\n        Animation_1.delayAnimation(model);\n      }\n    } else {\n      model.element = element;\n      Animation_1.delayAnimation(model);\n    }\n  };\n  /**\n   * Stop the animation effect on animated element.\n   * @param {HTMLElement} element - Element which needs to be stop the animation.\n   * @param {AnimationOptions} model - Handling the animation model at stop function.\n   * @return {void}\n   */\n\n\n  Animation.stop = function (element, model) {\n    element.style.animation = '';\n    element.removeAttribute('e-animate');\n    var animationId = element.getAttribute('e-animation-id');\n\n    if (animationId) {\n      var frameId = parseInt(animationId, 10);\n      cancelAnimationFrame(frameId);\n      element.removeAttribute('e-animation-id');\n    }\n\n    if (model && model.end) {\n      model.end.call(this, model);\n    }\n  };\n  /**\n   * Set delay to animation element\n   * @param {AnimationModel} model\n   * @returns {void}\n   */\n\n\n  Animation.delayAnimation = function (model) {\n    if (model.delay) {\n      setTimeout(function () {\n        Animation_1.applyAnimation(model);\n      }, model.delay);\n    } else {\n      Animation_1.applyAnimation(model);\n    }\n  };\n  /**\n   * Triggers animation\n   * @param {AnimationModel} model\n   * @returns {void}\n   */\n\n\n  Animation.applyAnimation = function (model) {\n    var _this = this;\n\n    model.timeStamp = 0;\n    var step = 0;\n    var timerId = 0;\n    var startTime = 0;\n    var prevTimeStamp = 0;\n    var duration = model.duration;\n    model.element.setAttribute('e-animate', 'true');\n\n    var startAnimation = function (timeStamp) {\n      try {\n        if (timeStamp) {\n          // let step: number = model.timeStamp = timeStamp - startTime;\n\n          /** phantomjs workaround for timestamp fix */\n          prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;\n          model.timeStamp = timeStamp + model.timeStamp - prevTimeStamp;\n          prevTimeStamp = timeStamp;\n          /** phantomjs workaround end */\n          // trigger animation begin event\n\n          if (!step && model.begin) {\n            model.begin.call(_this, model);\n          }\n\n          step = step + 1;\n          var avg = model.timeStamp / step;\n\n          if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute('e-animate')) {\n            // apply animation effect to the current element                \n            model.element.style.animation = model.name + ' ' + model.duration + 'ms ' + model.timingFunction;\n\n            if (model.progress) {\n              model.progress.call(_this, model);\n            } // repeat requestAnimationFrame \n\n\n            requestAnimationFrame(startAnimation);\n          } else {\n            // clear requestAnimationFrame\n            cancelAnimationFrame(timerId);\n            model.element.removeAttribute('e-animation-id');\n            model.element.removeAttribute('e-animate');\n            model.element.style.animation = '';\n\n            if (model.end) {\n              model.end.call(_this, model);\n            }\n          }\n        } else {\n          startTime = performance.now(); // set initial requestAnimationFrame\n\n          timerId = requestAnimationFrame(startAnimation);\n          model.element.setAttribute('e-animation-id', timerId.toString());\n        }\n      } catch (e) {\n        cancelAnimationFrame(timerId);\n        model.element.removeAttribute('e-animation-id');\n\n        if (model.fail) {\n          model.fail.call(_this, e);\n        }\n      }\n    };\n\n    startAnimation();\n  };\n  /**\n   * Returns Animation Model\n   * @param {AnimationModel} options\n   * @returns {AnimationModel}\n   */\n\n\n  Animation.prototype.getModel = function (options) {\n    return {\n      name: options.name || this.name,\n      delay: options.delay || this.delay,\n      duration: options.duration !== undefined ? options.duration : this.duration,\n      begin: options.begin || this.begin,\n      end: options.end || this.end,\n      fail: options.fail || this.fail,\n      progress: options.progress || this.progress,\n      timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] : options.timingFunction || this.easing[this.timingFunction]\n    };\n  };\n  /**\n   * @private\n   */\n\n\n  Animation.prototype.onPropertyChanged = function (newProp, oldProp) {// no code needed\n  };\n  /**\n   * Returns module name as animation\n   * @private\n   */\n\n\n  Animation.prototype.getModuleName = function () {\n    return 'animation';\n  };\n  /**\n   * @private\n   */\n\n\n  Animation.prototype.destroy = function () {//Override base destroy;\n  };\n\n  var Animation_1;\n\n  __decorate([Property('FadeIn')], Animation.prototype, \"name\", void 0);\n\n  __decorate([Property(400)], Animation.prototype, \"duration\", void 0);\n\n  __decorate([Property('ease')], Animation.prototype, \"timingFunction\", void 0);\n\n  __decorate([Property(0)], Animation.prototype, \"delay\", void 0);\n\n  __decorate([Event()], Animation.prototype, \"progress\", void 0);\n\n  __decorate([Event()], Animation.prototype, \"begin\", void 0);\n\n  __decorate([Event()], Animation.prototype, \"end\", void 0);\n\n  __decorate([Event()], Animation.prototype, \"fail\", void 0);\n\n  Animation = Animation_1 = __decorate([NotifyPropertyChanges], Animation);\n  return Animation;\n}(Base);\n\nexport { Animation };\n/**\n * Ripple provides material theme's wave effect when an element is clicked\n * ```html\n * <div id='ripple'></div>\n * <script>\n *   rippleEffect(document.getElementById('ripple'));\n * </script>\n * ```\n * @private\n * @param HTMLElement element - Target element\n * @param RippleOptions rippleOptions - Ripple options .\n */\n\nexport function rippleEffect(element, rippleOptions, done) {\n  var rippleModel = getRippleModel(rippleOptions);\n\n  if (rippleModel.rippleFlag === false || rippleModel.rippleFlag === undefined && !isRippleEnabled) {\n    return Function;\n  }\n\n  element.setAttribute('data-ripple', 'true');\n  EventHandler.add(element, 'mousedown', rippleHandler, {\n    parent: element,\n    rippleOptions: rippleModel\n  });\n  EventHandler.add(element, 'mouseup', rippleUpHandler, {\n    parent: element,\n    rippleOptions: rippleModel,\n    done: done\n  });\n  EventHandler.add(element, 'mouseleave', rippleLeaveHandler, {\n    parent: element,\n    rippleOptions: rippleModel\n  });\n\n  if (Browser.isPointer) {\n    EventHandler.add(element, 'transitionend', rippleLeaveHandler, {\n      parent: element,\n      rippleOptions: rippleModel\n    });\n  }\n\n  return function () {\n    element.removeAttribute('data-ripple');\n    EventHandler.remove(element, 'mousedown', rippleHandler);\n    EventHandler.remove(element, 'mouseup', rippleUpHandler);\n    EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n    EventHandler.remove(element, 'transitionend', rippleLeaveHandler);\n  };\n}\n\nfunction getRippleModel(rippleOptions) {\n  var rippleModel = {\n    selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,\n    ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,\n    rippleFlag: rippleOptions && rippleOptions.rippleFlag,\n    isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,\n    duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350\n  };\n  return rippleModel;\n}\n/**\n * Handler for ripple event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\n\n\nfunction rippleHandler(e) {\n  var target = e.target;\n  var selector = this.rippleOptions.selector;\n  var element = selector ? closest(target, selector) : target;\n\n  if (!element || this.rippleOptions && closest(target, this.rippleOptions.ignore)) {\n    return;\n  }\n\n  var offset = element.getBoundingClientRect();\n  var offsetX = e.pageX - document.body.scrollLeft;\n  var offsetY = e.pageY - (!document.body.scrollTop && document.documentElement ? document.documentElement.scrollTop : document.body.scrollTop);\n  var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));\n  var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));\n  var radius = Math.sqrt(pageX * pageX + pageY * pageY);\n  var diameter = radius * 2 + 'px';\n  var x = offsetX - offset.left - radius;\n  var y = offsetY - offset.top - radius;\n\n  if (this.rippleOptions && this.rippleOptions.isCenterRipple) {\n    x = 0;\n    y = 0;\n    diameter = '100%';\n  }\n\n  element.classList.add('e-ripple');\n  var duration = this.rippleOptions.duration.toString();\n  var styles = 'width: ' + diameter + ';height: ' + diameter + ';left: ' + x + 'px;top: ' + y + 'px;' + 'transition-duration: ' + duration + 'ms;';\n  var rippleElement = createElement('div', {\n    className: 'e-ripple-element',\n    styles: styles\n  });\n  element.appendChild(rippleElement);\n  window.getComputedStyle(rippleElement).getPropertyValue('opacity');\n  rippleElement.style.transform = 'scale(1)';\n\n  if (element !== this.parent) {\n    EventHandler.add(element, 'mouseleave', rippleLeaveHandler, {\n      parent: this.parent,\n      rippleOptions: this.rippleOptions\n    });\n  }\n}\n/**\n * Handler for ripple element mouse up event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\n\n\nfunction rippleUpHandler(e) {\n  removeRipple(e, this);\n}\n/**\n * Handler for ripple element mouse move event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\n\n\nfunction rippleLeaveHandler(e) {\n  removeRipple(e, this);\n}\n/**\n * Handler for removing ripple element\n * @param {MouseEvent} e\n * @param {rippleArgs} eventArgs\n * @returns {void}\n * @private\n */\n\n\nfunction removeRipple(e, eventArgs) {\n  var duration = eventArgs.rippleOptions.duration;\n  var target = e.target;\n  var selector = eventArgs.rippleOptions.selector;\n  var element = selector ? closest(target, selector) : target;\n\n  if (!element || element && element.className.indexOf('e-ripple') === -1) {\n    return;\n  }\n\n  var rippleElements = selectAll('.e-ripple-element', element);\n  var rippleElement = rippleElements[rippleElements.length - 1];\n\n  if (rippleElement) {\n    rippleElement.style.opacity = '0.5';\n  }\n\n  if (eventArgs.parent !== element) {\n    EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n  }\n  /* tslint:disable:align */\n\n\n  setTimeout(function () {\n    if (rippleElement && rippleElement.parentNode) {\n      rippleElement.parentNode.removeChild(rippleElement);\n    }\n\n    if (!element.getElementsByClassName('e-ripple-element').length) {\n      element.classList.remove('e-ripple');\n    }\n\n    if (eventArgs.done) {\n      eventArgs.done(e);\n    }\n  }, duration);\n}\n\nexport var isRippleEnabled = false;\n/**\n * Animation Module provides support to enable ripple effect functionality to Essential JS 2 components.\n * @param {boolean} isRipple Specifies the boolean value to enable or disable ripple effect.\n * @returns {boolean}\n */\n\nexport function enableRipple(isRipple) {\n  isRippleEnabled = isRipple;\n  return isRippleEnabled;\n}","map":{"version":3,"sources":["/Users/ewong/Development/Whiteboard/node_modules/@syncfusion/ej2-base/src/animation.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","createElement","selectAll","closest","Base","Browser","EventHandler","Property","NotifyPropertyChanges","Event","Animation","_super","options","_this","call","undefined","easing","ease","linear","easeIn","easeOut","easeInOut","elasticInOut","elasticIn","elasticOut","Animation_1","animate","element","model","getModel","elements","slice","document","_i","elements_1","element_1","delayAnimation","stop","style","animation","removeAttribute","animationId","getAttribute","frameId","parseInt","cancelAnimationFrame","end","delay","setTimeout","applyAnimation","timeStamp","step","timerId","startTime","prevTimeStamp","duration","setAttribute","startAnimation","begin","avg","name","timingFunction","progress","requestAnimationFrame","performance","now","toString","e","fail","onPropertyChanged","newProp","oldProp","getModuleName","destroy","rippleEffect","rippleOptions","done","rippleModel","getRippleModel","rippleFlag","isRippleEnabled","Function","add","rippleHandler","parent","rippleUpHandler","rippleLeaveHandler","isPointer","remove","selector","ignore","isCenterRipple","offset","getBoundingClientRect","offsetX","pageX","body","scrollLeft","offsetY","pageY","scrollTop","documentElement","Math","max","abs","left","right","top","bottom","radius","sqrt","diameter","x","y","classList","styles","rippleElement","className","appendChild","window","getComputedStyle","getPropertyValue","transform","removeRipple","eventArgs","indexOf","rippleElements","opacity","parentNode","removeChild","getElementsByClassName","enableRipple","isRipple"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { createElement, selectAll, closest } from './dom';\nimport { Base } from './base';\nimport { Browser } from './browser';\nimport { EventHandler } from './event-handler';\nimport { Property, NotifyPropertyChanges, Event } from './notify-property-change';\n/**\n * The Animation framework provide options to animate the html DOM elements\n * ```typescript\n *   let animeObject = new Animation({\n *      name: 'SlideLeftIn',\n *      duration: 1000\n *   });\n *   animeObject.animate('#anime1');\n *   animeObject.animate('#anime2', { duration: 500 });\n * ```\n */\nvar Animation = /** @class */ (function (_super) {\n    __extends(Animation, _super);\n    function Animation(options) {\n        var _this = _super.call(this, options, undefined) || this;\n        /**\n         * @private\n         */\n        _this.easing = {\n            ease: 'cubic-bezier(0.250, 0.100, 0.250, 1.000)',\n            linear: 'cubic-bezier(0.250, 0.250, 0.750, 0.750)',\n            easeIn: 'cubic-bezier(0.420, 0.000, 1.000, 1.000)',\n            easeOut: 'cubic-bezier(0.000, 0.000, 0.580, 1.000)',\n            easeInOut: 'cubic-bezier(0.420, 0.000, 0.580, 1.000)',\n            elasticInOut: 'cubic-bezier(0.5,-0.58,0.38,1.81)',\n            elasticIn: 'cubic-bezier(0.17,0.67,0.59,1.81)',\n            elasticOut: 'cubic-bezier(0.7,-0.75,0.99,1.01)'\n        };\n        return _this;\n    }\n    Animation_1 = Animation;\n    /**\n     * Applies animation to the current element.\n     * @param {string | HTMLElement} element - Element which needs to be animated.\n     * @param {AnimationModel} options - Overriding default animation settings.\n     * @return {void}\n     */\n    Animation.prototype.animate = function (element, options) {\n        options = !options ? {} : options;\n        var model = this.getModel(options);\n        if (typeof element === 'string') {\n            var elements = Array.prototype.slice.call(selectAll(element, document));\n            for (var _i = 0, elements_1 = elements; _i < elements_1.length; _i++) {\n                var element_1 = elements_1[_i];\n                model.element = element_1;\n                Animation_1.delayAnimation(model);\n            }\n        }\n        else {\n            model.element = element;\n            Animation_1.delayAnimation(model);\n        }\n    };\n    /**\n     * Stop the animation effect on animated element.\n     * @param {HTMLElement} element - Element which needs to be stop the animation.\n     * @param {AnimationOptions} model - Handling the animation model at stop function.\n     * @return {void}\n     */\n    Animation.stop = function (element, model) {\n        element.style.animation = '';\n        element.removeAttribute('e-animate');\n        var animationId = element.getAttribute('e-animation-id');\n        if (animationId) {\n            var frameId = parseInt(animationId, 10);\n            cancelAnimationFrame(frameId);\n            element.removeAttribute('e-animation-id');\n        }\n        if (model && model.end) {\n            model.end.call(this, model);\n        }\n    };\n    /**\n     * Set delay to animation element\n     * @param {AnimationModel} model\n     * @returns {void}\n     */\n    Animation.delayAnimation = function (model) {\n        if (model.delay) {\n            setTimeout(function () { Animation_1.applyAnimation(model); }, model.delay);\n        }\n        else {\n            Animation_1.applyAnimation(model);\n        }\n    };\n    /**\n     * Triggers animation\n     * @param {AnimationModel} model\n     * @returns {void}\n     */\n    Animation.applyAnimation = function (model) {\n        var _this = this;\n        model.timeStamp = 0;\n        var step = 0;\n        var timerId = 0;\n        var startTime = 0;\n        var prevTimeStamp = 0;\n        var duration = model.duration;\n        model.element.setAttribute('e-animate', 'true');\n        var startAnimation = function (timeStamp) {\n            try {\n                if (timeStamp) {\n                    // let step: number = model.timeStamp = timeStamp - startTime;\n                    /** phantomjs workaround for timestamp fix */\n                    prevTimeStamp = prevTimeStamp === 0 ? timeStamp : prevTimeStamp;\n                    model.timeStamp = (timeStamp + model.timeStamp) - prevTimeStamp;\n                    prevTimeStamp = timeStamp;\n                    /** phantomjs workaround end */\n                    // trigger animation begin event\n                    if (!step && model.begin) {\n                        model.begin.call(_this, model);\n                    }\n                    step = step + 1;\n                    var avg = model.timeStamp / step;\n                    if (model.timeStamp < duration && model.timeStamp + avg < duration && model.element.getAttribute('e-animate')) {\n                        // apply animation effect to the current element                \n                        model.element.style.animation = model.name + ' ' + model.duration + 'ms ' + model.timingFunction;\n                        if (model.progress) {\n                            model.progress.call(_this, model);\n                        }\n                        // repeat requestAnimationFrame \n                        requestAnimationFrame(startAnimation);\n                    }\n                    else {\n                        // clear requestAnimationFrame\n                        cancelAnimationFrame(timerId);\n                        model.element.removeAttribute('e-animation-id');\n                        model.element.removeAttribute('e-animate');\n                        model.element.style.animation = '';\n                        if (model.end) {\n                            model.end.call(_this, model);\n                        }\n                    }\n                }\n                else {\n                    startTime = performance.now();\n                    // set initial requestAnimationFrame\n                    timerId = requestAnimationFrame(startAnimation);\n                    model.element.setAttribute('e-animation-id', timerId.toString());\n                }\n            }\n            catch (e) {\n                cancelAnimationFrame(timerId);\n                model.element.removeAttribute('e-animation-id');\n                if (model.fail) {\n                    model.fail.call(_this, e);\n                }\n            }\n        };\n        startAnimation();\n    };\n    /**\n     * Returns Animation Model\n     * @param {AnimationModel} options\n     * @returns {AnimationModel}\n     */\n    Animation.prototype.getModel = function (options) {\n        return {\n            name: options.name || this.name,\n            delay: options.delay || this.delay,\n            duration: (options.duration !== undefined ? options.duration : this.duration),\n            begin: options.begin || this.begin,\n            end: options.end || this.end,\n            fail: options.fail || this.fail,\n            progress: options.progress || this.progress,\n            timingFunction: this.easing[options.timingFunction] ? this.easing[options.timingFunction] :\n                (options.timingFunction || this.easing[this.timingFunction])\n        };\n    };\n    /**\n     * @private\n     */\n    Animation.prototype.onPropertyChanged = function (newProp, oldProp) {\n        // no code needed\n    };\n    /**\n     * Returns module name as animation\n     * @private\n     */\n    Animation.prototype.getModuleName = function () {\n        return 'animation';\n    };\n    /**\n     * @private\n     */\n    Animation.prototype.destroy = function () {\n        //Override base destroy;\n    };\n    var Animation_1;\n    __decorate([\n        Property('FadeIn')\n    ], Animation.prototype, \"name\", void 0);\n    __decorate([\n        Property(400)\n    ], Animation.prototype, \"duration\", void 0);\n    __decorate([\n        Property('ease')\n    ], Animation.prototype, \"timingFunction\", void 0);\n    __decorate([\n        Property(0)\n    ], Animation.prototype, \"delay\", void 0);\n    __decorate([\n        Event()\n    ], Animation.prototype, \"progress\", void 0);\n    __decorate([\n        Event()\n    ], Animation.prototype, \"begin\", void 0);\n    __decorate([\n        Event()\n    ], Animation.prototype, \"end\", void 0);\n    __decorate([\n        Event()\n    ], Animation.prototype, \"fail\", void 0);\n    Animation = Animation_1 = __decorate([\n        NotifyPropertyChanges\n    ], Animation);\n    return Animation;\n}(Base));\nexport { Animation };\n/**\n * Ripple provides material theme's wave effect when an element is clicked\n * ```html\n * <div id='ripple'></div>\n * <script>\n *   rippleEffect(document.getElementById('ripple'));\n * </script>\n * ```\n * @private\n * @param HTMLElement element - Target element\n * @param RippleOptions rippleOptions - Ripple options .\n */\nexport function rippleEffect(element, rippleOptions, done) {\n    var rippleModel = getRippleModel(rippleOptions);\n    if (rippleModel.rippleFlag === false || (rippleModel.rippleFlag === undefined && !isRippleEnabled)) {\n        return Function;\n    }\n    element.setAttribute('data-ripple', 'true');\n    EventHandler.add(element, 'mousedown', rippleHandler, { parent: element, rippleOptions: rippleModel });\n    EventHandler.add(element, 'mouseup', rippleUpHandler, { parent: element, rippleOptions: rippleModel, done: done });\n    EventHandler.add(element, 'mouseleave', rippleLeaveHandler, { parent: element, rippleOptions: rippleModel });\n    if (Browser.isPointer) {\n        EventHandler.add(element, 'transitionend', rippleLeaveHandler, { parent: element, rippleOptions: rippleModel });\n    }\n    return (function () {\n        element.removeAttribute('data-ripple');\n        EventHandler.remove(element, 'mousedown', rippleHandler);\n        EventHandler.remove(element, 'mouseup', rippleUpHandler);\n        EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n        EventHandler.remove(element, 'transitionend', rippleLeaveHandler);\n    });\n}\nfunction getRippleModel(rippleOptions) {\n    var rippleModel = {\n        selector: rippleOptions && rippleOptions.selector ? rippleOptions.selector : null,\n        ignore: rippleOptions && rippleOptions.ignore ? rippleOptions.ignore : null,\n        rippleFlag: rippleOptions && rippleOptions.rippleFlag,\n        isCenterRipple: rippleOptions && rippleOptions.isCenterRipple,\n        duration: rippleOptions && rippleOptions.duration ? rippleOptions.duration : 350\n    };\n    return rippleModel;\n}\n/**\n * Handler for ripple event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\nfunction rippleHandler(e) {\n    var target = (e.target);\n    var selector = this.rippleOptions.selector;\n    var element = selector ? closest(target, selector) : target;\n    if (!element || (this.rippleOptions && closest(target, this.rippleOptions.ignore))) {\n        return;\n    }\n    var offset = element.getBoundingClientRect();\n    var offsetX = e.pageX - document.body.scrollLeft;\n    var offsetY = e.pageY - ((!document.body.scrollTop && document.documentElement) ?\n        document.documentElement.scrollTop : document.body.scrollTop);\n    var pageX = Math.max(Math.abs(offsetX - offset.left), Math.abs(offsetX - offset.right));\n    var pageY = Math.max(Math.abs(offsetY - offset.top), Math.abs(offsetY - offset.bottom));\n    var radius = Math.sqrt(pageX * pageX + pageY * pageY);\n    var diameter = radius * 2 + 'px';\n    var x = offsetX - offset.left - radius;\n    var y = offsetY - offset.top - radius;\n    if (this.rippleOptions && this.rippleOptions.isCenterRipple) {\n        x = 0;\n        y = 0;\n        diameter = '100%';\n    }\n    element.classList.add('e-ripple');\n    var duration = this.rippleOptions.duration.toString();\n    var styles = 'width: ' + diameter + ';height: ' + diameter + ';left: ' + x + 'px;top: ' + y + 'px;' +\n        'transition-duration: ' + duration + 'ms;';\n    var rippleElement = createElement('div', { className: 'e-ripple-element', styles: styles });\n    element.appendChild(rippleElement);\n    window.getComputedStyle(rippleElement).getPropertyValue('opacity');\n    rippleElement.style.transform = 'scale(1)';\n    if (element !== this.parent) {\n        EventHandler.add(element, 'mouseleave', rippleLeaveHandler, { parent: this.parent, rippleOptions: this.rippleOptions });\n    }\n}\n/**\n * Handler for ripple element mouse up event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\nfunction rippleUpHandler(e) {\n    removeRipple(e, this);\n}\n/**\n * Handler for ripple element mouse move event\n * @param {MouseEvent} e\n * @returns {void}\n * @private\n */\nfunction rippleLeaveHandler(e) {\n    removeRipple(e, this);\n}\n/**\n * Handler for removing ripple element\n * @param {MouseEvent} e\n * @param {rippleArgs} eventArgs\n * @returns {void}\n * @private\n */\nfunction removeRipple(e, eventArgs) {\n    var duration = eventArgs.rippleOptions.duration;\n    var target = (e.target);\n    var selector = eventArgs.rippleOptions.selector;\n    var element = selector ? closest(target, selector) : target;\n    if (!element || (element && element.className.indexOf('e-ripple') === -1)) {\n        return;\n    }\n    var rippleElements = selectAll('.e-ripple-element', element);\n    var rippleElement = rippleElements[rippleElements.length - 1];\n    if (rippleElement) {\n        rippleElement.style.opacity = '0.5';\n    }\n    if (eventArgs.parent !== element) {\n        EventHandler.remove(element, 'mouseleave', rippleLeaveHandler);\n    }\n    /* tslint:disable:align */\n    setTimeout(function () {\n        if (rippleElement && rippleElement.parentNode) {\n            rippleElement.parentNode.removeChild(rippleElement);\n        }\n        if (!element.getElementsByClassName('e-ripple-element').length) {\n            element.classList.remove('e-ripple');\n        }\n        if (eventArgs.done) {\n            eventArgs.done(e);\n        }\n    }, duration);\n}\nexport var isRippleEnabled = false;\n/**\n * Animation Module provides support to enable ripple effect functionality to Essential JS 2 components.\n * @param {boolean} isRipple Specifies the boolean value to enable or disable ripple effect.\n * @returns {boolean}\n */\nexport function enableRipple(isRipple) {\n    isRippleEnabled = isRipple;\n    return isRippleEnabled;\n}\n"]},"metadata":{},"sourceType":"module"}