{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase, ViewHelper } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\n\nvar VerticalView =\n/** @class */\nfunction (_super) {\n  __extends(VerticalView, _super);\n  /**\n   * Constructor for vertical view\n   */\n\n\n  function VerticalView(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.viewClass = 'e-day-view';\n    _this.isInverseTableSelect = true;\n    _this.baseCssClass = 'e-vertical-view';\n    return _this;\n  }\n\n  VerticalView.prototype.addEventListener = function () {\n    this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n    this.parent.on(event.dataReady, this.renderEvents, this);\n  };\n\n  VerticalView.prototype.removeEventListener = function () {\n    this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n    this.parent.off(event.dataReady, this.renderEvents);\n  };\n\n  VerticalView.prototype.renderEvents = function () {\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var appointment = new VerticalEvent(this.parent);\n      appointment.renderAppointments();\n    } else {\n      var appointment = new MonthEvent(this.parent);\n      appointment.renderAppointments();\n    }\n\n    this.parent.notify(event.eventsLoaded, {});\n  };\n\n  VerticalView.prototype.onContentScroll = function (e) {\n    this.parent.removeNewEventElement();\n    var target = e.target;\n    this.parent.notify(event.virtualScroll, e);\n    this.scrollLeftPanel(target);\n    this.scrollTopPanel(target);\n\n    if (!this.parent.isAdaptive) {\n      this.parent.uiStateValues.top = target.scrollTop;\n    }\n\n    this.parent.uiStateValues.left = target.scrollLeft;\n\n    if (!isNullOrUndefined(this.parent.quickPopup)) {\n      this.parent.quickPopup.quickPopupHide();\n    }\n  };\n\n  VerticalView.prototype.onApaptiveMove = function (e) {\n    if (this.parent.uiStateValues.action) {\n      e.preventDefault();\n    }\n  };\n\n  VerticalView.prototype.onApaptiveScroll = function (e) {\n    this.parent.removeNewEventElement();\n    this.parent.uiStateValues.top = e.target.scrollTop;\n  };\n\n  VerticalView.prototype.scrollLeftPanel = function (target) {\n    var leftPanel = this.getLeftPanelElement();\n\n    if (!isNullOrUndefined(leftPanel)) {\n      leftPanel.scrollTop = target.scrollTop;\n    }\n  };\n\n  VerticalView.prototype.scrollUiUpdate = function (args) {\n    var headerBarHeight = this.getHeaderBarHeight();\n    var timecells = this.getLeftPanelElement();\n    var content = this.getScrollableElement();\n    var header = this.getDatesHeaderElement();\n    var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n    this.setContentHeight(content, timecells, scrollerHeight);\n    var scrollBarWidth = util.getScrollBarWidth(); // tslint:disable:no-any\n\n    header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n    header.style[args.cssProperties.rtlPadding] = '';\n\n    if (content.offsetWidth - content.clientWidth > 0) {\n      header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n      header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n    } else {\n      header.firstElementChild.style[args.cssProperties.border] = '';\n      header.style[args.cssProperties.padding] = '';\n    } // tslint:enable:no-any\n\n\n    if (!args.isPreventScrollUpdate) {\n      if (this.parent.uiStateValues.isInitial) {\n        this.scrollToWorkHour();\n        this.parent.uiStateValues.isInitial = false;\n      } else {\n        content.scrollTop = this.parent.uiStateValues.top;\n        content.scrollLeft = this.parent.uiStateValues.left;\n      }\n    }\n\n    this.setColWidth(content);\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      this.highlightCurrentTime();\n    }\n  };\n\n  VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n    if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n      element.style.height = formatUnit(height);\n    } else {\n      if (!isNullOrUndefined(leftPanelElement)) {\n        leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(element));\n      }\n\n      element.style.height = formatUnit(height);\n    }\n  };\n\n  VerticalView.prototype.scrollToWorkHour = function () {\n    if (this.parent.workHours.highlight) {\n      var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n\n      if (firstWorkHourCell) {\n        this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n        this.parent.uiStateValues.left = 0;\n      }\n    }\n  };\n\n  VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n    var date = this.parent.getStartEndTime(hour);\n\n    if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n      return;\n    }\n\n    this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n  };\n\n  VerticalView.prototype.generateColumnLevels = function () {\n    var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n    var columnLevels = [];\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n\n      if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n        var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n        var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n        var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n        var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n        columnLevels = [dateSlots];\n      }\n    } else {\n      columnLevels.push(level);\n    }\n\n    this.colLevels = columnLevels;\n    return columnLevels;\n  };\n\n  VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n    if (workStartHour === void 0) {\n      workStartHour = this.parent.workHours.start;\n    }\n\n    if (workEndHour === void 0) {\n      workEndHour = this.parent.workHours.end;\n    }\n\n    var dateCol = [];\n    var start = this.parent.getStartEndTime(workStartHour);\n    var end = this.parent.getStartEndTime(workEndHour);\n\n    for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n      var col = renderDates_1[_i];\n      var classList = [cls.HEADER_CELLS_CLASS];\n\n      if (this.isCurrentDate(col)) {\n        classList.push(cls.CURRENT_DAY_CLASS);\n      }\n\n      dateCol.push({\n        date: col,\n        type: 'dateHeader',\n        className: classList,\n        colSpan: 1,\n        workDays: workDays,\n        startHour: new Date(+start),\n        endHour: new Date(+end)\n      });\n    }\n\n    return dateCol;\n  };\n\n  VerticalView.prototype.isWorkHourRange = function (date) {\n    return this.getStartHour().getTime() <= date.getTime() && this.getEndHour().getTime() >= date.getTime();\n  };\n\n  VerticalView.prototype.highlightCurrentTime = function () {\n    var _this = this;\n\n    if (this.parent.activeViewOptions.headerRows.length > 0 && this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n      return;\n    }\n\n    if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n      var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n\n      if (currentDateIndex.length > 0) {\n        var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n\n        if (workCells.length > 0) {\n          this.changeCurrentTimePosition();\n        }\n\n        if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n          this.currentTimeIndicatorTimer = window.setInterval(function () {\n            _this.changeCurrentTimePosition();\n          }, util.MS_PER_MINUTE);\n        }\n      } else {\n        this.clearCurrentTimeIndicatorTimer();\n      }\n    } else {\n      this.clearCurrentTimeIndicatorTimer();\n    }\n  };\n\n  VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n    var currentDateIndex = [];\n\n    if (!isNullOrUndefined(this.parent.resourceBase) && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      var count = 0;\n\n      for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n        var resource = _a[_i];\n        var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n\n        if (index >= 0) {\n          var resIndex = this.parent.activeViewOptions.group.byDate ? this.parent.resourceBase.lastResourceLevel.length * index + count : count + index;\n          currentDateIndex.push(resIndex);\n        }\n\n        count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n      }\n    } else {\n      var renderDates = this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0 ? this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n      var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n\n      if (index >= 0) {\n        currentDateIndex.push(index);\n      }\n    }\n\n    return currentDateIndex;\n  };\n\n  VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n    if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n      window.clearInterval(this.currentTimeIndicatorTimer);\n      this.currentTimeIndicatorTimer = null;\n      this.removeCurrentTimeIndicatorElements();\n    }\n  };\n\n  VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n    var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n    var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n    timeIndicator.forEach(function (indicator) {\n      return remove(indicator);\n    });\n  };\n\n  VerticalView.prototype.changeCurrentTimePosition = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.removeCurrentTimeIndicatorElements();\n    var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n    var firstRow = this.parent.getContentTable().rows[0];\n    var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n    var topInPx = formatUnit(top);\n    var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n\n    if (isNullOrUndefined(rowIndex) || isNaN(rowIndex)) {\n      return;\n    }\n\n    var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n\n    for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n      curTimeWrap[i].appendChild(createElement('div', {\n        className: cls.PREVIOUS_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n      var day = currentDateIndex_1[_i];\n      curTimeWrap[day].appendChild(createElement('div', {\n        className: cls.CURRENT_TIMELINE_CLASS,\n        styles: 'top:' + topInPx\n      }));\n    }\n\n    var currentTimeEle = createElement('div', {\n      innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n      className: cls.CURRENT_TIME_CLASS,\n      styles: 'top:' + topInPx\n    });\n    var timeCellsWrap = this.getLeftPanelElement();\n    var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n\n    if (rowIndex <= timeTrs.length) {\n      removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n      addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\n      prepend([currentTimeEle], timeCellsWrap);\n      currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - currentTimeEle.offsetHeight / 2);\n    }\n  };\n\n  VerticalView.prototype.getTopFromDateTime = function (date) {\n    var startHour = this.getStartHour();\n    var diffInMinutes = (date.getHours() - startHour.getHours()) * 60 + (date.getMinutes() - startHour.getMinutes());\n    return diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount / this.parent.activeViewOptions.timeScale.interval;\n  };\n\n  VerticalView.prototype.getWorkCellHeight = function () {\n    return this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n  };\n\n  VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n    var cntEle;\n    var wrapper = createElement('div');\n    var templateName = '';\n    var templateId = this.parent.element.id + '_';\n    var dateValue = util.addLocalOffset(date);\n\n    switch (type) {\n      case 'dateHeader':\n        if (this.parent.activeViewOptions.dateHeaderTemplate) {\n          templateName = 'dateHeaderTemplate';\n          var args = {\n            date: dateValue,\n            type: type\n          };\n          var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n          cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        } else {\n          wrapper.innerHTML = this.parent.activeView.isTimelineView() ? \"<span class=\\\"e-header-date e-navigate\\\">\" + ViewHelper.getTimelineDate(this.parent, date) + \"</span>\" : \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(ViewHelper.getDayName(this.parent, date), 'single') + \"</div>\" + (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + ViewHelper.getDate(this.parent, date) + \"</div>\");\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'majorSlot':\n        if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n          templateName = 'majorSlotTemplate';\n          var args = {\n            date: dateValue,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          wrapper.innerHTML = \"<span>\" + ViewHelper.getTime(this.parent, date) + \"</span>\";\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'minorSlot':\n        if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n          templateName = 'minorSlotTemplate';\n          var args = {\n            date: dateValue,\n            type: type\n          };\n          cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n        } else {\n          wrapper.innerHTML = '&nbsp;';\n          cntEle = [].slice.call(wrapper.childNodes);\n        }\n\n        break;\n\n      case 'alldayCells':\n        if (this.parent.activeViewOptions.cellTemplate) {\n          var viewName = this.parent.activeViewOptions.cellTemplateName;\n          templateName = 'cellTemplate';\n          var args = {\n            date: dateValue,\n            type: type,\n            groupIndex: groupIndex\n          };\n          cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n        }\n\n        break;\n    }\n\n    return cntEle;\n  };\n\n  VerticalView.prototype.serverRenderLayout = function () {\n    this.setPanel(this.parent.element.querySelector('.' + cls.TABLE_WRAP_CLASS));\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    var headerCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.HEADER_CELLS_CLASS));\n\n    for (var _i = 0, headerCells_1 = headerCells; _i < headerCells_1.length; _i++) {\n      var cell = headerCells_1[_i];\n      EventHandler.clearEvents(cell);\n      this.wireMouseEvents(cell);\n    }\n\n    var alldayCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.ALLDAY_CELLS_CLASS));\n\n    for (var _a = 0, alldayCells_1 = alldayCells; _a < alldayCells_1.length; _a++) {\n      var cell = alldayCells_1[_a];\n      EventHandler.clearEvents(cell);\n      this.wireCellEvents(cell);\n    }\n\n    var wrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n    EventHandler.clearEvents(contentBody);\n    this.wireCellEvents(contentBody);\n    EventHandler.clearEvents(wrap);\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n    this.wireExpandCollapseIconEvents();\n    this.parent.notify(event.contentReady, {});\n  };\n\n  VerticalView.prototype.renderLayout = function (type) {\n    if (this.parent.isServerRenderer()) {\n      this.colLevels = this.generateColumnLevels();\n\n      if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.activeView.isTimelineView()) {\n        this.parent.resourceBase.setRenderedResources();\n      }\n\n      return;\n    }\n\n    this.setPanel(createElement('div', {\n      className: cls.TABLE_WRAP_CLASS\n    }));\n    var clsList = [this.baseCssClass, this.viewClass];\n    clsList.push(type);\n\n    if (this.parent.activeViewOptions.group.byDate) {\n      clsList.push('e-by-date');\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n    }\n\n    if (this.parent.activeViewOptions.allowVirtualScrolling) {\n      clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n    }\n\n    this.renderPanel(type);\n    addClass([this.element], clsList);\n    this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n    this.element.querySelector('table').setAttribute('role', 'presentation');\n    this.colLevels = this.generateColumnLevels();\n    this.renderHeader();\n    this.renderContent();\n\n    if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n      this.renderResourceMobileLayout();\n    }\n\n    this.parent.notify(event.contentReady, {});\n    this.parent.updateLayoutTemplates();\n  };\n\n  VerticalView.prototype.renderHeader = function () {\n    var tr = createElement('tr');\n    var dateTd = createElement('td');\n    dateTd.appendChild(this.renderDatesHeader());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      var indentTd = createElement('td', {\n        className: cls.LEFT_INDENT_CLASS\n      });\n      indentTd.appendChild(this.renderLeftIndent());\n      tr.appendChild(indentTd);\n    }\n\n    tr.appendChild(dateTd);\n    prepend([tr], this.element.querySelector('tbody'));\n  };\n\n  VerticalView.prototype.renderContent = function () {\n    var tr = createElement('tr');\n    var workTd = createElement('td');\n\n    if (this.parent.isAdaptive) {\n      workTd.setAttribute('colspan', this.parent.activeViewOptions.timeScale.enable ? '2' : '1');\n      var scrollContainer = createElement('div', {\n        className: cls.SCROLL_CONTAINER_CLASS\n      });\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        scrollContainer.appendChild(this.renderTimeCells());\n      }\n\n      scrollContainer.appendChild(this.renderContentArea());\n      workTd.appendChild(scrollContainer);\n      EventHandler.add(scrollContainer, 'scroll', this.onApaptiveScroll, this);\n      EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onApaptiveMove, this);\n      tr.appendChild(workTd);\n    } else {\n      workTd.appendChild(this.renderContentArea());\n\n      if (this.parent.activeViewOptions.timeScale.enable) {\n        var timesTd = createElement('td');\n        timesTd.appendChild(this.renderTimeCells());\n        tr.appendChild(timesTd);\n      }\n\n      tr.appendChild(workTd);\n    }\n\n    this.element.querySelector('tbody').appendChild(tr);\n  };\n\n  VerticalView.prototype.renderLeftIndent = function () {\n    var wrap = createElement('div', {\n      className: cls.LEFT_INDENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr_1 = trEle.cloneNode();\n      var data_1 = {\n        className: [this.colLevels[i][0] && this.colLevels[i][0].className[0]],\n        type: 'emptyCells'\n      };\n\n      if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n        data_1.className.push(cls.WEEK_NUMBER_CLASS);\n        var weekNumberDate = util.getWeekLastDate(this.renderDates.slice(-1)[0], this.parent.firstDayOfWeek);\n        var weekNo = this.parent.currentView === 'Day' ? util.getWeekNumber(weekNumberDate) : util.getWeekNumber(this.renderDates.slice(-1)[0]);\n        data_1.template = [createElement('span', {\n          innerHTML: '' + weekNo,\n          attrs: {\n            title: this.parent.localeObj.getConstant('week') + ' ' + weekNo\n          }\n        })];\n      }\n\n      ntr_1.appendChild(this.createTd(data_1));\n      tbl.querySelector('tbody').appendChild(ntr_1);\n    }\n\n    var ntr = trEle.cloneNode();\n    var appointmentExpandCollapse = createElement('div', {\n      attrs: {\n        'tabindex': '0',\n        'role': 'list',\n        title: 'Expand-all-day-section',\n        'aria-disabled': 'false',\n        'aria-label': 'Expand section'\n      },\n      className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' + cls.ICON + ' ' + cls.DISABLE_CLASS\n    });\n    var data = {\n      className: [cls.ALLDAY_CELLS_CLASS],\n      type: 'emptyCells'\n    };\n    var nth = this.createTd(data);\n    nth.appendChild(appointmentExpandCollapse);\n    ntr.appendChild(nth);\n    tbl.querySelector('tbody').appendChild(ntr);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderDatesHeader = function () {\n    var container = createElement('div', {\n      className: cls.DATE_HEADER_CONTAINER_CLASS\n    });\n    var wrap = createElement('div', {\n      className: cls.DATE_HEADER_WRAP_CLASS\n    });\n    container.appendChild(wrap);\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n    var rowCount = this.colLevels.length;\n    var lastLevel = this.colLevels[rowCount - 1];\n    this.createColGroup(tbl, lastLevel);\n\n    for (var i = 0; i < rowCount; i++) {\n      var ntr = trEle.cloneNode();\n      addClass([ntr], cls.HEADER_ROW_CLASS);\n      var level = this.colLevels[i];\n\n      for (var j = 0; j < level.length; j++) {\n        ntr.appendChild(this.createTd(level[j]));\n      }\n\n      tbl.querySelector('tbody').appendChild(ntr);\n    }\n\n    this.createAllDayRow(tbl, lastLevel);\n    wrap.appendChild(tbl);\n    return container;\n  };\n\n  VerticalView.prototype.createAllDayRow = function (table, tdData) {\n    var ntr = createElement('tr');\n    addClass([ntr], cls.ALLDAY_ROW_CLASS);\n\n    for (var j = 0; j < tdData.length; j++) {\n      var td = extend({}, tdData[j]);\n      td.className = [cls.ALLDAY_CELLS_CLASS];\n      td.type = 'alldayCells';\n      var ntd = this.createTd(td);\n      ntd.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        ntd.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n\n      this.wireCellEvents(ntd);\n      ntr.appendChild(ntd);\n    }\n\n    table.querySelector('tbody').appendChild(ntr);\n    var thead = createElement('thead');\n    thead.appendChild(this.createEventWrapper('allDay'));\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.createTd = function (td) {\n    var tdEle = createElement('td');\n    this.addAttributes(td, tdEle);\n\n    if (td.date && td.type) {\n      var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n\n      if (ele && ele.length) {\n        append(ele, tdEle);\n      }\n    }\n\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n      addClass([tdEle], cls.DISABLE_DATES);\n    }\n\n    if (td.type === 'resourceHeader') {\n      this.setResourceHeaderContent(tdEle, td);\n    }\n\n    if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n      tdEle.setAttribute('data-date', td.date.getTime().toString());\n\n      if (!isNullOrUndefined(td.groupIndex)) {\n        tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n      }\n\n      this.wireMouseEvents(tdEle);\n    }\n\n    var args = {\n      elementType: td.type,\n      element: tdEle,\n      date: td.date,\n      groupIndex: td.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return tdEle;\n  };\n\n  VerticalView.prototype.wireCellEvents = function (element) {\n    EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n    this.wireMouseEvents(element);\n  };\n\n  VerticalView.prototype.wireMouseEvents = function (element) {\n    EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n\n    if (!this.parent.isAdaptive) {\n      EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n    }\n  };\n\n  VerticalView.prototype.renderTimeCells = function () {\n    var _this = this;\n\n    var wrap = createElement('div', {\n      className: cls.TIME_CELLS_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout();\n    var trEle = createElement('tr');\n\n    var handler = function (r) {\n      r.type = r.first ? 'majorSlot' : 'minorSlot';\n      r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n      var ntr = trEle.cloneNode();\n      var data = {\n        date: r.date,\n        type: r.type,\n        className: r.className\n      };\n      ntr.appendChild(_this.createTd(data));\n      tbl.querySelector('tbody').appendChild(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    wrap.appendChild(tbl);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentArea = function () {\n    var wrap = createElement('div', {\n      className: cls.CONTENT_WRAP_CLASS\n    });\n    var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n    this.addAutoHeightClass(tbl);\n    this.addIgnoreWhitespaceClass(tbl);\n    this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n    this.renderContentTable(tbl);\n    wrap.appendChild(tbl);\n    this.wireCellEvents(tbl.querySelector('tbody'));\n    EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n    EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n    return wrap;\n  };\n\n  VerticalView.prototype.renderContentTable = function (table) {\n    var _this = this;\n\n    var tr = createElement('tr', {\n      attrs: {\n        role: 'row'\n      }\n    });\n    var td = createElement('td', {\n      attrs: {\n        role: 'gridcell',\n        'aria-selected': 'false'\n      }\n    });\n    var tbody = table.querySelector('tbody');\n\n    var handler = function (r) {\n      var ntr = tr.cloneNode();\n\n      for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n        var tdData = _a[_i];\n\n        var ntd = _this.createContentTd(tdData, r, td);\n\n        ntr.appendChild(ntd);\n      }\n\n      tbody.appendChild(ntr);\n      return r;\n    };\n\n    this.getTimeSlotRows(handler);\n    this.renderContentTableHeader(table);\n  };\n\n  VerticalView.prototype.createContentTd = function (tdData, r, td) {\n    var ntd = td.cloneNode();\n\n    if (tdData.colSpan) {\n      ntd.setAttribute('colspan', tdData.colSpan.toString());\n    }\n\n    var clsName = this.getContentTdClass(r);\n\n    if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + tdData.date)))) {\n      clsName.push(cls.DISABLE_DATES);\n    }\n\n    var cellDate = util.resetTime(new Date('' + tdData.date));\n    util.setTime(cellDate, util.getDateInMs(r.date));\n    var type = 'workCells';\n\n    if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n      clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n      type = 'resourceGroupCells';\n    }\n\n    if (this.parent.workHours.highlight && (this.parent.activeViewOptions.timeScale.enable && this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays) || !this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays))) {\n      clsName.push(cls.WORK_HOURS_CLASS);\n    }\n\n    addClass([ntd], clsName);\n\n    if (this.parent.activeViewOptions.cellTemplate) {\n      var dateValue = util.addLocalOffset(cellDate);\n      var args_1 = {\n        date: dateValue,\n        type: type,\n        groupIndex: tdData.groupIndex\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.cellTemplateName;\n      var templateId = scheduleId + viewName + 'cellTemplate';\n      var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n      append(tooltipTemplate, ntd);\n    }\n\n    ntd.setAttribute('data-date', cellDate.getTime().toString());\n\n    if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n      var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex : tdData.groupIndex;\n      ntd.setAttribute('data-group-index', '' + groupIndex);\n    }\n\n    var args = {\n      elementType: type,\n      element: ntd,\n      date: cellDate,\n      groupIndex: tdData.groupIndex\n    };\n    this.parent.trigger(event.renderCell, args);\n    return ntd;\n  };\n\n  VerticalView.prototype.getContentTdClass = function (r) {\n    return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n  };\n\n  VerticalView.prototype.renderContentTableHeader = function (table) {\n    var thead = createElement('thead');\n    thead.appendChild(this.createEventWrapper());\n\n    if (this.parent.activeViewOptions.timeScale.enable) {\n      thead.appendChild(this.createEventWrapper('timeIndicator'));\n    }\n\n    prepend([thead], table);\n  };\n\n  VerticalView.prototype.createEventWrapper = function (type) {\n    if (type === void 0) {\n      type = '';\n    }\n\n    var tr = createElement('tr');\n    this.colLevels.slice(-1)[0].forEach(function (col, day) {\n      var appointmentWrap = createElement('td', {\n        className: type === 'allDay' ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : type === 'timeIndicator' ? cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS,\n        attrs: {\n          'data-date': col.date.getTime().toString()\n        }\n      });\n\n      if (!isNullOrUndefined(col.groupIndex)) {\n        appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n      }\n\n      if (type === '') {\n        var innerWrapper = createElement('div', {\n          id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + day.toString(),\n          className: cls.APPOINTMENT_WRAPPER_CLASS\n        });\n        appointmentWrap.appendChild(innerWrapper);\n      }\n\n      tr.appendChild(appointmentWrap);\n    });\n    return tr;\n  };\n\n  VerticalView.prototype.getScrollableElement = function () {\n    if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n      return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n    } else {\n      return this.getContentAreaElement();\n    }\n  };\n\n  VerticalView.prototype.getLeftPanelElement = function () {\n    return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n  };\n\n  VerticalView.prototype.getEndDateFromStartDate = function (start) {\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var end = new Date(start.getTime());\n    end.setMilliseconds(end.getMilliseconds() + msInterval);\n    return end;\n  };\n\n  VerticalView.prototype.getTimeSlotRows = function (handler) {\n    var rows = [];\n    var startHour = this.getStartHour();\n    var endHour = this.getEndHour();\n    var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n    var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n    var length = Math.round(util.MS_PER_DAY / msInterval);\n    var msStartHour = startHour.getTime();\n    var msEndHour = endHour.getTime();\n\n    if (msStartHour !== msEndHour) {\n      length = Math.abs(msEndHour - msStartHour) / msInterval - (new Date(msEndHour).getTimezoneOffset() - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount);\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable) {\n      length = 1;\n    }\n\n    var start = this.parent.getStartEndTime(this.parent.workHours.start);\n    var end = this.parent.getStartEndTime(this.parent.workHours.end);\n\n    for (var i = 0; i < length; i++) {\n      var dt = new Date(msStartHour + msInterval * i);\n\n      if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n        var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n        dt = new Date(dt.getTime() - 1000 * 60 * timeOffset);\n      }\n\n      var majorTickDivider = i % (msMajorInterval / msInterval);\n      var row = {\n        date: new Date('' + dt),\n        startHour: start,\n        endHour: end,\n        first: majorTickDivider === 0,\n        middle: majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1,\n        last: majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1,\n        type: ''\n      };\n\n      if (handler) {\n        handler(row);\n      }\n\n      rows.push(row);\n    }\n\n    return rows;\n  };\n  /**\n   * Get module name.\n   */\n\n\n  VerticalView.prototype.getModuleName = function () {\n    return 'verticalView';\n  };\n  /**\n   * To destroy the vertical view.\n   * @return {void}\n   * @private\n   */\n\n\n  VerticalView.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.clearCurrentTimeIndicatorTimer();\n\n    if (this.element) {\n      var contentScrollableEle = this.getContentAreaElement();\n\n      if (contentScrollableEle) {\n        EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n      }\n\n      if (this.parent.resourceBase) {\n        this.parent.resourceBase.destroy();\n      }\n\n      if (isBlazor()) {\n        var view = this.parent.viewCollections[this.viewIndex].option;\n\n        if (this.parent.isServerRenderer(view)) {\n          if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'TimelineYear') {\n            this.element.style.display = 'none';\n          }\n\n          this.parent.resetEventTemplates();\n        } else {\n          this.parent.resetLayoutTemplates();\n          this.parent.resetEventTemplates();\n          remove(this.element);\n        }\n      } else {\n        remove(this.element);\n      }\n\n      this.element = null;\n\n      if (this.parent.scheduleTouchModule) {\n        this.parent.scheduleTouchModule.resetValues();\n      }\n    }\n  };\n\n  return VerticalView;\n}(ViewBase);\n\nexport { VerticalView };","map":{"version":3,"sources":["D:/developing/projects/Whiteboard/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/vertical-view.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","isNullOrUndefined","extend","EventHandler","formatUnit","Browser","isBlazor","createElement","remove","addClass","removeClass","append","prepend","ViewBase","ViewHelper","VerticalEvent","MonthEvent","util","event","cls","VerticalView","_super","parent","_this","call","viewClass","isInverseTableSelect","baseCssClass","addEventListener","on","scrollUiUpdate","dataReady","renderEvents","removeEventListener","off","activeViewOptions","timeScale","enable","appointment","renderAppointments","notify","eventsLoaded","onContentScroll","e","removeNewEventElement","target","virtualScroll","scrollLeftPanel","scrollTopPanel","isAdaptive","uiStateValues","top","scrollTop","left","scrollLeft","quickPopup","quickPopupHide","onApaptiveMove","action","preventDefault","onApaptiveScroll","leftPanel","getLeftPanelElement","args","headerBarHeight","getHeaderBarHeight","timecells","content","getScrollableElement","header","getDatesHeaderElement","scrollerHeight","element","offsetHeight","setContentHeight","scrollBarWidth","getScrollBarWidth","firstElementChild","style","cssProperties","rtlBorder","rtlPadding","offsetWidth","clientWidth","border","padding","isPreventScrollUpdate","isInitial","scrollToWorkHour","setColWidth","highlightCurrentTime","leftPanelElement","height","isTimelineView","isServerRenderer","getScrollXIndent","workHours","highlight","firstWorkHourCell","querySelector","WORK_HOURS_CLASS","offsetTop","scrollToHour","hour","scrollDate","date","getStartEndTime","getTopFromDateTime","generateColumnLevels","level","getDateSlots","renderDates","workDays","columnLevels","group","resources","length","resourceBase","generateResourceLevels","isGroupAdaptive","lastResourceLevel","resourceLevel","groupIndex","resStartHour","resourceData","resource","startHourField","resEndHour","endHourField","dateSlots","push","colLevels","workStartHour","workEndHour","start","end","dateCol","_i","renderDates_1","col","classList","HEADER_CELLS_CLASS","isCurrentDate","CURRENT_DAY_CLASS","type","className","colSpan","startHour","Date","endHour","isWorkHourRange","getStartHour","getTime","getEndHour","headerRows","slice","option","showTimeIndicator","getCurrentTime","currentDateIndex","getCurrentTimeIndicatorIndex","workCells","querySelectorAll","WORK_CELLS_CLASS","changeCurrentTimePosition","currentTimeIndicatorTimer","window","setInterval","MS_PER_MINUTE","clearCurrentTimeIndicatorTimer","count","_a","index","getIndexOfDate","resetTime","resIndex","byDate","clearInterval","removeCurrentTimeIndicatorElements","queryString","PREVIOUS_TIMELINE_CLASS","CURRENT_TIMELINE_CLASS","CURRENT_TIME_CLASS","timeIndicator","forEach","indicator","isDestroyed","firstRow","getContentTable","rows","topInPx","rowIndex","Math","floor","cells","isNaN","curTimeWrap","TIMELINE_WRAPPER_CLASS","i","length_1","appendChild","styles","currentDateIndex_1","day","currentTimeEle","innerHTML","getTimeString","timeCellsWrap","timeTrs","HIDE_CHILDS_CLASS","lastElementChild","diffInMinutes","getHours","getMinutes","getWorkCellHeight","slotCount","interval","getTdContent","cntEle","wrapper","templateName","templateId","id","dateValue","addLocalOffset","dateHeaderTemplate","viewName","dateHeaderTemplateName","getDateHeaderTemplate","activeView","getTimelineDate","capitalizeFirstWord","getDayName","getDate","childNodes","majorSlotTemplate","getMajorSlotTemplate","minorSlotTemplate","getMinorSlotTemplate","cellTemplate","cellTemplateName","getCellTemplate","serverRenderLayout","setPanel","TABLE_WRAP_CLASS","RESOURCE_TOOLBAR_CONTAINER","renderResourceMobileLayout","headerCells","DATE_HEADER_WRAP_CLASS","headerCells_1","cell","clearEvents","wireMouseEvents","alldayCells","ALLDAY_CELLS_CLASS","alldayCells_1","wireCellEvents","wrap","CONTENT_WRAP_CLASS","contentBody","CONTENT_TABLE_CLASS","add","touchMoveEvent","wireExpandCollapseIconEvents","contentReady","renderLayout","setRenderedResources","clsList","TIMESCALE_DISABLE","allowVirtualScrolling","VIRTUAL_SCROLL_CLASS","renderPanel","createTableLayout","OUTER_TABLE_CLASS","setAttribute","renderHeader","renderContent","updateLayoutTemplates","tr","dateTd","renderDatesHeader","indentTd","LEFT_INDENT_CLASS","renderLeftIndent","workTd","scrollContainer","SCROLL_CONTAINER_CLASS","renderTimeCells","renderContentArea","timesTd","LEFT_INDENT_WRAP_CLASS","tbl","trEle","rowCount","ntr_1","cloneNode","data_1","showWeekNumber","indexOf","WEEK_NUMBER_CLASS","weekNumberDate","getWeekLastDate","firstDayOfWeek","weekNo","currentView","getWeekNumber","template","attrs","title","localeObj","getConstant","createTd","ntr","appointmentExpandCollapse","ALLDAY_APPOINTMENT_SECTION_CLASS","APPOINTMENT_ROW_EXPAND_CLASS","ICON","DISABLE_CLASS","data","nth","container","DATE_HEADER_CONTAINER_CLASS","lastLevel","createColGroup","HEADER_ROW_CLASS","j","createAllDayRow","table","tdData","ALLDAY_ROW_CLASS","td","ntd","toString","thead","createEventWrapper","tdEle","addAttributes","ele","isMinMaxDate","DISABLE_DATES","setResourceHeaderContent","elementType","trigger","renderCell","workCellAction","cellMouseDown","cellClick","cellDblClick","TIME_CELLS_WRAP_CLASS","handler","r","first","last","TIME_CELLS_CLASS","TIME_SLOT_CLASS","getTimeSlotRows","addAutoHeightClass","addIgnoreWhitespaceClass","renderContentTable","role","tbody","createContentTd","renderContentTableHeader","clsName","getContentTdClass","cellDate","setTime","getDateInMs","RESOURCE_PARENT_CLASS","RESOURCE_GROUP_CELLS_CLASS","isWorkHour","isWorkDay","args_1","scheduleId","tooltipTemplate","ALTERNATE_CELLS_CLASS","appointmentWrap","ALLDAY_APPOINTMENT_WRAPPER_CLASS","DAY_WRAPPER_CLASS","innerWrapper","APPOINTMENT_WRAPPER_CLASS","getContentAreaElement","getEndDateFromStartDate","msMajorInterval","msInterval","setMilliseconds","getMilliseconds","round","MS_PER_DAY","msStartHour","msEndHour","abs","getTimezoneOffset","dt","isDaylightSavingTime","timeOffset","majorTickDivider","row","middle","getModuleName","destroy","contentScrollableEle","view","viewCollections","viewIndex","display","resetEventTemplates","resetLayoutTemplates","scheduleTouchModule","resetValues"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { isNullOrUndefined, extend, EventHandler, formatUnit, Browser, isBlazor } from '@syncfusion/ej2-base';\nimport { createElement, remove, addClass, removeClass, append, prepend } from '@syncfusion/ej2-base';\nimport { ViewBase, ViewHelper } from './view-base';\nimport { VerticalEvent } from '../event-renderer/vertical-view';\nimport { MonthEvent } from '../event-renderer/month';\nimport * as util from '../base/util';\nimport * as event from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * vertical view\n */\nvar VerticalView = /** @class */ (function (_super) {\n    __extends(VerticalView, _super);\n    /**\n     * Constructor for vertical view\n     */\n    function VerticalView(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.viewClass = 'e-day-view';\n        _this.isInverseTableSelect = true;\n        _this.baseCssClass = 'e-vertical-view';\n        return _this;\n    }\n    VerticalView.prototype.addEventListener = function () {\n        this.parent.on(event.scrollUiUpdate, this.scrollUiUpdate, this);\n        this.parent.on(event.dataReady, this.renderEvents, this);\n    };\n    VerticalView.prototype.removeEventListener = function () {\n        this.parent.off(event.scrollUiUpdate, this.scrollUiUpdate);\n        this.parent.off(event.dataReady, this.renderEvents);\n    };\n    VerticalView.prototype.renderEvents = function () {\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var appointment = new VerticalEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        else {\n            var appointment = new MonthEvent(this.parent);\n            appointment.renderAppointments();\n        }\n        this.parent.notify(event.eventsLoaded, {});\n    };\n    VerticalView.prototype.onContentScroll = function (e) {\n        this.parent.removeNewEventElement();\n        var target = e.target;\n        this.parent.notify(event.virtualScroll, e);\n        this.scrollLeftPanel(target);\n        this.scrollTopPanel(target);\n        if (!this.parent.isAdaptive) {\n            this.parent.uiStateValues.top = target.scrollTop;\n        }\n        this.parent.uiStateValues.left = target.scrollLeft;\n        if (!isNullOrUndefined(this.parent.quickPopup)) {\n            this.parent.quickPopup.quickPopupHide();\n        }\n    };\n    VerticalView.prototype.onApaptiveMove = function (e) {\n        if (this.parent.uiStateValues.action) {\n            e.preventDefault();\n        }\n    };\n    VerticalView.prototype.onApaptiveScroll = function (e) {\n        this.parent.removeNewEventElement();\n        this.parent.uiStateValues.top = e.target.scrollTop;\n    };\n    VerticalView.prototype.scrollLeftPanel = function (target) {\n        var leftPanel = this.getLeftPanelElement();\n        if (!isNullOrUndefined(leftPanel)) {\n            leftPanel.scrollTop = target.scrollTop;\n        }\n    };\n    VerticalView.prototype.scrollUiUpdate = function (args) {\n        var headerBarHeight = this.getHeaderBarHeight();\n        var timecells = this.getLeftPanelElement();\n        var content = this.getScrollableElement();\n        var header = this.getDatesHeaderElement();\n        var scrollerHeight = this.parent.element.offsetHeight - headerBarHeight - header.offsetHeight;\n        this.setContentHeight(content, timecells, scrollerHeight);\n        var scrollBarWidth = util.getScrollBarWidth();\n        // tslint:disable:no-any\n        header.firstElementChild.style[args.cssProperties.rtlBorder] = '';\n        header.style[args.cssProperties.rtlPadding] = '';\n        if (content.offsetWidth - content.clientWidth > 0) {\n            header.firstElementChild.style[args.cssProperties.border] = scrollBarWidth > 0 ? '1px' : '0px';\n            header.style[args.cssProperties.padding] = scrollBarWidth > 0 ? scrollBarWidth - 1 + 'px' : '0px';\n        }\n        else {\n            header.firstElementChild.style[args.cssProperties.border] = '';\n            header.style[args.cssProperties.padding] = '';\n        }\n        // tslint:enable:no-any\n        if (!args.isPreventScrollUpdate) {\n            if (this.parent.uiStateValues.isInitial) {\n                this.scrollToWorkHour();\n                this.parent.uiStateValues.isInitial = false;\n            }\n            else {\n                content.scrollTop = this.parent.uiStateValues.top;\n                content.scrollLeft = this.parent.uiStateValues.left;\n            }\n        }\n        this.setColWidth(content);\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            this.highlightCurrentTime();\n        }\n    };\n    VerticalView.prototype.setContentHeight = function (element, leftPanelElement, height) {\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n            element.style.height = formatUnit(height);\n        }\n        else {\n            if (!isNullOrUndefined(leftPanelElement)) {\n                leftPanelElement.style.height = formatUnit(height - this.getScrollXIndent(element));\n            }\n            element.style.height = formatUnit(height);\n        }\n    };\n    VerticalView.prototype.scrollToWorkHour = function () {\n        if (this.parent.workHours.highlight) {\n            var firstWorkHourCell = this.element.querySelector('.' + cls.WORK_HOURS_CLASS);\n            if (firstWorkHourCell) {\n                this.getScrollableElement().scrollTop = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.top = firstWorkHourCell.offsetTop;\n                this.parent.uiStateValues.left = 0;\n            }\n        }\n    };\n    VerticalView.prototype.scrollToHour = function (hour, scrollDate) {\n        var date = this.parent.getStartEndTime(hour);\n        if (isNullOrUndefined(date) || !isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        this.getScrollableElement().scrollTop = this.getTopFromDateTime(date);\n    };\n    VerticalView.prototype.generateColumnLevels = function () {\n        var level = this.getDateSlots(this.renderDates, this.parent.activeViewOptions.workDays);\n        var columnLevels = [];\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            columnLevels = this.parent.resourceBase.generateResourceLevels(level);\n            if (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) {\n                var resourceLevel = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n                var resStartHour = resourceLevel.resourceData[resourceLevel.resource.startHourField];\n                var resEndHour = resourceLevel.resourceData[resourceLevel.resource.endHourField];\n                var dateSlots = this.getDateSlots(resourceLevel.renderDates, resourceLevel.workDays, resStartHour, resEndHour);\n                columnLevels = [dateSlots];\n            }\n        }\n        else {\n            columnLevels.push(level);\n        }\n        this.colLevels = columnLevels;\n        return columnLevels;\n    };\n    VerticalView.prototype.getDateSlots = function (renderDates, workDays, workStartHour, workEndHour) {\n        if (workStartHour === void 0) { workStartHour = this.parent.workHours.start; }\n        if (workEndHour === void 0) { workEndHour = this.parent.workHours.end; }\n        var dateCol = [];\n        var start = this.parent.getStartEndTime(workStartHour);\n        var end = this.parent.getStartEndTime(workEndHour);\n        for (var _i = 0, renderDates_1 = renderDates; _i < renderDates_1.length; _i++) {\n            var col = renderDates_1[_i];\n            var classList = [cls.HEADER_CELLS_CLASS];\n            if (this.isCurrentDate(col)) {\n                classList.push(cls.CURRENT_DAY_CLASS);\n            }\n            dateCol.push({\n                date: col, type: 'dateHeader', className: classList, colSpan: 1,\n                workDays: workDays, startHour: new Date(+start), endHour: new Date(+end)\n            });\n        }\n        return dateCol;\n    };\n    VerticalView.prototype.isWorkHourRange = function (date) {\n        return (this.getStartHour().getTime() <= date.getTime()) && (this.getEndHour().getTime() >= date.getTime());\n    };\n    VerticalView.prototype.highlightCurrentTime = function () {\n        var _this = this;\n        if (this.parent.activeViewOptions.headerRows.length > 0 &&\n            this.parent.activeViewOptions.headerRows.slice(-1)[0].option !== 'Hour') {\n            return;\n        }\n        if (this.parent.showTimeIndicator && this.isWorkHourRange(this.parent.getCurrentTime())) {\n            var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n            if (currentDateIndex.length > 0) {\n                var workCells = [].slice.call(this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n                if (workCells.length > 0) {\n                    this.changeCurrentTimePosition();\n                }\n                if (isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n                    this.currentTimeIndicatorTimer = window.setInterval(function () { _this.changeCurrentTimePosition(); }, util.MS_PER_MINUTE);\n                }\n            }\n            else {\n                this.clearCurrentTimeIndicatorTimer();\n            }\n        }\n        else {\n            this.clearCurrentTimeIndicatorTimer();\n        }\n    };\n    VerticalView.prototype.getCurrentTimeIndicatorIndex = function () {\n        var currentDateIndex = [];\n        if (!isNullOrUndefined(this.parent.resourceBase) && (this.parent.activeViewOptions.group.resources.length > 0) &&\n            !this.parent.uiStateValues.isGroupAdaptive) {\n            var count = 0;\n            for (var _i = 0, _a = this.parent.resourceBase.lastResourceLevel; _i < _a.length; _i++) {\n                var resource = _a[_i];\n                var index = this.parent.getIndexOfDate(resource.renderDates, util.resetTime(this.parent.getCurrentTime()));\n                if (index >= 0) {\n                    var resIndex = this.parent.activeViewOptions.group.byDate ?\n                        (this.parent.resourceBase.lastResourceLevel.length * index) + count : count + index;\n                    currentDateIndex.push(resIndex);\n                }\n                count += this.parent.activeViewOptions.group.byDate ? 1 : resource.renderDates.length;\n            }\n        }\n        else {\n            var renderDates = (this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.lastResourceLevel.length > 0) ?\n                this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex].renderDates : this.renderDates;\n            var index = this.parent.getIndexOfDate(renderDates, util.resetTime(this.parent.getCurrentTime()));\n            if (index >= 0) {\n                currentDateIndex.push(index);\n            }\n        }\n        return currentDateIndex;\n    };\n    VerticalView.prototype.clearCurrentTimeIndicatorTimer = function () {\n        if (!isNullOrUndefined(this.currentTimeIndicatorTimer)) {\n            window.clearInterval(this.currentTimeIndicatorTimer);\n            this.currentTimeIndicatorTimer = null;\n            this.removeCurrentTimeIndicatorElements();\n        }\n    };\n    VerticalView.prototype.removeCurrentTimeIndicatorElements = function () {\n        var queryString = '.' + cls.PREVIOUS_TIMELINE_CLASS + ',.' + cls.CURRENT_TIMELINE_CLASS + ',.' + cls.CURRENT_TIME_CLASS;\n        var timeIndicator = [].slice.call(this.element.querySelectorAll(queryString));\n        timeIndicator.forEach(function (indicator) { return remove(indicator); });\n    };\n    VerticalView.prototype.changeCurrentTimePosition = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.removeCurrentTimeIndicatorElements();\n        var currentDateIndex = this.getCurrentTimeIndicatorIndex();\n        var firstRow = this.parent.getContentTable().rows[0];\n        var top = this.getTopFromDateTime(this.parent.getCurrentTime());\n        var topInPx = formatUnit(top);\n        var rowIndex = Math.floor(top / firstRow.cells[0].offsetHeight);\n        if (isNullOrUndefined(rowIndex) || isNaN(rowIndex)) {\n            return;\n        }\n        var curTimeWrap = [].slice.call(this.element.querySelectorAll('.' + cls.TIMELINE_WRAPPER_CLASS));\n        for (var i = 0, length_1 = currentDateIndex[0]; i < length_1; i++) {\n            curTimeWrap[i].appendChild(createElement('div', { className: cls.PREVIOUS_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        for (var _i = 0, currentDateIndex_1 = currentDateIndex; _i < currentDateIndex_1.length; _i++) {\n            var day = currentDateIndex_1[_i];\n            curTimeWrap[day].appendChild(createElement('div', { className: cls.CURRENT_TIMELINE_CLASS, styles: 'top:' + topInPx }));\n        }\n        var currentTimeEle = createElement('div', {\n            innerHTML: this.parent.getTimeString(this.parent.getCurrentTime()),\n            className: cls.CURRENT_TIME_CLASS,\n            styles: 'top:' + topInPx\n        });\n        var timeCellsWrap = this.getLeftPanelElement();\n        var timeTrs = [].slice.call(timeCellsWrap.querySelectorAll('tr'));\n        if (rowIndex <= timeTrs.length) {\n            removeClass(timeCellsWrap.querySelectorAll('.' + cls.HIDE_CHILDS_CLASS), cls.HIDE_CHILDS_CLASS);\n            addClass([timeTrs[rowIndex].lastElementChild], cls.HIDE_CHILDS_CLASS);\n            prepend([currentTimeEle], timeCellsWrap);\n            currentTimeEle.style.top = formatUnit(currentTimeEle.offsetTop - (currentTimeEle.offsetHeight / 2));\n        }\n    };\n    VerticalView.prototype.getTopFromDateTime = function (date) {\n        var startHour = this.getStartHour();\n        var diffInMinutes = ((date.getHours() - startHour.getHours()) * 60) + (date.getMinutes() - startHour.getMinutes());\n        return (diffInMinutes * this.getWorkCellHeight() * this.parent.activeViewOptions.timeScale.slotCount) /\n            this.parent.activeViewOptions.timeScale.interval;\n    };\n    VerticalView.prototype.getWorkCellHeight = function () {\n        return this.element.querySelector('.' + cls.WORK_CELLS_CLASS).offsetHeight;\n    };\n    VerticalView.prototype.getTdContent = function (date, type, groupIndex) {\n        var cntEle;\n        var wrapper = createElement('div');\n        var templateName = '';\n        var templateId = this.parent.element.id + '_';\n        var dateValue = util.addLocalOffset(date);\n        switch (type) {\n            case 'dateHeader':\n                if (this.parent.activeViewOptions.dateHeaderTemplate) {\n                    templateName = 'dateHeaderTemplate';\n                    var args = { date: dateValue, type: type };\n                    var viewName = this.parent.activeViewOptions.dateHeaderTemplateName;\n                    cntEle = [].slice.call(this.parent.getDateHeaderTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = this.parent.activeView.isTimelineView() ?\n                        \"<span class=\\\"e-header-date e-navigate\\\">\" + ViewHelper.getTimelineDate(this.parent, date) + \"</span>\" :\n                        \"<div class=\\\"e-header-day\\\">\" + util.capitalizeFirstWord(ViewHelper.getDayName(this.parent, date), 'single') + \"</div>\" +\n                            (\"<div class=\\\"e-header-date e-navigate\\\" role=\\\"link\\\">\" + ViewHelper.getDate(this.parent, date) + \"</div>\");\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'majorSlot':\n                if (this.parent.activeViewOptions.timeScale.majorSlotTemplate) {\n                    templateName = 'majorSlotTemplate';\n                    var args = { date: dateValue, type: type };\n                    cntEle = [].slice.call(this.parent.getMajorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = \"<span>\" + ViewHelper.getTime(this.parent, date) + \"</span>\";\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'minorSlot':\n                if (this.parent.activeViewOptions.timeScale.minorSlotTemplate) {\n                    templateName = 'minorSlotTemplate';\n                    var args = { date: dateValue, type: type };\n                    cntEle = [].slice.call(this.parent.getMinorSlotTemplate()(args, this.parent, templateName, templateId + templateName, false));\n                }\n                else {\n                    wrapper.innerHTML = '&nbsp;';\n                    cntEle = [].slice.call(wrapper.childNodes);\n                }\n                break;\n            case 'alldayCells':\n                if (this.parent.activeViewOptions.cellTemplate) {\n                    var viewName = this.parent.activeViewOptions.cellTemplateName;\n                    templateName = 'cellTemplate';\n                    var args = { date: dateValue, type: type, groupIndex: groupIndex };\n                    cntEle = [].slice.call(this.parent.getCellTemplate()(args, this.parent, templateName, templateId + viewName + templateName, false));\n                }\n                break;\n        }\n        return cntEle;\n    };\n    VerticalView.prototype.serverRenderLayout = function () {\n        this.setPanel(this.parent.element.querySelector('.' + cls.TABLE_WRAP_CLASS));\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        var headerCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.HEADER_CELLS_CLASS));\n        for (var _i = 0, headerCells_1 = headerCells; _i < headerCells_1.length; _i++) {\n            var cell = headerCells_1[_i];\n            EventHandler.clearEvents(cell);\n            this.wireMouseEvents(cell);\n        }\n        var alldayCells = [].slice.call(this.element.querySelectorAll('.' + cls.DATE_HEADER_WRAP_CLASS + ' td.' + cls.ALLDAY_CELLS_CLASS));\n        for (var _a = 0, alldayCells_1 = alldayCells; _a < alldayCells_1.length; _a++) {\n            var cell = alldayCells_1[_a];\n            EventHandler.clearEvents(cell);\n            this.wireCellEvents(cell);\n        }\n        var wrap = this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n        EventHandler.clearEvents(contentBody);\n        this.wireCellEvents(contentBody);\n        EventHandler.clearEvents(wrap);\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        this.wireExpandCollapseIconEvents();\n        this.parent.notify(event.contentReady, {});\n    };\n    VerticalView.prototype.renderLayout = function (type) {\n        if (this.parent.isServerRenderer()) {\n            this.colLevels = this.generateColumnLevels();\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.activeView.isTimelineView()) {\n                this.parent.resourceBase.setRenderedResources();\n            }\n            return;\n        }\n        this.setPanel(createElement('div', { className: cls.TABLE_WRAP_CLASS }));\n        var clsList = [this.baseCssClass, this.viewClass];\n        clsList.push(type);\n        if (this.parent.activeViewOptions.group.byDate) {\n            clsList.push('e-by-date');\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            addClass([this.element], [cls.TIMESCALE_DISABLE, this.viewClass]);\n        }\n        if (this.parent.activeViewOptions.allowVirtualScrolling) {\n            clsList.push(cls.VIRTUAL_SCROLL_CLASS);\n        }\n        this.renderPanel(type);\n        addClass([this.element], clsList);\n        this.element.appendChild(this.createTableLayout(cls.OUTER_TABLE_CLASS));\n        this.element.querySelector('table').setAttribute('role', 'presentation');\n        this.colLevels = this.generateColumnLevels();\n        this.renderHeader();\n        this.renderContent();\n        if (this.parent.uiStateValues.isGroupAdaptive && !this.parent.element.querySelector('.' + cls.RESOURCE_TOOLBAR_CONTAINER)) {\n            this.renderResourceMobileLayout();\n        }\n        this.parent.notify(event.contentReady, {});\n        this.parent.updateLayoutTemplates();\n    };\n    VerticalView.prototype.renderHeader = function () {\n        var tr = createElement('tr');\n        var dateTd = createElement('td');\n        dateTd.appendChild(this.renderDatesHeader());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            var indentTd = createElement('td', { className: cls.LEFT_INDENT_CLASS });\n            indentTd.appendChild(this.renderLeftIndent());\n            tr.appendChild(indentTd);\n        }\n        tr.appendChild(dateTd);\n        prepend([tr], this.element.querySelector('tbody'));\n    };\n    VerticalView.prototype.renderContent = function () {\n        var tr = createElement('tr');\n        var workTd = createElement('td');\n        if (this.parent.isAdaptive) {\n            workTd.setAttribute('colspan', (this.parent.activeViewOptions.timeScale.enable ? '2' : '1'));\n            var scrollContainer = createElement('div', { className: cls.SCROLL_CONTAINER_CLASS });\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                scrollContainer.appendChild(this.renderTimeCells());\n            }\n            scrollContainer.appendChild(this.renderContentArea());\n            workTd.appendChild(scrollContainer);\n            EventHandler.add(scrollContainer, 'scroll', this.onApaptiveScroll, this);\n            EventHandler.add(scrollContainer, Browser.touchMoveEvent, this.onApaptiveMove, this);\n            tr.appendChild(workTd);\n        }\n        else {\n            workTd.appendChild(this.renderContentArea());\n            if (this.parent.activeViewOptions.timeScale.enable) {\n                var timesTd = createElement('td');\n                timesTd.appendChild(this.renderTimeCells());\n                tr.appendChild(timesTd);\n            }\n            tr.appendChild(workTd);\n        }\n        this.element.querySelector('tbody').appendChild(tr);\n    };\n    VerticalView.prototype.renderLeftIndent = function () {\n        var wrap = createElement('div', { className: cls.LEFT_INDENT_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        for (var i = 0; i < rowCount; i++) {\n            var ntr_1 = trEle.cloneNode();\n            var data_1 = { className: [(this.colLevels[i][0] && this.colLevels[i][0].className[0])], type: 'emptyCells' };\n            if (this.parent.activeViewOptions.showWeekNumber && data_1.className.indexOf(cls.HEADER_CELLS_CLASS) !== -1) {\n                data_1.className.push(cls.WEEK_NUMBER_CLASS);\n                var weekNumberDate = util.getWeekLastDate(this.renderDates.slice(-1)[0], this.parent.firstDayOfWeek);\n                var weekNo = this.parent.currentView === 'Day' ? util.getWeekNumber(weekNumberDate) :\n                    util.getWeekNumber(this.renderDates.slice(-1)[0]);\n                data_1.template = [createElement('span', {\n                        innerHTML: '' + weekNo,\n                        attrs: { title: this.parent.localeObj.getConstant('week') + ' ' + weekNo }\n                    })];\n            }\n            ntr_1.appendChild(this.createTd(data_1));\n            tbl.querySelector('tbody').appendChild(ntr_1);\n        }\n        var ntr = trEle.cloneNode();\n        var appointmentExpandCollapse = createElement('div', {\n            attrs: {\n                'tabindex': '0', 'role': 'list',\n                title: 'Expand-all-day-section', 'aria-disabled': 'false', 'aria-label': 'Expand section'\n            },\n            className: cls.ALLDAY_APPOINTMENT_SECTION_CLASS + ' ' + cls.APPOINTMENT_ROW_EXPAND_CLASS + ' ' +\n                cls.ICON + ' ' + cls.DISABLE_CLASS,\n        });\n        var data = { className: [cls.ALLDAY_CELLS_CLASS], type: 'emptyCells' };\n        var nth = this.createTd(data);\n        nth.appendChild(appointmentExpandCollapse);\n        ntr.appendChild(nth);\n        tbl.querySelector('tbody').appendChild(ntr);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderDatesHeader = function () {\n        var container = createElement('div', { className: cls.DATE_HEADER_CONTAINER_CLASS });\n        var wrap = createElement('div', { className: cls.DATE_HEADER_WRAP_CLASS });\n        container.appendChild(wrap);\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var rowCount = this.colLevels.length;\n        var lastLevel = this.colLevels[rowCount - 1];\n        this.createColGroup(tbl, lastLevel);\n        for (var i = 0; i < rowCount; i++) {\n            var ntr = trEle.cloneNode();\n            addClass([ntr], cls.HEADER_ROW_CLASS);\n            var level = this.colLevels[i];\n            for (var j = 0; j < level.length; j++) {\n                ntr.appendChild(this.createTd(level[j]));\n            }\n            tbl.querySelector('tbody').appendChild(ntr);\n        }\n        this.createAllDayRow(tbl, lastLevel);\n        wrap.appendChild(tbl);\n        return container;\n    };\n    VerticalView.prototype.createAllDayRow = function (table, tdData) {\n        var ntr = createElement('tr');\n        addClass([ntr], cls.ALLDAY_ROW_CLASS);\n        for (var j = 0; j < tdData.length; j++) {\n            var td = extend({}, tdData[j]);\n            td.className = [cls.ALLDAY_CELLS_CLASS];\n            td.type = 'alldayCells';\n            var ntd = this.createTd(td);\n            ntd.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                ntd.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireCellEvents(ntd);\n            ntr.appendChild(ntd);\n        }\n        table.querySelector('tbody').appendChild(ntr);\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper('allDay'));\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createTd = function (td) {\n        var tdEle = createElement('td');\n        this.addAttributes(td, tdEle);\n        if (td.date && td.type) {\n            var ele = this.getTdContent(td.date, td.type, td.groupIndex);\n            if (ele && ele.length) {\n                append(ele, tdEle);\n            }\n        }\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + td.date)))) {\n            addClass([tdEle], cls.DISABLE_DATES);\n        }\n        if (td.type === 'resourceHeader') {\n            this.setResourceHeaderContent(tdEle, td);\n        }\n        if (td.type === 'dateHeader' && td.className.indexOf(cls.HEADER_CELLS_CLASS) >= 0) {\n            tdEle.setAttribute('data-date', td.date.getTime().toString());\n            if (!isNullOrUndefined(td.groupIndex)) {\n                tdEle.setAttribute('data-group-index', '' + td.groupIndex);\n            }\n            this.wireMouseEvents(tdEle);\n        }\n        var args = { elementType: td.type, element: tdEle, date: td.date, groupIndex: td.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return tdEle;\n    };\n    VerticalView.prototype.wireCellEvents = function (element) {\n        EventHandler.add(element, 'mousedown', this.parent.workCellAction.cellMouseDown, this.parent.workCellAction);\n        this.wireMouseEvents(element);\n    };\n    VerticalView.prototype.wireMouseEvents = function (element) {\n        EventHandler.add(element, 'click', this.parent.workCellAction.cellClick, this.parent.workCellAction);\n        if (!this.parent.isAdaptive) {\n            EventHandler.add(element, 'dblclick', this.parent.workCellAction.cellDblClick, this.parent.workCellAction);\n        }\n    };\n    VerticalView.prototype.renderTimeCells = function () {\n        var _this = this;\n        var wrap = createElement('div', { className: cls.TIME_CELLS_WRAP_CLASS });\n        var tbl = this.createTableLayout();\n        var trEle = createElement('tr');\n        var handler = function (r) {\n            r.type = r.first ? 'majorSlot' : 'minorSlot';\n            r.className = r.last ? [cls.TIME_CELLS_CLASS, cls.TIME_SLOT_CLASS] : [cls.TIME_SLOT_CLASS];\n            var ntr = trEle.cloneNode();\n            var data = { date: r.date, type: r.type, className: r.className };\n            ntr.appendChild(_this.createTd(data));\n            tbl.querySelector('tbody').appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        wrap.appendChild(tbl);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentArea = function () {\n        var wrap = createElement('div', { className: cls.CONTENT_WRAP_CLASS });\n        var tbl = this.createTableLayout(cls.CONTENT_TABLE_CLASS);\n        this.addAutoHeightClass(tbl);\n        this.addIgnoreWhitespaceClass(tbl);\n        this.createColGroup(tbl, this.colLevels.slice(-1)[0]);\n        this.renderContentTable(tbl);\n        wrap.appendChild(tbl);\n        this.wireCellEvents(tbl.querySelector('tbody'));\n        EventHandler.add(wrap, 'scroll', this.onContentScroll, this);\n        EventHandler.add(wrap, Browser.touchMoveEvent, this.onApaptiveMove, this);\n        return wrap;\n    };\n    VerticalView.prototype.renderContentTable = function (table) {\n        var _this = this;\n        var tr = createElement('tr', { attrs: { role: 'row' } });\n        var td = createElement('td', { attrs: { role: 'gridcell', 'aria-selected': 'false' } });\n        var tbody = table.querySelector('tbody');\n        var handler = function (r) {\n            var ntr = tr.cloneNode();\n            for (var _i = 0, _a = _this.colLevels[_this.colLevels.length - 1]; _i < _a.length; _i++) {\n                var tdData = _a[_i];\n                var ntd = _this.createContentTd(tdData, r, td);\n                ntr.appendChild(ntd);\n            }\n            tbody.appendChild(ntr);\n            return r;\n        };\n        this.getTimeSlotRows(handler);\n        this.renderContentTableHeader(table);\n    };\n    VerticalView.prototype.createContentTd = function (tdData, r, td) {\n        var ntd = td.cloneNode();\n        if (tdData.colSpan) {\n            ntd.setAttribute('colspan', tdData.colSpan.toString());\n        }\n        var clsName = this.getContentTdClass(r);\n        if (!this.parent.isMinMaxDate(util.resetTime(new Date('' + tdData.date)))) {\n            clsName.push(cls.DISABLE_DATES);\n        }\n        var cellDate = util.resetTime(new Date('' + tdData.date));\n        util.setTime(cellDate, util.getDateInMs(r.date));\n        var type = 'workCells';\n        if (tdData.className.indexOf(cls.RESOURCE_PARENT_CLASS) !== -1) {\n            clsName.push(cls.RESOURCE_GROUP_CELLS_CLASS);\n            type = 'resourceGroupCells';\n        }\n        if (this.parent.workHours.highlight && ((this.parent.activeViewOptions.timeScale.enable &&\n            this.isWorkHour(cellDate, tdData.startHour, tdData.endHour, tdData.workDays)) ||\n            (!this.parent.activeViewOptions.timeScale.enable && this.isWorkDay(cellDate, tdData.workDays)))) {\n            clsName.push(cls.WORK_HOURS_CLASS);\n        }\n        addClass([ntd], clsName);\n        if (this.parent.activeViewOptions.cellTemplate) {\n            var dateValue = util.addLocalOffset(cellDate);\n            var args_1 = { date: dateValue, type: type, groupIndex: tdData.groupIndex };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.cellTemplateName;\n            var templateId = scheduleId + viewName + 'cellTemplate';\n            var tooltipTemplate = [].slice.call(this.parent.getCellTemplate()(args_1, this.parent, 'cellTemplate', templateId, false));\n            append(tooltipTemplate, ntd);\n        }\n        ntd.setAttribute('data-date', cellDate.getTime().toString());\n        if (!isNullOrUndefined(tdData.groupIndex) || this.parent.uiStateValues.isGroupAdaptive) {\n            var groupIndex = this.parent.uiStateValues.isGroupAdaptive ? this.parent.uiStateValues.groupIndex :\n                tdData.groupIndex;\n            ntd.setAttribute('data-group-index', '' + groupIndex);\n        }\n        var args = { elementType: type, element: ntd, date: cellDate, groupIndex: tdData.groupIndex };\n        this.parent.trigger(event.renderCell, args);\n        return ntd;\n    };\n    VerticalView.prototype.getContentTdClass = function (r) {\n        return r.last ? [cls.WORK_CELLS_CLASS] : [cls.WORK_CELLS_CLASS, cls.ALTERNATE_CELLS_CLASS];\n    };\n    VerticalView.prototype.renderContentTableHeader = function (table) {\n        var thead = createElement('thead');\n        thead.appendChild(this.createEventWrapper());\n        if (this.parent.activeViewOptions.timeScale.enable) {\n            thead.appendChild(this.createEventWrapper('timeIndicator'));\n        }\n        prepend([thead], table);\n    };\n    VerticalView.prototype.createEventWrapper = function (type) {\n        if (type === void 0) { type = ''; }\n        var tr = createElement('tr');\n        this.colLevels.slice(-1)[0].forEach(function (col, day) {\n            var appointmentWrap = createElement('td', {\n                className: (type === 'allDay') ? cls.ALLDAY_APPOINTMENT_WRAPPER_CLASS : (type === 'timeIndicator') ?\n                    cls.TIMELINE_WRAPPER_CLASS : cls.DAY_WRAPPER_CLASS, attrs: { 'data-date': col.date.getTime().toString() }\n            });\n            if (!isNullOrUndefined(col.groupIndex)) {\n                appointmentWrap.setAttribute('data-group-index', col.groupIndex.toString());\n            }\n            if (type === '') {\n                var innerWrapper = createElement('div', {\n                    id: cls.APPOINTMENT_WRAPPER_CLASS + '-' + day.toString(),\n                    className: cls.APPOINTMENT_WRAPPER_CLASS\n                });\n                appointmentWrap.appendChild(innerWrapper);\n            }\n            tr.appendChild(appointmentWrap);\n        });\n        return tr;\n    };\n    VerticalView.prototype.getScrollableElement = function () {\n        if (this.parent.isAdaptive && !this.isTimelineView() && !this.parent.isServerRenderer()) {\n            return this.element.querySelector('.' + cls.SCROLL_CONTAINER_CLASS);\n        }\n        else {\n            return this.getContentAreaElement();\n        }\n    };\n    VerticalView.prototype.getLeftPanelElement = function () {\n        return this.element.querySelector('.' + cls.TIME_CELLS_WRAP_CLASS);\n    };\n    VerticalView.prototype.getEndDateFromStartDate = function (start) {\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var end = new Date(start.getTime());\n        end.setMilliseconds(end.getMilliseconds() + msInterval);\n        return end;\n    };\n    VerticalView.prototype.getTimeSlotRows = function (handler) {\n        var rows = [];\n        var startHour = this.getStartHour();\n        var endHour = this.getEndHour();\n        var msMajorInterval = this.parent.activeViewOptions.timeScale.interval * util.MS_PER_MINUTE;\n        var msInterval = msMajorInterval / this.parent.activeViewOptions.timeScale.slotCount;\n        var length = Math.round(util.MS_PER_DAY / msInterval);\n        var msStartHour = startHour.getTime();\n        var msEndHour = endHour.getTime();\n        if (msStartHour !== msEndHour) {\n            length = (Math.abs(msEndHour - msStartHour) / msInterval) - ((new Date(msEndHour).getTimezoneOffset()\n                - new Date(msStartHour).getTimezoneOffset()) / (60 / this.parent.activeViewOptions.timeScale.slotCount));\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable) {\n            length = 1;\n        }\n        var start = this.parent.getStartEndTime(this.parent.workHours.start);\n        var end = this.parent.getStartEndTime(this.parent.workHours.end);\n        for (var i = 0; i < length; i++) {\n            var dt = new Date(msStartHour + (msInterval * i));\n            if (util.isDaylightSavingTime(dt) || new Date(msStartHour).getTimezoneOffset() !== dt.getTimezoneOffset()) {\n                var timeOffset = new Date(msStartHour).getTimezoneOffset() - dt.getTimezoneOffset();\n                dt = new Date(dt.getTime() - (1000 * 60 * timeOffset));\n            }\n            var majorTickDivider = i % (msMajorInterval / msInterval);\n            var row = {\n                date: new Date('' + dt),\n                startHour: start,\n                endHour: end,\n                first: (majorTickDivider === 0),\n                middle: (majorTickDivider < this.parent.activeViewOptions.timeScale.slotCount - 1),\n                last: (majorTickDivider === this.parent.activeViewOptions.timeScale.slotCount - 1),\n                type: ''\n            };\n            if (handler) {\n                handler(row);\n            }\n            rows.push(row);\n        }\n        return rows;\n    };\n    /**\n     * Get module name.\n     */\n    VerticalView.prototype.getModuleName = function () {\n        return 'verticalView';\n    };\n    /**\n     * To destroy the vertical view.\n     * @return {void}\n     * @private\n     */\n    VerticalView.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.clearCurrentTimeIndicatorTimer();\n        if (this.element) {\n            var contentScrollableEle = this.getContentAreaElement();\n            if (contentScrollableEle) {\n                EventHandler.remove(contentScrollableEle, 'scroll', this.onContentScroll);\n            }\n            if (this.parent.resourceBase) {\n                this.parent.resourceBase.destroy();\n            }\n            if (isBlazor()) {\n                var view = this.parent.viewCollections[this.viewIndex].option;\n                if (this.parent.isServerRenderer(view)) {\n                    if (this.parent.currentView === 'Agenda' || this.parent.currentView === 'TimelineYear') {\n                        this.element.style.display = 'none';\n                    }\n                    this.parent.resetEventTemplates();\n                }\n                else {\n                    this.parent.resetLayoutTemplates();\n                    this.parent.resetEventTemplates();\n                    remove(this.element);\n                }\n            }\n            else {\n                remove(this.element);\n            }\n            this.element = null;\n            if (this.parent.scheduleTouchModule) {\n                this.parent.scheduleTouchModule.resetValues();\n            }\n        }\n    };\n    return VerticalView;\n}(ViewBase));\nexport { VerticalView };\n"]},"metadata":{},"sourceType":"module"}