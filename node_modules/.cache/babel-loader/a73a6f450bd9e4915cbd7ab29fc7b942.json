{"ast":null,"code":"import { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass, isBlazor } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\n\nvar ActionBase =\n/** @class */\nfunction () {\n  function ActionBase(parent) {\n    this.daysVariation = 0;\n    this.parent = parent;\n    this.actionObj = {\n      X: 0,\n      Y: 0,\n      groupIndex: 0,\n      cellWidth: 0,\n      cellHeight: 0,\n      slotInterval: 0,\n      interval: 0,\n      actionIndex: 0,\n      cloneElement: [],\n      originalElement: [],\n      action: null,\n      isAllDay: null,\n      excludeSelectors: null,\n      index: 0,\n      navigationInterval: null,\n      scrollInterval: null\n    };\n    this.scrollArgs = {\n      element: null,\n      width: 0,\n      height: 0\n    };\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  }\n\n  ActionBase.prototype.getChangedData = function () {\n    var eventObj = extend({}, this.actionObj.event, null, true);\n    eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n    eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n\n    if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n      eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n    }\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var originalElement = this.getOriginalElement(this.actionObj.element);\n      var indexCol = originalElement.map(function (element) {\n        return parseInt(element.getAttribute('data-group-index'), 10);\n      });\n\n      if (indexCol.indexOf(this.actionObj.groupIndex) === -1) {\n        var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n        indexCol = indexCol.filter(function (index) {\n          return index !== cloneIndex_1;\n        });\n        indexCol.push(this.actionObj.groupIndex);\n        this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n      }\n    }\n\n    return eventObj;\n  };\n\n  ActionBase.prototype.saveChangedData = function (eventArgs) {\n    this.parent.activeEventData.event = this.actionObj.event;\n    this.parent.currentAction = 'Save';\n\n    if (isBlazor()) {\n      eventArgs.data[this.parent.eventFields.startTime] = this.parent.getDateTime(eventArgs.data[this.parent.eventFields.startTime]);\n      eventArgs.data[this.parent.eventFields.endTime] = this.parent.getDateTime(eventArgs.data[this.parent.eventFields.endTime]);\n    }\n\n    var eventObj = eventArgs.data;\n    var isSameResource = this.parent.activeViewOptions.group.resources.length > 0 ? parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n\n    if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] && +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n      return;\n    }\n\n    var currentAction;\n\n    if (eventObj[this.parent.eventFields.recurrenceRule]) {\n      var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n\n      if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n        eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n        currentAction = 'EditOccurrence';\n      }\n\n      if (this.parent.enableRecurrenceValidation && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n        this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n        return;\n      }\n    }\n\n    if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n      this.parent.eventBase.timezoneConvert(eventObj);\n    }\n\n    this.parent.crudModule.saveEvent(eventObj, currentAction);\n  };\n\n  ActionBase.prototype.calculateIntervalTime = function (date) {\n    var intervalTime = new Date(+date);\n    intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n    return intervalTime;\n  };\n\n  ActionBase.prototype.getContentAreaDimension = function () {\n    var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var trElement = [].slice.call(viewElement.querySelector('tr').children);\n\n    if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.isAdaptive) {\n      trElement = this.getResourceElements(trElement);\n    }\n\n    var leftOffset = trElement[0].getBoundingClientRect();\n    var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n    var viewDimension = {\n      bottom: viewElement.scrollHeight - 5,\n      left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n      right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n      top: 0\n    };\n    return viewDimension;\n  };\n\n  ActionBase.prototype.getPageCoordinates = function (e) {\n    var eventArgs = e.event;\n    return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] : eventArgs || e;\n  };\n\n  ActionBase.prototype.getIndex = function (index) {\n    var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n    var indexes = {\n      minIndex: 0,\n      maxIndex: contentElements.length - 1\n    };\n\n    if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n      var groupElements = this.getResourceElements(contentElements);\n      indexes.minIndex = groupElements[0].cellIndex;\n      indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n    }\n\n    if (index < indexes.minIndex) {\n      index = indexes.minIndex;\n    }\n\n    if (index > indexes.maxIndex) {\n      index = indexes.maxIndex;\n    }\n\n    return index;\n  };\n\n  ActionBase.prototype.updateTimePosition = function (date) {\n    for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n      var cloneElement = _a[_i];\n      var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n\n      if (timeElement) {\n        timeElement.innerHTML = this.parent.getTimeString(this.actionObj.start) + ' - ' + this.parent.getTimeString(this.actionObj.end);\n      }\n    }\n\n    if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      return;\n    }\n\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n\n    if (!timeIndicator) {\n      timeIndicator = createElement('div', {\n        className: cls.CLONE_TIME_INDICATOR_CLASS\n      });\n      var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n      this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n    }\n\n    timeIndicator.innerHTML = this.parent.getTimeString(date);\n    var offsetValue = 0;\n\n    if (this.parent.activeView.isTimelineView()) {\n      if (this.parent.enableRtl) {\n        var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? rightValue + this.actionObj.clone.offsetWidth : rightValue;\n        timeIndicator.style.right = formatUnit(offsetValue);\n      } else {\n        var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n        offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ? leftValue : leftValue + this.actionObj.clone.offsetWidth;\n        timeIndicator.style.left = formatUnit(offsetValue);\n      }\n    } else {\n      offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop : this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n      timeIndicator.style.top = formatUnit(offsetValue);\n    }\n  };\n\n  ActionBase.prototype.getResourceElements = function (table) {\n    var _this = this;\n\n    return table.filter(function (element) {\n      return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n    });\n  };\n\n  ActionBase.prototype.getOriginalElement = function (element) {\n    var originalElement;\n    var guid = element.getAttribute('data-guid');\n    var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n\n    if (isMorePopup || this.parent.activeView.isTimelineView()) {\n      originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    } else {\n      var tr = closest(element, 'tr');\n      originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n    }\n\n    return originalElement;\n  };\n\n  ActionBase.prototype.createCloneElement = function (element) {\n    var cloneWrapper = createElement('div', {\n      innerHTML: element.outerHTML\n    });\n    var cloneElement = cloneWrapper.children[0];\n    var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n    cloneClassLists.push(this.actionObj.action === 'drag' ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n\n    if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n      cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n    }\n\n    addClass([cloneElement], cloneClassLists);\n    addClass([element], cls.EVENT_ACTION_CLASS);\n\n    if (!isNullOrUndefined(element.parentElement)) {\n      element.parentElement.appendChild(cloneElement);\n    }\n\n    cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n\n    if (this.parent.eventDragArea && this.actionObj.action === 'drag') {\n      document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n    }\n\n    setStyleAttribute(cloneElement, {\n      border: '0px'\n    });\n    return cloneElement;\n  };\n\n  ActionBase.prototype.removeCloneElementClasses = function () {\n    var elements = this.actionObj.originalElement;\n\n    if (this.parent.currentView === 'Month') {\n      elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n    }\n\n    elements.forEach(function (element) {\n      return removeClass([element], cls.EVENT_ACTION_CLASS);\n    });\n  };\n\n  ActionBase.prototype.removeCloneElement = function () {\n    this.actionObj.originalElement = [];\n    this.actionObj.cloneElement.forEach(function (element) {\n      if (!isNullOrUndefined(element.parentNode)) {\n        remove(element);\n      }\n    });\n    this.actionObj.cloneElement = [];\n    var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n\n    if (timeIndicator) {\n      remove(timeIndicator);\n    }\n  };\n\n  ActionBase.prototype.getCursorElement = function (e) {\n    var pages = this.getPageCoordinates(e);\n    return document.elementFromPoint(pages.clientX, pages.clientY);\n  };\n\n  ActionBase.prototype.autoScroll = function () {\n    var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n    var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n    var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n    var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n\n    if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n      parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n          this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n\n    if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n      parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n\n      if (this.actionObj.action === 'resize') {\n        if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n          this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n        }\n      }\n    }\n  };\n\n  ActionBase.prototype.autoScrollValidation = function (e) {\n    if (!this.actionObj.scroll.enable) {\n      return false;\n    }\n\n    var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n    this.scrollEdges = res;\n    return res.bottom || res.top || res.left || res.right;\n  };\n\n  ActionBase.prototype.actionClass = function (type) {\n    if (type === 'addClass') {\n      addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    } else {\n      removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n    }\n  };\n\n  ActionBase.prototype.updateScrollPosition = function (e) {\n    var _this = this;\n\n    if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n      this.actionObj.scrollInterval = window.setInterval(function () {\n        if (_this.autoScrollValidation(e) && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n          if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0 && _this.actionObj.groupIndex === 0) {\n            return;\n          }\n\n          _this.autoScroll();\n\n          if (_this.actionObj.action === 'drag') {\n            _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n          } else {\n            _this.parent.resizeModule.updateResizingDirection(e);\n          }\n        }\n      }, this.actionObj.scroll.timeDelay);\n    }\n  };\n\n  ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n    var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n    }\n\n    var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n    elements.forEach(function (element) {\n      return addClass([element], cls.EVENT_ACTION_CLASS);\n    });\n    var appWrap = [].slice.call(this.parent.element.querySelectorAll('.e-schedule-event-clone'));\n    appWrap.forEach(function (element) {\n      return removeClass([element], cls.EVENT_ACTION_CLASS);\n    });\n  };\n\n  ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n    var event = JSON.parse(JSON.stringify(eventObj));\n    event[this.parent.eventFields.startTime] = startTime;\n    event[this.parent.eventFields.endTime] = endTime;\n    return event;\n  };\n\n  ActionBase.prototype.dynamicEventsRendering = function (event) {\n    var _this = this;\n\n    var dateRender = this.parent.activeView.renderDates;\n    var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n    var workDays = this.parent.activeViewOptions.workDays;\n    var groupOrder;\n\n    if (this.parent.activeViewOptions.group.resources.length > 0) {\n      var resources = this.parent.resourceBase.lastResourceLevel.filter(function (res) {\n        return res.groupIndex === _this.actionObj.groupIndex;\n      });\n      dateRender = resources[0].renderDates;\n      workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]'));\n      workDays = resources[0].workDays;\n      groupOrder = resources[0].groupOrder;\n    }\n\n    this.monthEvent.dateRender = dateRender;\n    this.monthEvent.getSlotDates(workDays);\n    var appWrap = [].slice.call(this.parent.element.querySelectorAll('.e-schedule-event-clone'));\n\n    if (appWrap.length > 0) {\n      appWrap.forEach(function (element) {\n        return remove(element);\n      });\n    }\n\n    var splittedEvents = this.monthEvent.splitEvent(event, dateRender);\n\n    for (var _i = 0, splittedEvents_1 = splittedEvents; _i < splittedEvents_1.length; _i++) {\n      var event_1 = splittedEvents_1[_i];\n      var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n      var diffInDays = event_1.data.count;\n      var appWidth = diffInDays * this.actionObj.cellWidth - 7;\n      var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n      appointmentElement.setAttribute('drag', 'true');\n      addClass([appointmentElement], 'e-schedule-event-clone');\n      this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n      setStyleAttribute(appointmentElement, {\n        'width': appWidth + 'px',\n        'border': '0px',\n        'pointer-events': 'none'\n      });\n      var cellTd = workCells[day];\n      this.monthEvent.renderElement(cellTd, appointmentElement, true);\n      this.actionObj.cloneElement.push(appointmentElement);\n    }\n  };\n  /**\n   * To destroy the action base module.\n   * @return {void}\n   * @private\n   */\n\n\n  ActionBase.prototype.destroy = function () {\n    if (this.parent.isDestroyed) {\n      return;\n    }\n\n    this.actionObj = {};\n    this.scrollArgs = {};\n    this.resizeEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n    this.scrollEdges = {\n      left: false,\n      right: false,\n      top: false,\n      bottom: false\n    };\n  };\n\n  return ActionBase;\n}();\n\nexport { ActionBase };","map":{"version":3,"sources":["D:/developing/projects/whiteboard/node_modules/@syncfusion/ej2-schedule/src/schedule/actions/action-base.js"],"names":["addClass","createElement","extend","isNullOrUndefined","closest","setStyleAttribute","formatUnit","remove","removeClass","isBlazor","cls","util","ActionBase","parent","daysVariation","actionObj","X","Y","groupIndex","cellWidth","cellHeight","slotInterval","interval","actionIndex","cloneElement","originalElement","action","isAllDay","excludeSelectors","index","navigationInterval","scrollInterval","scrollArgs","element","width","height","resizeEdges","left","right","top","bottom","scrollEdges","prototype","getChangedData","eventObj","event","eventFields","startTime","start","endTime","end","activeViewOptions","group","resources","length","getOriginalElement","indexCol","map","parseInt","getAttribute","indexOf","cloneIndex_1","clone","filter","push","resourceBase","getResourceData","saveChangedData","eventArgs","activeEventData","currentAction","data","getDateTime","isSameResource","recurrenceRule","eveId","recurrenceID","id","eventBase","getEventMaxID","enableRecurrenceValidation","eventWindow","editOccurrenceValidation","quickPopup","openRecurrenceValidationAlert","startTimezone","endTimezone","timezoneConvert","crudModule","saveEvent","calculateIntervalTime","date","intervalTime","Date","setMinutes","Math","floor","getMinutes","getContentAreaDimension","viewElement","querySelector","CONTENT_WRAP_CLASS","trElement","slice","call","children","activeView","isTimelineView","isAdaptive","getResourceElements","leftOffset","getBoundingClientRect","rightOffset","viewDimension","scrollHeight","enableRtl","getPageCoordinates","e","changedTouches","getIndex","contentElements","getContentTable","indexes","minIndex","maxIndex","uiStateValues","isGroupAdaptive","groupElements","cellIndex","updateTimePosition","_i","_a","timeElement","APPOINTMENT_TIME","innerHTML","getTimeString","timeScale","enable","currentView","timeIndicator","CLONE_TIME_INDICATOR_CLASS","className","wrapperClass","DATE_HEADER_WRAP_CLASS","TIME_CELLS_WRAP_CLASS","appendChild","offsetValue","rightValue","style","offsetWidth","leftValue","offsetTop","offsetHeight","table","_this","guid","isMorePopup","offsetParent","classList","contains","MORE_EVENT_POPUP_CLASS","querySelectorAll","tr","createCloneElement","cloneWrapper","outerHTML","cloneClassLists","CLONE_ELEMENT_CLASS","DRAG_CLONE_CLASS","RESIZE_CLONE_CLASS","MONTH_CLONE_ELEMENT_CLASS","EVENT_ACTION_CLASS","parentElement","eventDragArea","document","border","removeCloneElementClasses","elements","forEach","removeCloneElement","parentNode","getCursorElement","pages","elementFromPoint","clientX","clientY","autoScroll","yIsScrollable","xIsScrollable","scrollWidth","yInBounds","scrollTop","xInBounds","scrollLeft","scroll","scrollBy","autoScrollValidation","res","boundaryValidation","pageY","pageX","actionClass","type","updateScrollPosition","window","setInterval","ALLDAY_APPOINTMENT_CLASS","dragAndDropModule","updateDraggingDateTime","resizeModule","updateResizingDirection","timeDelay","updateOriginalElement","query","concat","appWrap","getUpdatedEvent","JSON","parse","stringify","dynamicEventsRendering","dateRender","renderDates","workCells","WORK_CELLS_CLASS","workDays","groupOrder","lastResourceLevel","monthEvent","getSlotDates","splittedEvents","splitEvent","splittedEvents_1","event_1","day","getIndexOfDate","resetTime","fields","diffInDays","count","appWidth","appointmentElement","createAppointmentElement","setAttribute","applyResourceColor","cellTd","renderElement","destroy","isDestroyed"],"mappings":"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","sourcesContent":["import { addClass, createElement, extend, isNullOrUndefined, closest, setStyleAttribute } from '@syncfusion/ej2-base';\nimport { formatUnit, remove, removeClass, isBlazor } from '@syncfusion/ej2-base';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * Base class for the common drag and resize related actions\n */\nvar ActionBase = /** @class */ (function () {\n    function ActionBase(parent) {\n        this.daysVariation = 0;\n        this.parent = parent;\n        this.actionObj = {\n            X: 0, Y: 0, groupIndex: 0, cellWidth: 0, cellHeight: 0, slotInterval: 0, interval: 0, actionIndex: 0,\n            cloneElement: [], originalElement: [], action: null, isAllDay: null, excludeSelectors: null,\n            index: 0, navigationInterval: null, scrollInterval: null\n        };\n        this.scrollArgs = { element: null, width: 0, height: 0 };\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    }\n    ActionBase.prototype.getChangedData = function () {\n        var eventObj = extend({}, this.actionObj.event, null, true);\n        eventObj[this.parent.eventFields.startTime] = this.actionObj.start;\n        eventObj[this.parent.eventFields.endTime] = this.actionObj.end;\n        if (!isNullOrUndefined(this.actionObj.isAllDay)) {\n            eventObj[this.parent.eventFields.isAllDay] = this.actionObj.isAllDay;\n        }\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var originalElement = this.getOriginalElement(this.actionObj.element);\n            var indexCol = originalElement.map(function (element) { return parseInt(element.getAttribute('data-group-index'), 10); });\n            if (indexCol.indexOf(this.actionObj.groupIndex) === -1) {\n                var cloneIndex_1 = parseInt(this.actionObj.clone.getAttribute('data-group-index'), 10);\n                indexCol = indexCol.filter(function (index) { return index !== cloneIndex_1; });\n                indexCol.push(this.actionObj.groupIndex);\n                this.parent.resourceBase.getResourceData(eventObj, this.actionObj.groupIndex, indexCol);\n            }\n        }\n        return eventObj;\n    };\n    ActionBase.prototype.saveChangedData = function (eventArgs) {\n        this.parent.activeEventData.event = this.actionObj.event;\n        this.parent.currentAction = 'Save';\n        if (isBlazor()) {\n            eventArgs.data[this.parent.eventFields.startTime] = this.parent.getDateTime(eventArgs.data[this.parent.eventFields.startTime]);\n            eventArgs.data[this.parent.eventFields.endTime] = this.parent.getDateTime(eventArgs.data[this.parent.eventFields.endTime]);\n        }\n        var eventObj = eventArgs.data;\n        var isSameResource = (this.parent.activeViewOptions.group.resources.length > 0) ?\n            parseInt(this.actionObj.element.getAttribute('data-group-index'), 10) === this.actionObj.groupIndex : true;\n        if (+eventObj[this.parent.eventFields.startTime] === +this.actionObj.event[this.parent.eventFields.startTime] &&\n            +eventObj[this.parent.eventFields.endTime] === +this.actionObj.event[this.parent.eventFields.endTime] && isSameResource) {\n            return;\n        }\n        var currentAction;\n        if (eventObj[this.parent.eventFields.recurrenceRule]) {\n            var eveId = eventObj[this.parent.eventFields.recurrenceID] || eventObj[this.parent.eventFields.id];\n            if (eventObj[this.parent.eventFields.id] === eventObj[this.parent.eventFields.recurrenceID]) {\n                eventObj[this.parent.eventFields.id] = this.parent.eventBase.getEventMaxID();\n                currentAction = 'EditOccurrence';\n            }\n            if (this.parent.enableRecurrenceValidation\n                && this.parent.eventWindow.editOccurrenceValidation(eveId, eventObj, this.actionObj.event)) {\n                this.parent.quickPopup.openRecurrenceValidationAlert('sameDayAlert');\n                return;\n            }\n        }\n        if (eventObj[this.parent.eventFields.startTimezone] || eventObj[this.parent.eventFields.endTimezone]) {\n            this.parent.eventBase.timezoneConvert(eventObj);\n        }\n        this.parent.crudModule.saveEvent(eventObj, currentAction);\n    };\n    ActionBase.prototype.calculateIntervalTime = function (date) {\n        var intervalTime = new Date(+date);\n        intervalTime.setMinutes(Math.floor(intervalTime.getMinutes() / this.actionObj.interval) * this.actionObj.interval);\n        return intervalTime;\n    };\n    ActionBase.prototype.getContentAreaDimension = function () {\n        var viewElement = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var trElement = [].slice.call(viewElement.querySelector('tr').children);\n        if (!this.parent.activeView.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.isAdaptive) {\n            trElement = this.getResourceElements(trElement);\n        }\n        var leftOffset = trElement[0].getBoundingClientRect();\n        var rightOffset = trElement.slice(-1)[0].getBoundingClientRect();\n        var viewDimension = {\n            bottom: viewElement.scrollHeight - 5,\n            left: this.parent.enableRtl ? rightOffset.left : leftOffset.left,\n            right: this.parent.enableRtl ? leftOffset.right : rightOffset.right,\n            top: 0\n        };\n        return viewDimension;\n    };\n    ActionBase.prototype.getPageCoordinates = function (e) {\n        var eventArgs = e.event;\n        return eventArgs && eventArgs.changedTouches ? eventArgs.changedTouches[0] : e.changedTouches ? e.changedTouches[0] :\n            eventArgs || e;\n    };\n    ActionBase.prototype.getIndex = function (index) {\n        var contentElements = [].slice.call(this.parent.getContentTable().querySelector('tr').children);\n        var indexes = { minIndex: 0, maxIndex: contentElements.length - 1 };\n        if (this.actionObj.action === 'resize' && this.parent.activeViewOptions.group.resources.length > 0 &&\n            !this.parent.uiStateValues.isGroupAdaptive && !this.parent.activeView.isTimelineView()) {\n            var groupElements = this.getResourceElements(contentElements);\n            indexes.minIndex = groupElements[0].cellIndex;\n            indexes.maxIndex = groupElements.slice(-1)[0].cellIndex;\n        }\n        if (index < indexes.minIndex) {\n            index = indexes.minIndex;\n        }\n        if (index > indexes.maxIndex) {\n            index = indexes.maxIndex;\n        }\n        return index;\n    };\n    ActionBase.prototype.updateTimePosition = function (date) {\n        for (var _i = 0, _a = this.actionObj.cloneElement; _i < _a.length; _i++) {\n            var cloneElement = _a[_i];\n            var timeElement = cloneElement.querySelector('.' + cls.APPOINTMENT_TIME);\n            if (timeElement) {\n                timeElement.innerHTML = this.parent.getTimeString(this.actionObj.start) + ' - ' +\n                    this.parent.getTimeString(this.actionObj.end);\n            }\n        }\n        if (!this.parent.activeViewOptions.timeScale.enable || !this.parent.isAdaptive || this.parent.currentView === 'Month' ||\n            this.parent.currentView === 'TimelineMonth') {\n            return;\n        }\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (!timeIndicator) {\n            timeIndicator = createElement('div', { className: cls.CLONE_TIME_INDICATOR_CLASS });\n            var wrapperClass = this.parent.activeView.isTimelineView() ? cls.DATE_HEADER_WRAP_CLASS : cls.TIME_CELLS_WRAP_CLASS;\n            this.parent.element.querySelector('.' + wrapperClass).appendChild(timeIndicator);\n        }\n        timeIndicator.innerHTML = this.parent.getTimeString(date);\n        var offsetValue = 0;\n        if (this.parent.activeView.isTimelineView()) {\n            if (this.parent.enableRtl) {\n                var rightValue = parseInt(this.actionObj.clone.style.right, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    rightValue + this.actionObj.clone.offsetWidth : rightValue;\n                timeIndicator.style.right = formatUnit(offsetValue);\n            }\n            else {\n                var leftValue = parseInt(this.actionObj.clone.style.left, 10);\n                offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.left ?\n                    leftValue : leftValue + this.actionObj.clone.offsetWidth;\n                timeIndicator.style.left = formatUnit(offsetValue);\n            }\n        }\n        else {\n            offsetValue = this.actionObj.action === 'drag' || this.resizeEdges.top ? this.actionObj.clone.offsetTop :\n                this.actionObj.clone.offsetTop + this.actionObj.clone.offsetHeight;\n            timeIndicator.style.top = formatUnit(offsetValue);\n        }\n    };\n    ActionBase.prototype.getResourceElements = function (table) {\n        var _this = this;\n        return table.filter(function (element) {\n            return parseInt(element.getAttribute('data-group-index'), 10) === _this.actionObj.groupIndex;\n        });\n    };\n    ActionBase.prototype.getOriginalElement = function (element) {\n        var originalElement;\n        var guid = element.getAttribute('data-guid');\n        var isMorePopup = element.offsetParent && element.offsetParent.classList.contains(cls.MORE_EVENT_POPUP_CLASS);\n        if (isMorePopup || this.parent.activeView.isTimelineView()) {\n            originalElement = [].slice.call(this.parent.element.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        else {\n            var tr = closest(element, 'tr');\n            originalElement = [].slice.call(tr.querySelectorAll('[data-guid=\"' + guid + '\"]'));\n        }\n        return originalElement;\n    };\n    ActionBase.prototype.createCloneElement = function (element) {\n        var cloneWrapper = createElement('div', { innerHTML: element.outerHTML });\n        var cloneElement = cloneWrapper.children[0];\n        var cloneClassLists = [cls.CLONE_ELEMENT_CLASS];\n        cloneClassLists.push((this.actionObj.action === 'drag') ? cls.DRAG_CLONE_CLASS : cls.RESIZE_CLONE_CLASS);\n        if (this.parent.currentView === 'Month' || this.parent.currentView === 'TimelineMonth') {\n            cloneClassLists.push(cls.MONTH_CLONE_ELEMENT_CLASS);\n        }\n        addClass([cloneElement], cloneClassLists);\n        addClass([element], cls.EVENT_ACTION_CLASS);\n        if (!isNullOrUndefined(element.parentElement)) {\n            element.parentElement.appendChild(cloneElement);\n        }\n        cloneElement.style.width = formatUnit(cloneElement.offsetWidth - 2);\n        if (this.parent.eventDragArea && this.actionObj.action === 'drag') {\n            document.querySelector(this.parent.eventDragArea).appendChild(cloneElement);\n        }\n        setStyleAttribute(cloneElement, { border: '0px' });\n        return cloneElement;\n    };\n    ActionBase.prototype.removeCloneElementClasses = function () {\n        var elements = this.actionObj.originalElement;\n        if (this.parent.currentView === 'Month') {\n            elements = [].slice.call(this.parent.element.querySelectorAll('.' + cls.EVENT_ACTION_CLASS));\n        }\n        elements.forEach(function (element) { return removeClass([element], cls.EVENT_ACTION_CLASS); });\n    };\n    ActionBase.prototype.removeCloneElement = function () {\n        this.actionObj.originalElement = [];\n        this.actionObj.cloneElement.forEach(function (element) {\n            if (!isNullOrUndefined(element.parentNode)) {\n                remove(element);\n            }\n        });\n        this.actionObj.cloneElement = [];\n        var timeIndicator = this.parent.element.querySelector('.' + cls.CLONE_TIME_INDICATOR_CLASS);\n        if (timeIndicator) {\n            remove(timeIndicator);\n        }\n    };\n    ActionBase.prototype.getCursorElement = function (e) {\n        var pages = this.getPageCoordinates(e);\n        return document.elementFromPoint(pages.clientX, pages.clientY);\n    };\n    ActionBase.prototype.autoScroll = function () {\n        var parent = this.parent.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n        var yIsScrollable = parent.offsetHeight <= parent.scrollHeight;\n        var xIsScrollable = parent.offsetWidth <= parent.scrollWidth;\n        var yInBounds = yIsScrollable && parent.scrollTop >= 0 && parent.scrollTop + parent.offsetHeight <= parent.scrollHeight;\n        var xInBounds = xIsScrollable && parent.scrollLeft >= 0 && parent.scrollLeft + parent.offsetWidth <= parent.scrollWidth;\n        if (yInBounds && (this.scrollEdges.top || this.scrollEdges.bottom)) {\n            parent.scrollTop += this.scrollEdges.top ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollHeight !== parent.offsetHeight + parent.scrollTop && parent.scrollTop > 0) {\n                    this.actionObj.Y += this.scrollEdges.top ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n        if (xInBounds && (this.scrollEdges.left || this.scrollEdges.right)) {\n            parent.scrollLeft += this.scrollEdges.left ? -this.actionObj.scroll.scrollBy : this.actionObj.scroll.scrollBy;\n            if (this.actionObj.action === 'resize') {\n                if (parent.scrollWidth !== parent.offsetWidth + parent.scrollLeft && parent.scrollLeft > 0) {\n                    this.actionObj.X += this.scrollEdges.left ? this.actionObj.scroll.scrollBy : -this.actionObj.scroll.scrollBy;\n                }\n            }\n        }\n    };\n    ActionBase.prototype.autoScrollValidation = function (e) {\n        if (!this.actionObj.scroll.enable) {\n            return false;\n        }\n        var res = this.parent.boundaryValidation(this.actionObj.pageY, this.actionObj.pageX);\n        this.scrollEdges = res;\n        return res.bottom || res.top || res.left || res.right;\n    };\n    ActionBase.prototype.actionClass = function (type) {\n        if (type === 'addClass') {\n            addClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n        else {\n            removeClass([this.parent.element], cls.EVENT_ACTION_CLASS);\n        }\n    };\n    ActionBase.prototype.updateScrollPosition = function (e) {\n        var _this = this;\n        if (this.actionObj.scroll.enable && isNullOrUndefined(this.actionObj.scrollInterval)) {\n            this.actionObj.scrollInterval = window.setInterval(function () {\n                if (_this.autoScrollValidation(e) && !_this.actionObj.clone.classList.contains(cls.ALLDAY_APPOINTMENT_CLASS)) {\n                    if (_this.parent.activeView.isTimelineView() && _this.parent.activeViewOptions.group.resources.length > 0\n                        && _this.actionObj.groupIndex === 0) {\n                        return;\n                    }\n                    _this.autoScroll();\n                    if (_this.actionObj.action === 'drag') {\n                        _this.parent.dragAndDropModule.updateDraggingDateTime(e);\n                    }\n                    else {\n                        _this.parent.resizeModule.updateResizingDirection(e);\n                    }\n                }\n            }, this.actionObj.scroll.timeDelay);\n        }\n    };\n    ActionBase.prototype.updateOriginalElement = function (cloneElement) {\n        var query = '[data-id=\"' + cloneElement.getAttribute('data-id') + '\"]';\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            query = query.concat('[data-group-index = \"' + cloneElement.getAttribute('data-group-index') + '\"]');\n        }\n        var elements = [].slice.call(this.parent.element.querySelectorAll(query));\n        elements.forEach(function (element) { return addClass([element], cls.EVENT_ACTION_CLASS); });\n        var appWrap = [].slice.call(this.parent.element.querySelectorAll('.e-schedule-event-clone'));\n        appWrap.forEach(function (element) { return removeClass([element], cls.EVENT_ACTION_CLASS); });\n    };\n    ActionBase.prototype.getUpdatedEvent = function (startTime, endTime, eventObj) {\n        var event = JSON.parse(JSON.stringify(eventObj));\n        event[this.parent.eventFields.startTime] = startTime;\n        event[this.parent.eventFields.endTime] = endTime;\n        return event;\n    };\n    ActionBase.prototype.dynamicEventsRendering = function (event) {\n        var _this = this;\n        var dateRender = this.parent.activeView.renderDates;\n        var workCells = [].slice.call(this.parent.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS));\n        var workDays = this.parent.activeViewOptions.workDays;\n        var groupOrder;\n        if (this.parent.activeViewOptions.group.resources.length > 0) {\n            var resources = this.parent.resourceBase.lastResourceLevel.\n                filter(function (res) { return res.groupIndex === _this.actionObj.groupIndex; });\n            dateRender = resources[0].renderDates;\n            workCells = [].slice.call(this.parent.element.\n                querySelectorAll('.' + cls.WORK_CELLS_CLASS + '[data-group-index=\"' + this.actionObj.groupIndex + '\"]'));\n            workDays = resources[0].workDays;\n            groupOrder = resources[0].groupOrder;\n        }\n        this.monthEvent.dateRender = dateRender;\n        this.monthEvent.getSlotDates(workDays);\n        var appWrap = [].slice.call(this.parent.element.querySelectorAll('.e-schedule-event-clone'));\n        if (appWrap.length > 0) {\n            (appWrap).forEach(function (element) { return remove(element); });\n        }\n        var splittedEvents = this.monthEvent.splitEvent(event, dateRender);\n        for (var _i = 0, splittedEvents_1 = splittedEvents; _i < splittedEvents_1.length; _i++) {\n            var event_1 = splittedEvents_1[_i];\n            var day = this.parent.getIndexOfDate(dateRender, util.resetTime(event_1[this.monthEvent.fields.startTime]));\n            var diffInDays = event_1.data.count;\n            var appWidth = (diffInDays * this.actionObj.cellWidth) - 7;\n            var appointmentElement = this.monthEvent.createAppointmentElement(event_1, this.actionObj.groupIndex, true);\n            appointmentElement.setAttribute('drag', 'true');\n            addClass([appointmentElement], 'e-schedule-event-clone');\n            this.monthEvent.applyResourceColor(appointmentElement, event_1, 'backgroundColor', groupOrder);\n            setStyleAttribute(appointmentElement, { 'width': appWidth + 'px', 'border': '0px', 'pointer-events': 'none' });\n            var cellTd = workCells[day];\n            this.monthEvent.renderElement(cellTd, appointmentElement, true);\n            this.actionObj.cloneElement.push(appointmentElement);\n        }\n    };\n    /**\n     * To destroy the action base module.\n     * @return {void}\n     * @private\n     */\n    ActionBase.prototype.destroy = function () {\n        if (this.parent.isDestroyed) {\n            return;\n        }\n        this.actionObj = {};\n        this.scrollArgs = {};\n        this.resizeEdges = { left: false, right: false, top: false, bottom: false };\n        this.scrollEdges = { left: false, right: false, top: false, bottom: false };\n    };\n    return ActionBase;\n}());\nexport { ActionBase };\n"]},"metadata":{},"sourceType":"module"}