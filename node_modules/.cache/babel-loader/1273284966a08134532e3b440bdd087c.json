{"ast":null,"code":"import { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\n\nvar HeaderRenderer =\n/** @class */\nfunction () {\n  /**\n   * Constructor for render module\n   */\n  function HeaderRenderer(parent) {\n    this.parent = parent;\n    this.l10n = this.parent.localeObj;\n    this.renderHeader();\n    this.addEventListener();\n  }\n\n  HeaderRenderer.prototype.addEventListener = function () {\n    this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n  };\n\n  HeaderRenderer.prototype.removeEventListener = function () {\n    this.parent.off(events.documentClick, this.closeHeaderPopup);\n  };\n\n  HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n    var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n\n    if (!isNullOrUndefined(closestEle)) {\n      return;\n    }\n\n    this.hideHeaderPopup();\n  };\n  /** @hidden */\n\n\n  HeaderRenderer.prototype.hideHeaderPopup = function () {\n    if (this.headerPopup) {\n      this.headerPopup.hide();\n    }\n  };\n\n  HeaderRenderer.prototype.renderHeader = function () {\n    this.element = createElement('div', {\n      className: cls.TOOLBAR_CONTAINER\n    });\n    var toolbarEle = createElement('div', {\n      className: cls.HEADER_TOOLBAR\n    });\n    this.element.appendChild(toolbarEle);\n    this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n    this.renderToolbar();\n  };\n\n  HeaderRenderer.prototype.renderToolbar = function () {\n    var items = this.getItems();\n    var args = {\n      requestType: 'toolbarItemRendering',\n      items: items\n    };\n\n    if (!isBlazor()) {\n      this.parent.trigger(events.actionBegin, args);\n    }\n\n    this.toolbarObj = new Toolbar({\n      items: args.items,\n      overflowMode: 'Popup',\n      clicked: this.toolbarClickHandler.bind(this),\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale\n    });\n    this.toolbarObj.isStringTemplate = true;\n    this.toolbarObj.appendTo(this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n    var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n\n    if (prevNavEle) {\n      prevNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('previous'));\n    }\n\n    var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n\n    if (nextNavEle) {\n      nextNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('next'));\n    }\n\n    this.updateActiveView();\n\n    if (!isBlazor()) {\n      this.parent.trigger(events.actionComplete, {\n        requestType: 'toolBarItemRendered',\n        items: this.toolbarObj.items\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.updateItems = function () {\n    if (this.toolbarObj) {\n      var items = this.getItems();\n      var args = {\n        requestType: 'toolbarItemRendering',\n        items: items\n      };\n\n      if (!isBlazor()) {\n        this.parent.trigger(events.actionBegin, args);\n      }\n\n      this.toolbarObj.items = args.items;\n      this.toolbarObj.dataBind();\n\n      if (!isBlazor()) {\n        this.parent.trigger(events.actionComplete, {\n          requestType: 'toolBarItemRendered',\n          items: this.toolbarObj.items\n        });\n      }\n    }\n  };\n\n  HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n    if (this.parent.isAdaptive) {\n      return this.toolbarObj.element;\n    }\n\n    return this.element.querySelector('.e-date-range');\n  };\n\n  HeaderRenderer.prototype.setDayOfWeek = function (index) {\n    if (this.headerCalendar) {\n      this.headerCalendar.firstDayOfWeek = index;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarDate = function (date) {\n    if (this.headerCalendar) {\n      this.headerCalendar.value = date;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n    if (this.headerCalendar) {\n      this.headerCalendar.min = this.parent.minDate;\n      this.headerCalendar.max = this.parent.maxDate;\n      this.headerCalendar.dataBind();\n    }\n  };\n\n  HeaderRenderer.prototype.getCalendarView = function () {\n    if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n      return 'Year';\n    } else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n      return 'Decade';\n    } else {\n      return 'Month';\n    }\n  };\n\n  HeaderRenderer.prototype.setCalendarView = function () {\n    if (this.headerCalendar) {\n      var calendarView = this.getCalendarView();\n      this.headerCalendar.depth = calendarView;\n      this.headerCalendar.start = calendarView;\n      this.headerCalendar.refresh();\n    }\n  };\n\n  HeaderRenderer.prototype.updateActiveView = function () {\n    var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n    removeClass(selEle, ['e-active-view']);\n\n    if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n      addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n    }\n  };\n\n  HeaderRenderer.prototype.updateDateRange = function (text) {\n    var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (selEle) {\n      selEle.setAttribute('aria-label', text);\n      selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n      this.toolbarObj.refreshOverflow();\n    }\n  };\n\n  HeaderRenderer.prototype.getDateRangeText = function () {\n    return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n      format: 'MMMM y',\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n\n  HeaderRenderer.prototype.getItems = function () {\n    var items = [];\n    var showInPopup = this.parent.isAdaptive;\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-prev',\n      tooltipText: 'Previous',\n      overflow: 'Show',\n      cssClass: 'e-prev',\n      htmlAttributes: {\n        'aria-label': 'previous period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      prefixIcon: 'e-icon-next',\n      tooltipText: 'Next',\n      overflow: 'Show',\n      cssClass: 'e-next',\n      htmlAttributes: {\n        'aria-label': 'next period',\n        'role': 'navigation'\n      }\n    });\n    items.push({\n      align: 'Left',\n      text: this.getDateRangeText(),\n      suffixIcon: 'e-icon-down-arrow',\n      cssClass: 'e-date-range',\n      overflow: 'Show',\n      htmlAttributes: {\n        'aria-atomic': 'true',\n        'aria-live': 'assertive',\n        'aria-label': 'title',\n        'role': 'navigation'\n      }\n    });\n\n    if (this.parent.isAdaptive) {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: showInPopup,\n        prefixIcon: 'e-icon-add',\n        text: this.l10n.getConstant('newEvent'),\n        cssClass: 'e-add',\n        overflow: 'Show'\n      });\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: showInPopup,\n        prefixIcon: 'e-icon-today',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n    } else {\n      items.push({\n        align: 'Right',\n        showAlwaysInPopup: showInPopup,\n        prefixIcon: 'e-icon-day',\n        text: this.l10n.getConstant('today'),\n        cssClass: 'e-today',\n        overflow: 'Show'\n      });\n\n      if (this.parent.views.length > 1) {\n        items.push({\n          align: 'Right',\n          type: 'Separator',\n          cssClass: 'e-schedule-seperator'\n        });\n      }\n    }\n\n    if (this.parent.views.length > 1) {\n      for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n        var item = _a[_i];\n        typeof item === 'string' ? items.push(this.getItemObject(item.toLowerCase(), null)) : items.push(this.getItemObject(item.option.toLowerCase(), item.displayName));\n      }\n    }\n\n    return items;\n  };\n\n  HeaderRenderer.prototype.getItemObject = function (viewName, displayName) {\n    var view;\n    var showInPopup = this.parent.isAdaptive;\n\n    switch (viewName) {\n      case 'day':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-day',\n          text: displayName || this.l10n.getConstant('day'),\n          cssClass: 'e-views e-day'\n        };\n        break;\n\n      case 'week':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-week',\n          text: displayName || this.l10n.getConstant('week'),\n          cssClass: 'e-views e-week'\n        };\n        break;\n\n      case 'workweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-workweek',\n          text: displayName || this.l10n.getConstant('workWeek'),\n          cssClass: 'e-views e-work-week'\n        };\n        break;\n\n      case 'month':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-month',\n          text: displayName || this.l10n.getConstant('month'),\n          cssClass: 'e-views e-month'\n        };\n        break;\n      // case 'year':\n      //     view = {\n      //         align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-year',\n      //         text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n      //     };\n      //     break;\n\n      case 'agenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-agenda',\n          text: this.l10n.getConstant('agenda'),\n          cssClass: 'e-views e-agenda'\n        };\n        break;\n\n      case 'monthagenda':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-month-agenda',\n          text: this.l10n.getConstant('monthAgenda'),\n          cssClass: 'e-views e-month-agenda'\n        };\n        break;\n\n      case 'timelineday':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-timeline-day',\n          text: displayName || this.l10n.getConstant('timelineDay'),\n          cssClass: 'e-views e-timeline-day'\n        };\n        break;\n\n      case 'timelineweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-timeline-week',\n          text: displayName || this.l10n.getConstant('timelineWeek'),\n          cssClass: 'e-views e-timeline-week'\n        };\n        break;\n\n      case 'timelineworkweek':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-timeline-workweek',\n          text: displayName || this.l10n.getConstant('timelineWorkWeek'),\n          cssClass: 'e-views e-timeline-work-week'\n        };\n        break;\n\n      case 'timelinemonth':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-timeline-month',\n          text: displayName || this.l10n.getConstant('timelineMonth'),\n          cssClass: 'e-views e-timeline-month'\n        };\n        break;\n\n      case 'timelineyear':\n        view = {\n          align: 'Right',\n          showAlwaysInPopup: showInPopup,\n          prefixIcon: 'e-icon-timeline-year',\n          text: displayName || this.l10n.getConstant('timelineYear'),\n          cssClass: 'e-views e-timeline-year'\n        };\n        break;\n    }\n\n    return view;\n  };\n\n  HeaderRenderer.prototype.renderHeaderPopup = function () {\n    var headerPopupEle = createElement('div', {\n      className: cls.HEADER_POPUP_CLASS\n    });\n    var headerCalendarEle = createElement('div', {\n      className: cls.HEADER_CALENDAR_CLASS\n    });\n    headerPopupEle.appendChild(headerCalendarEle);\n    this.element.appendChild(headerPopupEle);\n    this.headerPopup = new Popup(headerPopupEle, {\n      actionOnScroll: 'hide',\n      targetType: 'relative',\n      relateTo: this.getPopUpRelativeElement(),\n      position: {\n        X: 'left',\n        Y: 'bottom'\n      },\n      enableRtl: this.parent.enableRtl\n    });\n    this.headerPopup.isStringTemplate = true;\n    var calendarView = this.getCalendarView();\n    this.headerCalendar = new Calendar({\n      value: this.parent.selectedDate,\n      min: this.parent.minDate,\n      max: this.parent.maxDate,\n      firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n      enableRtl: this.parent.enableRtl,\n      locale: this.parent.locale,\n      depth: calendarView,\n      start: calendarView,\n      calendarMode: this.parent.calendarMode,\n      change: this.calendarChange.bind(this)\n    });\n    this.headerCalendar.isStringTemplate = true;\n    this.headerCalendar.appendTo(headerCalendarEle);\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.calendarChange = function (args) {\n    if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n      this.parent.changeDate(args.value);\n    }\n\n    this.headerPopup.hide();\n  };\n\n  HeaderRenderer.prototype.calculateViewIndex = function (args) {\n    var target = closest(args.originalEvent.target, '.e-views');\n    var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n    return views.indexOf(target);\n  };\n\n  HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n    if (!args.item) {\n      return;\n    }\n\n    var strClass = args.item.cssClass.replace('e-views ', '');\n\n    switch (strClass) {\n      case 'e-date-range':\n        if (!this.headerPopup) {\n          this.renderHeaderPopup();\n        }\n\n        if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n          this.headerPopup.hide();\n        } else {\n          this.headerPopup.show();\n        }\n\n        break;\n\n      case 'e-day':\n        this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-week':\n        this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-work-week':\n        this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month':\n        this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n      // case 'e-year':\n      //     this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n      //     break;\n\n      case 'e-agenda':\n        this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-month-agenda':\n        this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-day':\n        this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-week':\n        this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-work-week':\n        this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-month':\n        this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-timeline-year':\n        this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n        break;\n\n      case 'e-today':\n        if (!this.parent.isSelectedDate(util.resetTime(this.parent.getCurrentTime()))) {\n          this.parent.changeDate(util.resetTime(this.parent.getCurrentTime()), args.originalEvent);\n        }\n\n        break;\n\n      case 'e-prev':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n        break;\n\n      case 'e-next':\n        this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n        break;\n\n      case 'e-add':\n        var data = void 0;\n        var isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n\n        if (this.parent.activeCellsData && !isSameTime) {\n          data = this.parent.activeCellsData;\n        } else {\n          var interval = this.parent.activeViewOptions.timeScale.interval;\n          var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n          var msInterval = interval * util.MS_PER_MINUTE / slotCount;\n          var startTime = new Date(this.parent.selectedDate.getTime());\n          var currentTime = this.parent.getCurrentTime();\n          startTime.setHours(currentTime.getHours(), Math.round(startTime.getMinutes() / msInterval) * msInterval, 0);\n          var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n          data = {\n            startTime: startTime,\n            endTime: endTime,\n            isAllDay: false\n          };\n        }\n\n        this.parent.eventWindow.openEditor(extend(data, {\n          cancel: false,\n          event: args.originalEvent\n        }), 'Add');\n        break;\n    }\n\n    var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n\n    if (toolbarPopUp && args.item.type !== 'Input') {\n      toolbarPopUp.ej2_instances[0].hide({\n        name: 'SlideUp',\n        duration: 100\n      });\n    }\n  };\n\n  HeaderRenderer.prototype.getHeaderElement = function () {\n    return this.toolbarObj.element;\n  };\n\n  HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n    var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n    var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n    var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n\n    if (prevNavEle) {\n      classType === 'add' ? addClass([prevNavEle], cls.HIDDEN_CLASS) : removeClass([prevNavEle], cls.HIDDEN_CLASS);\n    }\n\n    if (nextNavEle) {\n      classType === 'add' ? addClass([nextNavEle], cls.HIDDEN_CLASS) : removeClass([nextNavEle], cls.HIDDEN_CLASS);\n    }\n\n    if (dateRangeEle) {\n      classType === 'add' ? addClass([dateRangeEle], cls.TEXT_ELLIPSIS) : removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n    }\n  };\n\n  HeaderRenderer.prototype.previousNextIconHandler = function () {\n    var dates = this.parent.getCurrentViewDates();\n    var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n    var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n    var firstDate = new Date(dates[0].getTime());\n    var lastDate = new Date(dates[dates.length - 1].getTime());\n\n    if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n      lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n    }\n\n    if (this.parent.currentView === 'Month') {\n      firstDate = util.firstDateOfMonth(this.parent.selectedDate);\n      var lastMonthFirstDate = util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n      lastDate = util.lastDateOfMonth(lastMonthFirstDate);\n    }\n\n    if (!isNullOrUndefined(prevNavEle)) {\n      this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n    }\n\n    if (!isNullOrUndefined(nextNavEle)) {\n      this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n    }\n\n    this.setCalendarMinMaxDate();\n  };\n  /**\n   * Get module name.\n   */\n\n\n  HeaderRenderer.prototype.getModuleName = function () {\n    return 'headerbar';\n  };\n  /**\n   * To destroy the headerbar.\n   * @return {void}\n   * @private\n   */\n\n\n  HeaderRenderer.prototype.destroy = function () {\n    if (this.headerPopup && !this.headerPopup.isDestroyed) {\n      this.headerPopup.destroy();\n      this.headerPopup = null;\n    }\n\n    if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n      this.headerCalendar.destroy();\n      this.headerCalendar = null;\n    }\n\n    if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n      this.toolbarObj.destroy();\n      this.removeEventListener();\n      remove(this.element);\n      this.toolbarObj = null;\n    }\n  };\n\n  return HeaderRenderer;\n}();\n\nexport { HeaderRenderer };","map":{"version":3,"sources":["/Users/jay/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/header-renderer.js"],"names":["isNullOrUndefined","createElement","remove","closest","addClass","removeClass","extend","isBlazor","Toolbar","Calendar","Popup","events","util","cls","HeaderRenderer","parent","l10n","localeObj","renderHeader","addEventListener","prototype","on","documentClick","closeHeaderPopup","removeEventListener","off","e","closestEle","event","target","hideHeaderPopup","headerPopup","hide","element","className","TOOLBAR_CONTAINER","toolbarEle","HEADER_TOOLBAR","appendChild","insertBefore","firstElementChild","renderToolbar","items","getItems","args","requestType","trigger","actionBegin","toolbarObj","overflowMode","clicked","toolbarClickHandler","bind","enableRtl","locale","isStringTemplate","appendTo","querySelector","prevNavEle","setAttribute","getConstant","nextNavEle","updateActiveView","actionComplete","updateItems","dataBind","getPopUpRelativeElement","isAdaptive","setDayOfWeek","index","headerCalendar","firstDayOfWeek","setCalendarDate","date","value","setCalendarMinMaxDate","min","minDate","max","maxDate","getCalendarView","indexOf","currentView","setCalendarView","calendarView","depth","start","refresh","selEle","slice","call","querySelectorAll","length","viewIndex","updateDateRange","text","innerHTML","refreshOverflow","getDateRangeText","capitalizeFirstWord","globalize","formatDate","selectedDate","format","calendar","getCalendarMode","showInPopup","push","align","prefixIcon","tooltipText","overflow","cssClass","htmlAttributes","suffixIcon","showAlwaysInPopup","views","type","_i","_a","item","getItemObject","toLowerCase","option","displayName","viewName","view","renderHeaderPopup","headerPopupEle","HEADER_POPUP_CLASS","headerCalendarEle","HEADER_CALENDAR_CLASS","actionOnScroll","targetType","relateTo","position","X","Y","activeViewOptions","calendarMode","change","calendarChange","getTime","changeDate","calculateViewIndex","originalEvent","strClass","replace","classList","contains","POPUP_OPEN","show","changeView","undefined","isSelectedDate","resetTime","getCurrentTime","activeView","getNextPreviousDate","data","isSameTime","activeCellsData","startTime","endTime","interval","timeScale","slotCount","msInterval","MS_PER_MINUTE","Date","currentTime","setHours","getHours","Math","round","getMinutes","setMilliseconds","getMilliseconds","isAllDay","eventWindow","openEditor","cancel","toolbarPopUp","ej2_instances","name","duration","getHeaderElement","updateHeaderItems","classType","dateRangeEle","HIDDEN_CLASS","TEXT_ELLIPSIS","previousNextIconHandler","dates","getCurrentViewDates","PREVIOUS_DATE_CLASS","NEXT_DATE_CLASS","firstDate","lastDate","getWeekFirstDate","addDays","firstDateOfMonth","lastMonthFirstDate","addMonths","lastDateOfMonth","enableItems","getModuleName","destroy","isDestroyed"],"mappings":"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","sourcesContent":["import { isNullOrUndefined, createElement, remove, closest, addClass, removeClass, extend, isBlazor } from '@syncfusion/ej2-base';\nimport { Toolbar } from '@syncfusion/ej2-navigations';\nimport { Calendar } from '@syncfusion/ej2-calendars';\nimport { Popup } from '@syncfusion/ej2-popups';\nimport * as events from '../base/constant';\nimport * as util from '../base/util';\nimport * as cls from '../base/css-constant';\n/**\n * Header module\n */\nvar HeaderRenderer = /** @class */ (function () {\n    /**\n     * Constructor for render module\n     */\n    function HeaderRenderer(parent) {\n        this.parent = parent;\n        this.l10n = this.parent.localeObj;\n        this.renderHeader();\n        this.addEventListener();\n    }\n    HeaderRenderer.prototype.addEventListener = function () {\n        this.parent.on(events.documentClick, this.closeHeaderPopup, this);\n    };\n    HeaderRenderer.prototype.removeEventListener = function () {\n        this.parent.off(events.documentClick, this.closeHeaderPopup);\n    };\n    HeaderRenderer.prototype.closeHeaderPopup = function (e) {\n        var closestEle = closest(e.event.target, '.e-date-range,.e-header-popup,.e-day,.e-selected');\n        if (!isNullOrUndefined(closestEle)) {\n            return;\n        }\n        this.hideHeaderPopup();\n    };\n    /** @hidden */\n    HeaderRenderer.prototype.hideHeaderPopup = function () {\n        if (this.headerPopup) {\n            this.headerPopup.hide();\n        }\n    };\n    HeaderRenderer.prototype.renderHeader = function () {\n        this.element = createElement('div', { className: cls.TOOLBAR_CONTAINER });\n        var toolbarEle = createElement('div', { className: cls.HEADER_TOOLBAR });\n        this.element.appendChild(toolbarEle);\n        this.parent.element.insertBefore(this.element, this.parent.element.firstElementChild);\n        this.renderToolbar();\n    };\n    HeaderRenderer.prototype.renderToolbar = function () {\n        var items = this.getItems();\n        var args = { requestType: 'toolbarItemRendering', items: items };\n        if (!isBlazor()) {\n            this.parent.trigger(events.actionBegin, args);\n        }\n        this.toolbarObj = new Toolbar({\n            items: args.items,\n            overflowMode: 'Popup',\n            clicked: this.toolbarClickHandler.bind(this),\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale\n        });\n        this.toolbarObj.isStringTemplate = true;\n        this.toolbarObj.appendTo(this.parent.element.querySelector('.' + cls.HEADER_TOOLBAR));\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        if (prevNavEle) {\n            prevNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('previous'));\n        }\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        if (nextNavEle) {\n            nextNavEle.firstElementChild.setAttribute('title', this.l10n.getConstant('next'));\n        }\n        this.updateActiveView();\n        if (!isBlazor()) {\n            this.parent.trigger(events.actionComplete, {\n                requestType: 'toolBarItemRendered', items: this.toolbarObj.items\n            });\n        }\n    };\n    HeaderRenderer.prototype.updateItems = function () {\n        if (this.toolbarObj) {\n            var items = this.getItems();\n            var args = { requestType: 'toolbarItemRendering', items: items };\n            if (!isBlazor()) {\n                this.parent.trigger(events.actionBegin, args);\n            }\n            this.toolbarObj.items = args.items;\n            this.toolbarObj.dataBind();\n            if (!isBlazor()) {\n                this.parent.trigger(events.actionComplete, {\n                    requestType: 'toolBarItemRendered',\n                    items: this.toolbarObj.items\n                });\n            }\n        }\n    };\n    HeaderRenderer.prototype.getPopUpRelativeElement = function () {\n        if (this.parent.isAdaptive) {\n            return this.toolbarObj.element;\n        }\n        return this.element.querySelector('.e-date-range');\n    };\n    HeaderRenderer.prototype.setDayOfWeek = function (index) {\n        if (this.headerCalendar) {\n            this.headerCalendar.firstDayOfWeek = index;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarDate = function (date) {\n        if (this.headerCalendar) {\n            this.headerCalendar.value = date;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.setCalendarMinMaxDate = function () {\n        if (this.headerCalendar) {\n            this.headerCalendar.min = this.parent.minDate;\n            this.headerCalendar.max = this.parent.maxDate;\n            this.headerCalendar.dataBind();\n        }\n    };\n    HeaderRenderer.prototype.getCalendarView = function () {\n        if (['Month', 'MonthAgenda', 'TimelineMonth'].indexOf(this.parent.currentView) > -1) {\n            return 'Year';\n        }\n        else if (['Year', 'TimelineYear'].indexOf(this.parent.currentView) > -1) {\n            return 'Decade';\n        }\n        else {\n            return 'Month';\n        }\n    };\n    HeaderRenderer.prototype.setCalendarView = function () {\n        if (this.headerCalendar) {\n            var calendarView = this.getCalendarView();\n            this.headerCalendar.depth = calendarView;\n            this.headerCalendar.start = calendarView;\n            this.headerCalendar.refresh();\n        }\n    };\n    HeaderRenderer.prototype.updateActiveView = function () {\n        var selEle = [].slice.call(this.toolbarObj.element.querySelectorAll('.e-views'));\n        removeClass(selEle, ['e-active-view']);\n        if (selEle.length > 0 && selEle[this.parent.viewIndex]) {\n            addClass([selEle[this.parent.viewIndex]], ['e-active-view']);\n        }\n    };\n    HeaderRenderer.prototype.updateDateRange = function (text) {\n        var selEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (selEle) {\n            selEle.setAttribute('aria-label', text);\n            selEle.querySelector('.e-tbar-btn-text').innerHTML = text;\n            this.toolbarObj.refreshOverflow();\n        }\n    };\n    HeaderRenderer.prototype.getDateRangeText = function () {\n        return util.capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    HeaderRenderer.prototype.getItems = function () {\n        var items = [];\n        var showInPopup = this.parent.isAdaptive;\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-prev', tooltipText: 'Previous', overflow: 'Show',\n            cssClass: 'e-prev', htmlAttributes: { 'aria-label': 'previous period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', prefixIcon: 'e-icon-next', tooltipText: 'Next', overflow: 'Show',\n            cssClass: 'e-next', htmlAttributes: { 'aria-label': 'next period', 'role': 'navigation' }\n        });\n        items.push({\n            align: 'Left', text: this.getDateRangeText(), suffixIcon: 'e-icon-down-arrow', cssClass: 'e-date-range',\n            overflow: 'Show',\n            htmlAttributes: { 'aria-atomic': 'true', 'aria-live': 'assertive', 'aria-label': 'title', 'role': 'navigation' }\n        });\n        if (this.parent.isAdaptive) {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-add', text: this.l10n.getConstant('newEvent'),\n                cssClass: 'e-add', overflow: 'Show'\n            });\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-today', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n        }\n        else {\n            items.push({\n                align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day', text: this.l10n.getConstant('today'),\n                cssClass: 'e-today', overflow: 'Show'\n            });\n            if (this.parent.views.length > 1) {\n                items.push({\n                    align: 'Right', type: 'Separator', cssClass: 'e-schedule-seperator'\n                });\n            }\n        }\n        if (this.parent.views.length > 1) {\n            for (var _i = 0, _a = this.parent.views; _i < _a.length; _i++) {\n                var item = _a[_i];\n                typeof (item) === 'string' ? items.push(this.getItemObject(item.toLowerCase(), null)) :\n                    items.push(this.getItemObject(item.option.toLowerCase(), item.displayName));\n            }\n        }\n        return items;\n    };\n    HeaderRenderer.prototype.getItemObject = function (viewName, displayName) {\n        var view;\n        var showInPopup = this.parent.isAdaptive;\n        switch (viewName) {\n            case 'day':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-day',\n                    text: displayName || this.l10n.getConstant('day'), cssClass: 'e-views e-day'\n                };\n                break;\n            case 'week':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-week',\n                    text: displayName || this.l10n.getConstant('week'), cssClass: 'e-views e-week'\n                };\n                break;\n            case 'workweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-workweek',\n                    text: displayName || this.l10n.getConstant('workWeek'), cssClass: 'e-views e-work-week'\n                };\n                break;\n            case 'month':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month',\n                    text: displayName || this.l10n.getConstant('month'), cssClass: 'e-views e-month'\n                };\n                break;\n            // case 'year':\n            //     view = {\n            //         align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-year',\n            //         text: displayName || this.l10n.getConstant('year'), cssClass: 'e-views e-year'\n            //     };\n            //     break;\n            case 'agenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-agenda', text: this.l10n.getConstant('agenda'),\n                    cssClass: 'e-views e-agenda'\n                };\n                break;\n            case 'monthagenda':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-month-agenda',\n                    text: this.l10n.getConstant('monthAgenda'), cssClass: 'e-views e-month-agenda'\n                };\n                break;\n            case 'timelineday':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-day',\n                    text: displayName || this.l10n.getConstant('timelineDay'), cssClass: 'e-views e-timeline-day'\n                };\n                break;\n            case 'timelineweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-week',\n                    text: displayName || this.l10n.getConstant('timelineWeek'), cssClass: 'e-views e-timeline-week'\n                };\n                break;\n            case 'timelineworkweek':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-workweek',\n                    text: displayName || this.l10n.getConstant('timelineWorkWeek'), cssClass: 'e-views e-timeline-work-week'\n                };\n                break;\n            case 'timelinemonth':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-month',\n                    text: displayName || this.l10n.getConstant('timelineMonth'), cssClass: 'e-views e-timeline-month'\n                };\n                break;\n            case 'timelineyear':\n                view = {\n                    align: 'Right', showAlwaysInPopup: showInPopup, prefixIcon: 'e-icon-timeline-year',\n                    text: displayName || this.l10n.getConstant('timelineYear'), cssClass: 'e-views e-timeline-year'\n                };\n                break;\n        }\n        return view;\n    };\n    HeaderRenderer.prototype.renderHeaderPopup = function () {\n        var headerPopupEle = createElement('div', { className: cls.HEADER_POPUP_CLASS });\n        var headerCalendarEle = createElement('div', { className: cls.HEADER_CALENDAR_CLASS });\n        headerPopupEle.appendChild(headerCalendarEle);\n        this.element.appendChild(headerPopupEle);\n        this.headerPopup = new Popup(headerPopupEle, {\n            actionOnScroll: 'hide',\n            targetType: 'relative',\n            relateTo: this.getPopUpRelativeElement(),\n            position: { X: 'left', Y: 'bottom' },\n            enableRtl: this.parent.enableRtl\n        });\n        this.headerPopup.isStringTemplate = true;\n        var calendarView = this.getCalendarView();\n        this.headerCalendar = new Calendar({\n            value: this.parent.selectedDate,\n            min: this.parent.minDate,\n            max: this.parent.maxDate,\n            firstDayOfWeek: this.parent.activeViewOptions.firstDayOfWeek,\n            enableRtl: this.parent.enableRtl,\n            locale: this.parent.locale,\n            depth: calendarView,\n            start: calendarView,\n            calendarMode: this.parent.calendarMode,\n            change: this.calendarChange.bind(this)\n        });\n        this.headerCalendar.isStringTemplate = true;\n        this.headerCalendar.appendTo(headerCalendarEle);\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calendarChange = function (args) {\n        if (args.value.getTime() !== this.parent.selectedDate.getTime()) {\n            this.parent.changeDate(args.value);\n        }\n        this.headerPopup.hide();\n    };\n    HeaderRenderer.prototype.calculateViewIndex = function (args) {\n        var target = closest(args.originalEvent.target, '.e-views');\n        var views = [].slice.call(this.element.querySelectorAll('.e-views'));\n        return views.indexOf(target);\n    };\n    HeaderRenderer.prototype.toolbarClickHandler = function (args) {\n        if (!args.item) {\n            return;\n        }\n        var strClass = args.item.cssClass.replace('e-views ', '');\n        switch (strClass) {\n            case 'e-date-range':\n                if (!this.headerPopup) {\n                    this.renderHeaderPopup();\n                }\n                if (this.headerPopup.element.classList.contains(cls.POPUP_OPEN)) {\n                    this.headerPopup.hide();\n                }\n                else {\n                    this.headerPopup.show();\n                }\n                break;\n            case 'e-day':\n                this.parent.changeView('Day', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-week':\n                this.parent.changeView('Week', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-work-week':\n                this.parent.changeView('WorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month':\n                this.parent.changeView('Month', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            // case 'e-year':\n            //     this.parent.changeView('Year', args.originalEvent, undefined, this.calculateViewIndex(args));\n            //     break;\n            case 'e-agenda':\n                this.parent.changeView('Agenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-month-agenda':\n                this.parent.changeView('MonthAgenda', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-day':\n                this.parent.changeView('TimelineDay', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-week':\n                this.parent.changeView('TimelineWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-work-week':\n                this.parent.changeView('TimelineWorkWeek', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-month':\n                this.parent.changeView('TimelineMonth', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-timeline-year':\n                this.parent.changeView('TimelineYear', args.originalEvent, undefined, this.calculateViewIndex(args));\n                break;\n            case 'e-today':\n                if (!this.parent.isSelectedDate(util.resetTime(this.parent.getCurrentTime()))) {\n                    this.parent.changeDate(util.resetTime(this.parent.getCurrentTime()), args.originalEvent);\n                }\n                break;\n            case 'e-prev':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('previous'), args.originalEvent);\n                break;\n            case 'e-next':\n                this.parent.changeDate(this.parent.activeView.getNextPreviousDate('next'), args.originalEvent);\n                break;\n            case 'e-add':\n                var data = void 0;\n                var isSameTime = this.parent.activeCellsData.startTime.getTime() === this.parent.activeCellsData.endTime.getTime();\n                if (this.parent.activeCellsData && !isSameTime) {\n                    data = this.parent.activeCellsData;\n                }\n                else {\n                    var interval = this.parent.activeViewOptions.timeScale.interval;\n                    var slotCount = this.parent.activeViewOptions.timeScale.slotCount;\n                    var msInterval = (interval * util.MS_PER_MINUTE) / slotCount;\n                    var startTime = new Date(this.parent.selectedDate.getTime());\n                    var currentTime = this.parent.getCurrentTime();\n                    startTime.\n                        setHours(currentTime.getHours(), (Math.round(startTime.getMinutes() / msInterval) * msInterval), 0);\n                    var endTime = new Date(new Date(startTime.getTime()).setMilliseconds(startTime.getMilliseconds() + msInterval));\n                    data = { startTime: startTime, endTime: endTime, isAllDay: false };\n                }\n                this.parent.eventWindow.openEditor(extend(data, { cancel: false, event: args.originalEvent }), 'Add');\n                break;\n        }\n        var toolbarPopUp = this.toolbarObj.element.querySelector('.e-toolbar-pop');\n        if (toolbarPopUp && args.item.type !== 'Input') {\n            toolbarPopUp.ej2_instances[0].hide({ name: 'SlideUp', duration: 100 });\n        }\n    };\n    HeaderRenderer.prototype.getHeaderElement = function () {\n        return this.toolbarObj.element;\n    };\n    HeaderRenderer.prototype.updateHeaderItems = function (classType) {\n        var prevNavEle = this.toolbarObj.element.querySelector('.e-prev');\n        var nextNavEle = this.toolbarObj.element.querySelector('.e-next');\n        var dateRangeEle = this.toolbarObj.element.querySelector('.e-date-range');\n        if (prevNavEle) {\n            (classType === 'add') ? addClass([prevNavEle], cls.HIDDEN_CLASS) : removeClass([prevNavEle], cls.HIDDEN_CLASS);\n        }\n        if (nextNavEle) {\n            (classType === 'add') ? addClass([nextNavEle], cls.HIDDEN_CLASS) : removeClass([nextNavEle], cls.HIDDEN_CLASS);\n        }\n        if (dateRangeEle) {\n            (classType === 'add') ? addClass([dateRangeEle], cls.TEXT_ELLIPSIS) : removeClass([dateRangeEle], cls.TEXT_ELLIPSIS);\n        }\n    };\n    HeaderRenderer.prototype.previousNextIconHandler = function () {\n        var dates = this.parent.getCurrentViewDates();\n        var prevNavEle = this.toolbarObj.element.querySelector('.' + cls.PREVIOUS_DATE_CLASS);\n        var nextNavEle = this.toolbarObj.element.querySelector('.' + cls.NEXT_DATE_CLASS);\n        var firstDate = new Date(dates[0].getTime());\n        var lastDate = new Date(dates[dates.length - 1].getTime());\n        if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            firstDate = util.getWeekFirstDate(util.resetTime(this.parent.selectedDate), this.parent.firstDayOfWeek);\n            lastDate = util.addDays(firstDate, 7 * this.parent.activeViewOptions.interval);\n        }\n        if (this.parent.currentView === 'Month') {\n            firstDate = util.firstDateOfMonth(this.parent.selectedDate);\n            var lastMonthFirstDate = util.addMonths(firstDate, this.parent.activeViewOptions.interval - 1);\n            lastDate = util.lastDateOfMonth(lastMonthFirstDate);\n        }\n        if (!isNullOrUndefined(prevNavEle)) {\n            this.toolbarObj.enableItems(prevNavEle, firstDate > this.parent.minDate);\n        }\n        if (!isNullOrUndefined(nextNavEle)) {\n            this.toolbarObj.enableItems(nextNavEle, lastDate < this.parent.maxDate);\n        }\n        this.setCalendarMinMaxDate();\n    };\n    /**\n     * Get module name.\n     */\n    HeaderRenderer.prototype.getModuleName = function () {\n        return 'headerbar';\n    };\n    /**\n     * To destroy the headerbar.\n     * @return {void}\n     * @private\n     */\n    HeaderRenderer.prototype.destroy = function () {\n        if (this.headerPopup && !this.headerPopup.isDestroyed) {\n            this.headerPopup.destroy();\n            this.headerPopup = null;\n        }\n        if (this.headerCalendar && !this.headerCalendar.isDestroyed) {\n            this.headerCalendar.destroy();\n            this.headerCalendar = null;\n        }\n        if (this.toolbarObj && !this.toolbarObj.isDestroyed) {\n            this.toolbarObj.destroy();\n            this.removeEventListener();\n            remove(this.element);\n            this.toolbarObj = null;\n        }\n    };\n    return HeaderRenderer;\n}());\nexport { HeaderRenderer };\n"]},"metadata":{},"sourceType":"module"}