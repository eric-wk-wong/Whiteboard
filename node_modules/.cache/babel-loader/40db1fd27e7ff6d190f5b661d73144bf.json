{"ast":null,"code":"/**\n * Template Engine Bridge\n */\nimport { compile as render } from './template';\nimport { createElement } from './dom';\nimport { isNullOrUndefined, isBlazor } from './util';\nvar HAS_ROW = /^[\\n\\r.]+\\<tr|^\\<tr/;\nvar HAS_SVG = /^[\\n\\r.]+\\<svg|^\\<path|^\\<g/;\nexport var blazorTemplates = {};\nexport function getRandomId() {\n  return '-' + Math.random().toString(36).substr(2, 5);\n}\n/**\n * Compile the template string into template function.\n * @param  {string} templateString - The template string which is going to convert.\n * @param  {Object} helper? - Helper functions as an object.\n * @private\n */\n//tslint:disable-next-line\n\nexport function compile(templateString, helper) {\n  var compiler = engineObj.compile(templateString, helper); //tslint:disable-next-line\n\n  return function (data, component, propName, templateId, isStringTemplate, index) {\n    var result = compiler(data, component, propName);\n    var blazor = 'Blazor';\n    var blazorTemplateId = 'BlazorTemplateId';\n\n    if (isBlazor() && !isStringTemplate) {\n      var randomId = getRandomId();\n      var blazorId = templateId + randomId;\n\n      if (!blazorTemplates[templateId]) {\n        blazorTemplates[templateId] = [];\n      }\n\n      if (!isNullOrUndefined(index)) {\n        var keys = Object.keys(blazorTemplates[templateId][index]);\n\n        for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n          var key = keys_1[_i];\n\n          if (key !== blazorTemplateId && data[key]) {\n            blazorTemplates[templateId][index][key] = data[key];\n          }\n\n          if (key === blazorTemplateId) {\n            blazorId = blazorTemplates[templateId][index][key];\n          }\n        }\n      } else {\n        data[blazorTemplateId] = blazorId;\n        blazorTemplates[templateId].push(data);\n      } // tslint:disable-next-line:no-any\n\n\n      return propName === 'rowTemplate' ? [createElement('tr', {\n        id: blazorId,\n        className: 'e-blazor-template'\n      })] : // tslint:disable-next-line:no-any\n      [createElement('div', {\n        id: blazorId,\n        className: 'e-blazor-template'\n      })];\n    }\n\n    if (typeof result === 'string') {\n      if (HAS_SVG.test(result)) {\n        var ele = createElement('svg', {\n          innerHTML: result\n        });\n        return ele.childNodes;\n      } else {\n        var ele = createElement(HAS_ROW.test(result) ? 'table' : 'div', {\n          innerHTML: result\n        });\n        return ele.childNodes;\n      }\n    } else {\n      return result;\n    }\n  };\n}\nexport function updateBlazorTemplate(templateId, templateName, comp, isEmpty, callBack) {\n  var blazor = 'Blazor';\n\n  if (isBlazor()) {\n    var ejsIntrop = 'ejsInterop';\n    window[ejsIntrop].updateTemplate(templateName, blazorTemplates[templateId], templateId, comp, callBack);\n\n    if (isEmpty !== false) {\n      blazorTemplates[templateId] = [];\n    }\n  }\n}\nexport function resetBlazorTemplate(templateId, templateName, index) {\n  var templateDiv = document.getElementById(templateId);\n\n  if (templateDiv) {\n    // tslint:disable-next-line:no-any\n    var innerTemplates = templateDiv.getElementsByClassName('blazor-inner-template');\n\n    for (var i = 0; i < innerTemplates.length; i++) {\n      var tempId = ' ';\n\n      if (!isNullOrUndefined(index)) {\n        tempId = innerTemplates[index].getAttribute('data-templateId');\n      } else {\n        tempId = innerTemplates[i].getAttribute('data-templateId');\n      }\n\n      var tempElement = document.getElementById(tempId);\n\n      if (tempElement) {\n        var length_1 = tempElement.childNodes.length;\n\n        for (var j = 0; j < length_1; j++) {\n          if (!isNullOrUndefined(index)) {\n            innerTemplates[index].appendChild(tempElement.childNodes[0]);\n            i = innerTemplates.length;\n          } else {\n            innerTemplates[i].appendChild(tempElement.childNodes[0]);\n          }\n        }\n      }\n    }\n  }\n}\n/**\n * Set your custom template engine for template rendering.\n * @param  {ITemplateEngine} classObj - Class object for custom template.\n * @private\n */\n\nexport function setTemplateEngine(classObj) {\n  engineObj.compile = classObj.compile;\n}\n/**\n * Get current template engine for template rendering\n * @param  {ITemplateEngine} classObj - Class object for custom template.\n * @private\n */\n\nexport function getTemplateEngine() {\n  return engineObj.compile;\n} //Default Engine Class\n\nvar Engine =\n/** @class */\nfunction () {\n  function Engine() {}\n\n  Engine.prototype.compile = function (templateString, helper) {\n    if (helper === void 0) {\n      helper = {};\n    }\n\n    return render(templateString, helper);\n  };\n\n  return Engine;\n}();\n\nvar engineObj = {\n  compile: new Engine().compile\n};","map":{"version":3,"sources":["/Users/jay/node_modules/@syncfusion/ej2-base/src/template-engine.js"],"names":["compile","render","createElement","isNullOrUndefined","isBlazor","HAS_ROW","HAS_SVG","blazorTemplates","getRandomId","Math","random","toString","substr","templateString","helper","compiler","engineObj","data","component","propName","templateId","isStringTemplate","index","result","blazor","blazorTemplateId","randomId","blazorId","keys","Object","_i","keys_1","length","key","push","id","className","test","ele","innerHTML","childNodes","updateBlazorTemplate","templateName","comp","isEmpty","callBack","ejsIntrop","window","updateTemplate","resetBlazorTemplate","templateDiv","document","getElementById","innerTemplates","getElementsByClassName","i","tempId","getAttribute","tempElement","length_1","j","appendChild","setTemplateEngine","classObj","getTemplateEngine","Engine","prototype"],"mappings":"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","sourcesContent":["/**\n * Template Engine Bridge\n */\nimport { compile as render } from './template';\nimport { createElement } from './dom';\nimport { isNullOrUndefined, isBlazor } from './util';\nvar HAS_ROW = /^[\\n\\r.]+\\<tr|^\\<tr/;\nvar HAS_SVG = /^[\\n\\r.]+\\<svg|^\\<path|^\\<g/;\nexport var blazorTemplates = {};\nexport function getRandomId() {\n    return '-' + Math.random().toString(36).substr(2, 5);\n}\n/**\n * Compile the template string into template function.\n * @param  {string} templateString - The template string which is going to convert.\n * @param  {Object} helper? - Helper functions as an object.\n * @private\n */\n//tslint:disable-next-line\nexport function compile(templateString, helper) {\n    var compiler = engineObj.compile(templateString, helper);\n    //tslint:disable-next-line\n    return function (data, component, propName, templateId, isStringTemplate, index) {\n        var result = compiler(data, component, propName);\n        var blazor = 'Blazor';\n        var blazorTemplateId = 'BlazorTemplateId';\n        if (isBlazor() && !isStringTemplate) {\n            var randomId = getRandomId();\n            var blazorId = templateId + randomId;\n            if (!blazorTemplates[templateId]) {\n                blazorTemplates[templateId] = [];\n            }\n            if (!isNullOrUndefined(index)) {\n                var keys = Object.keys(blazorTemplates[templateId][index]);\n                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n                    var key = keys_1[_i];\n                    if (key !== blazorTemplateId && data[key]) {\n                        blazorTemplates[templateId][index][key] = data[key];\n                    }\n                    if (key === blazorTemplateId) {\n                        blazorId = blazorTemplates[templateId][index][key];\n                    }\n                }\n            }\n            else {\n                data[blazorTemplateId] = blazorId;\n                blazorTemplates[templateId].push(data);\n            }\n            // tslint:disable-next-line:no-any\n            return propName === 'rowTemplate' ? [createElement('tr', { id: blazorId, className: 'e-blazor-template' })] :\n                // tslint:disable-next-line:no-any\n                [createElement('div', { id: blazorId, className: 'e-blazor-template' })];\n        }\n        if (typeof result === 'string') {\n            if (HAS_SVG.test(result)) {\n                var ele = createElement('svg', { innerHTML: result });\n                return ele.childNodes;\n            }\n            else {\n                var ele = createElement((HAS_ROW.test(result) ? 'table' : 'div'), { innerHTML: result });\n                return ele.childNodes;\n            }\n        }\n        else {\n            return result;\n        }\n    };\n}\nexport function updateBlazorTemplate(templateId, templateName, comp, isEmpty, callBack) {\n    var blazor = 'Blazor';\n    if (isBlazor()) {\n        var ejsIntrop = 'ejsInterop';\n        window[ejsIntrop].updateTemplate(templateName, blazorTemplates[templateId], templateId, comp, callBack);\n        if (isEmpty !== false) {\n            blazorTemplates[templateId] = [];\n        }\n    }\n}\nexport function resetBlazorTemplate(templateId, templateName, index) {\n    var templateDiv = document.getElementById(templateId);\n    if (templateDiv) {\n        // tslint:disable-next-line:no-any\n        var innerTemplates = templateDiv.getElementsByClassName('blazor-inner-template');\n        for (var i = 0; i < innerTemplates.length; i++) {\n            var tempId = ' ';\n            if (!isNullOrUndefined(index)) {\n                tempId = innerTemplates[index].getAttribute('data-templateId');\n            }\n            else {\n                tempId = innerTemplates[i].getAttribute('data-templateId');\n            }\n            var tempElement = document.getElementById(tempId);\n            if (tempElement) {\n                var length_1 = tempElement.childNodes.length;\n                for (var j = 0; j < length_1; j++) {\n                    if (!isNullOrUndefined(index)) {\n                        innerTemplates[index].appendChild(tempElement.childNodes[0]);\n                        i = innerTemplates.length;\n                    }\n                    else {\n                        innerTemplates[i].appendChild(tempElement.childNodes[0]);\n                    }\n                }\n            }\n        }\n    }\n}\n/**\n * Set your custom template engine for template rendering.\n * @param  {ITemplateEngine} classObj - Class object for custom template.\n * @private\n */\nexport function setTemplateEngine(classObj) {\n    engineObj.compile = classObj.compile;\n}\n/**\n * Get current template engine for template rendering\n * @param  {ITemplateEngine} classObj - Class object for custom template.\n * @private\n */\nexport function getTemplateEngine() {\n    return engineObj.compile;\n}\n//Default Engine Class\nvar Engine = /** @class */ (function () {\n    function Engine() {\n    }\n    Engine.prototype.compile = function (templateString, helper) {\n        if (helper === void 0) { helper = {}; }\n        return render(templateString, helper);\n    };\n    return Engine;\n}());\nvar engineObj = { compile: new Engine().compile };\n"]},"metadata":{},"sourceType":"module"}