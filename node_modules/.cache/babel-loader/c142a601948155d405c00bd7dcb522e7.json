{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n  default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b', '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7', '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4', '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d', '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176', '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58', '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835', '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d', '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825', '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\n\nvar ColorPicker =\n/** @class */\nfunction (_super) {\n  __extends(ColorPicker, _super);\n\n  function ColorPicker(options, element) {\n    return _super.call(this, options, element) || this;\n  }\n\n  ColorPicker.prototype.preRender = function () {\n    var ele = this.element;\n    this.formElement = closest(this.element, 'form');\n\n    if (this.formElement) {\n      EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n    }\n\n    var localeText = {\n      Apply: 'Apply',\n      Cancel: 'Cancel',\n      ModeSwitcher: 'Switch Mode'\n    };\n    this.l10n = new L10n('colorpicker', localeText, this.locale);\n\n    if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n      ele.setAttribute('name', ele.id);\n    }\n  };\n  /**\n   * To Initialize the component rendering\n   * @private\n   */\n\n\n  ColorPicker.prototype.render = function () {\n    this.initWrapper();\n\n    if (this.inline) {\n      this.createWidget();\n    } else {\n      this.createSplitBtn();\n    }\n\n    if (!this.enableOpacity) {\n      addClass([this.container.parentElement], HIDEOPACITY);\n    }\n\n    this.renderComplete();\n  };\n\n  ColorPicker.prototype.initWrapper = function () {\n    var wrapper = this.createElement('div', {\n      className: 'e-' + this.getModuleName() + '-wrapper'\n    });\n    this.element.parentNode.insertBefore(wrapper, this.element);\n    wrapper.appendChild(this.element);\n    attributes(this.element, {\n      'tabindex': '-1',\n      'spellcheck': 'false'\n    });\n    this.container = this.createElement('div', {\n      className: CONTAINER\n    });\n    this.getWrapper().appendChild(this.container);\n    var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n\n    if (this.noColor && this.mode === 'Palette' && this.value === '') {\n      value = '';\n    }\n\n    var slicedValue = value.slice(0, 7);\n\n    if (isNullOrUndefined(this.initialInputValue)) {\n      this.initialInputValue = slicedValue;\n    }\n\n    this.element.value = slicedValue;\n\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': slicedValue\n      }, true);\n    }\n\n    if (this.enableRtl) {\n      wrapper.classList.add(RTL);\n    }\n\n    if (this.cssClass) {\n      addClass([wrapper], this.cssClass.split(' '));\n    }\n\n    this.tileRipple = rippleEffect(this.container, {\n      selector: '.' + TILE\n    });\n    this.ctrlBtnRipple = rippleEffect(this.container, {\n      selector: '.e-btn'\n    });\n  };\n\n  ColorPicker.prototype.getWrapper = function () {\n    return this.element.parentElement;\n  };\n\n  ColorPicker.prototype.createWidget = function () {\n    if (this.mode === 'Palette') {\n      this.createPalette();\n\n      if (!this.inline) {\n        this.firstPaletteFocus();\n      }\n    } else {\n      this.createPicker();\n\n      if (!this.inline) {\n        this.getDragHandler().focus();\n      }\n    }\n\n    this.isRgb = true;\n    this.createInput();\n    this.createCtrlBtn();\n\n    if (!this.disabled) {\n      this.wireEvents();\n    }\n\n    if (this.inline && this.disabled) {\n      this.toggleDisabled(true);\n    }\n\n    if (Browser.isDevice) {\n      this.refreshPopupPos();\n    }\n  };\n\n  ColorPicker.prototype.createSplitBtn = function () {\n    var _this = this;\n\n    var splitButton = this.createElement('button', {\n      className: 'e-split-colorpicker'\n    });\n    this.getWrapper().appendChild(splitButton);\n    this.splitBtn = new SplitButton({\n      iconCss: 'e-selected-color',\n      target: this.container,\n      disabled: this.disabled,\n      enableRtl: this.enableRtl,\n      open: this.onOpen.bind(this),\n      click: function (args) {\n        _this.trigger('change', {\n          currentValue: {\n            hex: _this.value.slice(0, 7),\n            rgba: _this.convertToRgbString(_this.hexToRgb(_this.value))\n          },\n          previousValue: {\n            hex: null,\n            rgba: null\n          },\n          value: _this.value\n        });\n      }\n    });\n    this.splitBtn.createElement = this.createElement;\n    this.splitBtn.appendTo(splitButton);\n    var preview = this.createElement('span', {\n      className: SPLITPREVIEW\n    });\n    select('.e-selected-color', splitButton).appendChild(preview);\n    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    var popupEle = this.getPopupEle();\n    addClass([popupEle], 'e-colorpicker-popup');\n\n    if (this.cssClass) {\n      addClass([popupEle], this.cssClass.split(' '));\n    }\n\n    if (Browser.isDevice) {\n      var popupInst = this.getPopupInst();\n      popupInst.relateTo = document.body;\n      popupInst.position = {\n        X: 'center',\n        Y: 'center'\n      };\n      popupInst.targetType = 'container';\n      popupInst.collision = {\n        X: 'fit',\n        Y: 'fit'\n      };\n      popupInst.offsetY = 4;\n      popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n    }\n\n    this.bindCallBackEvent();\n  };\n\n  ColorPicker.prototype.onOpen = function (args) {\n    this.trigger('open', {\n      element: this.container\n    });\n  };\n\n  ColorPicker.prototype.getPopupInst = function () {\n    return getInstance(this.getPopupEle(), Popup);\n  };\n\n  ColorPicker.prototype.bindCallBackEvent = function () {\n    var _this = this;\n\n    this.splitBtn.beforeOpen = function (args) {\n      var callBackPromise = new Deferred();\n\n      _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n        if (!observeOpenArgs.cancel) {\n          var popupEle = _this.getPopupEle();\n\n          popupEle.style.top = formatUnit(0 + pageYOffset);\n          popupEle.style.left = formatUnit(0 + pageXOffset);\n          popupEle.style.display = 'block';\n\n          _this.createWidget();\n\n          popupEle.style.display = '';\n\n          if (Browser.isDevice) {\n            _this.modal = _this.createElement('div');\n            _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n            _this.modal.style.display = 'none';\n            document.body.insertBefore(_this.modal, popupEle);\n            document.body.className += ' e-colorpicker-overflow';\n            _this.modal.style.display = 'block';\n            _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n          }\n        }\n\n        args.cancel = observeOpenArgs.cancel;\n        callBackPromise.resolve(observeOpenArgs);\n      });\n\n      return callBackPromise;\n    };\n\n    this.splitBtn.beforeClose = function (args) {\n      var callBackPromise = new Deferred();\n\n      if (!isNullOrUndefined(args.event)) {\n        var beforeCloseArgs = {\n          element: _this.container,\n          event: args.event,\n          cancel: false\n        };\n\n        _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n          if (Browser.isDevice && args.event.target === _this.modal) {\n            observedCloseArgs.cancel = true;\n          }\n\n          if (!observedCloseArgs.cancel) {\n            _this.onPopupClose();\n          }\n\n          args.cancel = observedCloseArgs.cancel;\n          callBackPromise.resolve(observedCloseArgs);\n        });\n      } else {\n        callBackPromise.resolve(args);\n      }\n\n      return callBackPromise;\n    };\n  };\n\n  ColorPicker.prototype.onPopupClose = function () {\n    this.unWireEvents();\n    this.destroyOtherComp();\n    this.container.style.width = '';\n    select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n    this.container.innerHTML = '';\n    removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n\n    if (Browser.isDevice && this.modal) {\n      removeClass([document.body], 'e-colorpicker-overflow');\n      this.modal.style.display = 'none';\n      this.modal.outerHTML = '';\n      this.modal = null;\n    }\n  };\n\n  ColorPicker.prototype.createPalette = function () {\n    classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n\n    if (this.presetColors) {\n      var paletteGroup = this.createElement('div', {\n        className: 'e-custom-palette'\n      });\n      this.appendElement(paletteGroup);\n      var keys = Object.keys(this.presetColors);\n\n      if (keys.length === 1) {\n        this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n      } else {\n        for (var i = 0, len = keys.length; i < len; i++) {\n          this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n        }\n      }\n\n      if (selectAll('.e-row', paletteGroup).length > 10) {\n        addClass([paletteGroup], 'e-palette-group');\n      }\n    } else {\n      this.appendPalette(presets.default, 'default');\n    }\n\n    if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n      this.setNoColor();\n    }\n\n    var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n    this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n    this.rgb = this.hexToRgb(this.roundValue(this.value));\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n  };\n\n  ColorPicker.prototype.firstPaletteFocus = function () {\n    if (!select('.' + SELECT, this.container.children[0])) {\n      selectAll('.' + PALETTES, this.container)[0].focus();\n    }\n  };\n\n  ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n    var palette = this.createElement('div', {\n      className: PALETTES,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n\n    if (refEle) {\n      refEle.appendChild(palette);\n    } else {\n      this.appendElement(palette);\n    }\n\n    var row;\n    var tile;\n    var roundedColor;\n\n    for (var i = 0, len = colors.length; i < len; i++) {\n      if (i === 0 || i % this.columns === 0) {\n        row = this.createElement('div', {\n          className: 'e-row',\n          attrs: {\n            'role': 'row'\n          }\n        });\n        palette.appendChild(row);\n      }\n\n      roundedColor = this.roundValue(colors[i]).toLowerCase();\n      tile = this.createElement('span', {\n        className: TILE,\n        attrs: {\n          'role': 'gridcell',\n          'aria-label': roundedColor,\n          'aria-selected': 'false'\n        }\n      });\n      this.trigger('beforeTileRender', {\n        element: tile,\n        presetName: key,\n        value: colors[i]\n      });\n      row.appendChild(tile);\n\n      if (this.value === roundedColor) {\n        this.addTileSelection(tile);\n        palette.focus();\n      }\n\n      tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n    }\n  };\n\n  ColorPicker.prototype.setNoColor = function () {\n    var noColorEle = this.container.querySelector('.e-row').children[0];\n    noColorEle.classList.add(NOCOLOR);\n\n    if (!this.value) {\n      noColorEle.classList.add(SELECT);\n      closest(noColorEle, '.' + PALETTES).focus();\n    }\n\n    ['aria-selected', 'aria-label'].forEach(function (attr) {\n      noColorEle.removeAttribute(attr);\n    });\n    noColorEle.style.backgroundColor = '';\n  };\n\n  ColorPicker.prototype.appendElement = function (ele, insertPos) {\n    if (insertPos === void 0) {\n      insertPos = 0;\n    }\n\n    var refEle = this.container.children[insertPos];\n    refEle ? this.container.insertBefore(ele, refEle) : this.container.appendChild(ele);\n  };\n\n  ColorPicker.prototype.addTileSelection = function (ele) {\n    ele.classList.add(SELECT);\n    ele.setAttribute('aria-selected', 'true');\n  };\n\n  ColorPicker.prototype.createPicker = function () {\n    classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n    var hsvContainer = this.createElement('div', {\n      className: HSVCONTAINER\n    });\n    this.appendElement(hsvContainer);\n    hsvContainer.appendChild(this.createElement('div', {\n      className: HSVAREA\n    }));\n    var dragHandler = this.createElement('span', {\n      className: HANDLER,\n      attrs: {\n        'tabindex': '0'\n      }\n    });\n    hsvContainer.appendChild(dragHandler);\n    this.rgb = this.hexToRgb(this.value);\n    this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    this.setHsvContainerBg();\n    this.setHandlerPosition();\n    this.createSlider();\n    this.createDragTooltip();\n  };\n\n  ColorPicker.prototype.setHsvContainerBg = function (h) {\n    if (h === void 0) {\n      h = this.hsv[0];\n    }\n\n    this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n  };\n\n  ColorPicker.prototype.getHsvContainer = function () {\n    return select('.' + HSVCONTAINER, this.container);\n  };\n\n  ColorPicker.prototype.setHandlerPosition = function () {\n    var dragHandler = this.getDragHandler();\n    var hsvArea = select('.' + HSVAREA, this.container);\n\n    if (this.enableRtl) {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n    } else {\n      dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n    }\n\n    dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n  };\n\n  ColorPicker.prototype.createSlider = function () {\n    var sliderPreviewWrapper = this.createElement('div', {\n      className: 'e-slider-preview'\n    });\n    this.appendElement(sliderPreviewWrapper, 1);\n    this.createPreview(sliderPreviewWrapper);\n    var sliderWrapper = this.createElement('div', {\n      className: 'e-colorpicker-slider'\n    });\n    sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n    var slider = this.createElement('div', {\n      className: 'e-hue-slider'\n    });\n    sliderWrapper.appendChild(slider);\n    this.hueSlider = new Slider({\n      value: this.hsv[0],\n      min: 0,\n      max: 359,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.hueChange.bind(this)\n    });\n    this.hueSlider.createElement = this.createElement;\n    this.hueSlider.appendTo(slider);\n\n    if (this.enableOpacity) {\n      slider = this.createElement('div', {\n        className: 'e-opacity-slider'\n      });\n      sliderWrapper.appendChild(slider);\n      this.createOpacitySlider(slider);\n    }\n  };\n\n  ColorPicker.prototype.createOpacitySlider = function (slider) {\n    this.opacitySlider = new Slider({\n      value: this.rgb[3] * 100,\n      min: 0,\n      max: 100,\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      change: this.opacityChange.bind(this)\n    });\n    this.opacitySlider.createElement = this.createElement;\n    this.opacitySlider.appendTo(slider);\n    var opacityBgTrack = this.createElement('div', {\n      className: 'e-opacity-empty-track'\n    });\n    slider.appendChild(opacityBgTrack);\n    this.updateOpacitySliderBg();\n  };\n\n  ColorPicker.prototype.updateOpacitySliderBg = function () {\n    var direction = this.enableRtl ? 'to left' : 'to right';\n    select('.e-slider-track', this.opacitySlider.element).style.background = 'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' + this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n  };\n\n  ColorPicker.prototype.hueChange = function (args) {\n    this.hsv[0] = args.value;\n    this.setHsvContainerBg();\n    this.convertToOtherFormat();\n  };\n\n  ColorPicker.prototype.opacityChange = function (args) {\n    var value = args.value;\n    var pValue = this.rgbToHex(this.rgb);\n    this.hsv[3] = value / 100;\n    this.rgb[3] = value / 100;\n    var cValue = this.rgbToHex(this.rgb);\n    this.updateOpacityInput(value);\n    var rgb = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgb);\n    this.triggerEvent(cValue, pValue, rgb);\n  };\n\n  ColorPicker.prototype.updateOpacityInput = function (value) {\n    if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n      var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n      opacityTextBoxInst.value = value;\n      opacityTextBoxInst.dataBind();\n    }\n  };\n\n  ColorPicker.prototype.createPreview = function (parentEle) {\n    var previewContainer = this.createElement('div', {\n      className: PREVIEW\n    });\n    parentEle.appendChild(previewContainer);\n    var preview = this.createElement('span', {\n      className: 'e-preview ' + CURRENT\n    });\n    previewContainer.appendChild(preview);\n    var colorValue = this.convertToRgbString(this.rgb);\n    preview.style.backgroundColor = colorValue;\n    preview = this.createElement('span', {\n      className: 'e-preview ' + PREVIOUS\n    });\n    previewContainer.appendChild(preview);\n    preview.style.backgroundColor = colorValue;\n  };\n\n  ColorPicker.prototype.isPicker = function () {\n    return !this.container.classList.contains(PALETTECONTENT);\n  };\n\n  ColorPicker.prototype.getPopupEle = function () {\n    return this.container.parentElement;\n  };\n\n  ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n    var _this = this;\n\n    var numericInput = new NumericTextBox({\n      value: value,\n      placeholder: label,\n      min: 0,\n      max: max,\n      format: '###.##',\n      showSpinButton: false,\n      floatLabelType: 'Always',\n      enableRtl: this.enableRtl,\n      enabled: !this.disabled,\n      readonly: this.isPicker() ? false : true,\n      change: function (args) {\n        if (args.event) {\n          _this.inputHandler(args.event);\n        }\n      }\n    });\n    numericInput.createElement = this.createElement;\n    numericInput.appendTo(element);\n  };\n\n  ColorPicker.prototype.createInput = function () {\n    var isPicker = this.isPicker();\n    var wrapper = this.getWrapper();\n\n    if (isPicker && !wrapper.classList.contains(HIDEVALUE) || !isPicker && wrapper.classList.contains(SHOWVALUE)) {\n      var inputWrap = this.createElement('div', {\n        className: INPUTWRAPPER\n      });\n      isPicker ? this.appendElement(inputWrap, 2) : this.appendElement(inputWrap, 1);\n      var container = this.createElement('div', {\n        className: 'e-input-container'\n      });\n      inputWrap.appendChild(container);\n\n      if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n        this.appendValueSwitchBtn(inputWrap);\n      }\n\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        var hexInput = this.createElement('input', {\n          className: HEX,\n          attrs: {\n            'maxlength': '7',\n            'spellcheck': 'false'\n          }\n        });\n        container.appendChild(hexInput);\n        Input.createInput({\n          element: hexInput,\n          floatLabelType: 'Always',\n          properties: {\n            placeholder: 'HEX',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true\n          }\n        }, this.createElement);\n        Input.setValue(this.value.slice(0, 7), hexInput);\n        hexInput.addEventListener('input', this.inputHandler.bind(this));\n      }\n\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        var label = void 0;\n        var value = void 0;\n\n        if (this.isRgb) {\n          label = 'RGB';\n          value = this.rgb;\n        } else {\n          label = 'HSV';\n          value = this.hsv;\n        }\n\n        var clsName = ['rh', 'gs', 'bv'];\n\n        for (var i = 0; i < 3; i++) {\n          this.createNumericInput(container.appendChild(this.createElement('input', {\n            className: 'e-' + clsName[i] + '-value'\n          })), value[i], label[i], 255);\n        }\n\n        if (this.enableOpacity) {\n          this.appendOpacityValue(container);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.appendOpacityValue = function (container) {\n    this.createNumericInput(container.appendChild(this.createElement('input', {\n      className: OPACITY\n    })), this.rgb[3] * 100, 'A', 100);\n  };\n\n  ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n    var valueSwitchBtn = this.createElement('button', {\n      className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH\n    });\n    targetEle.appendChild(valueSwitchBtn);\n\n    if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n      valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n    }\n  };\n\n  ColorPicker.prototype.createCtrlBtn = function () {\n    if (this.modeSwitcher || this.showButtons) {\n      this.l10n.setLocale(this.locale);\n      var btnWrapper = this.createElement('div', {\n        className: CTRLSWITCH\n      });\n      this.container.appendChild(btnWrapper);\n\n      if (this.showButtons) {\n        var controlBtnWrapper = this.createElement('div', {\n          className: CTRLBTN\n        });\n        btnWrapper.appendChild(controlBtnWrapper);\n        var apply = this.l10n.getConstant('Apply');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: apply,\n          className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n          attrs: {\n            'title': apply\n          }\n        }));\n        var cancel = this.l10n.getConstant('Cancel');\n        controlBtnWrapper.appendChild(this.createElement('button', {\n          innerHTML: cancel,\n          className: 'e-btn e-css e-flat e-small ' + CANCEL,\n          attrs: {\n            'title': cancel\n          }\n        }));\n      }\n\n      if (this.modeSwitcher) {\n        this.appendModeSwitchBtn();\n      }\n    }\n  };\n\n  ColorPicker.prototype.appendModeSwitchBtn = function () {\n    var modeSwitcher = this.createElement('button', {\n      className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH,\n      attrs: {\n        title: this.l10n.getConstant('ModeSwitcher')\n      }\n    });\n    select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n  };\n\n  ColorPicker.prototype.createDragTooltip = function () {\n    var _this = this;\n\n    var tooltip = new Tooltip({\n      opensOn: 'Custom',\n      showTipPointer: false,\n      cssClass: 'e-color-picker-tooltip',\n      beforeOpen: function (args) {\n        _this.tooltipEle = args.element;\n      },\n      animation: {\n        open: {\n          effect: 'None'\n        },\n        close: {\n          effect: 'None'\n        }\n      }\n    });\n    tooltip.createElement = this.createElement;\n    tooltip.appendTo(this.container);\n    tooltip.open(this.container);\n    this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n    select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', {\n      className: 'e-tip-transparent'\n    }));\n  };\n\n  ColorPicker.prototype.getTooltipInst = function () {\n    return getInstance(this.container, Tooltip);\n  };\n\n  ColorPicker.prototype.setTooltipOffset = function (value) {\n    this.getTooltipInst().offsetY = value;\n  };\n\n  ColorPicker.prototype.toggleDisabled = function (enable) {\n    enable ? this.getWrapper().classList.add(DISABLED) : this.getWrapper().classList.remove(DISABLED);\n\n    if (this.showButtons) {\n      [].slice.call(selectAll('.e-btn', this.container)).forEach(function (ele) {\n        enable ? attributes(ele, {\n          'disabled': ''\n        }) : ele.removeAttribute('disabled');\n      });\n    }\n  };\n\n  ColorPicker.prototype.convertToRgbString = function (rgb) {\n    return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n  };\n\n  ColorPicker.prototype.convertToHsvString = function (hsv) {\n    return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n  };\n\n  ColorPicker.prototype.updateHsv = function () {\n    this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n    this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n    this.setHandlerPosition();\n  };\n\n  ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.hsvToRgb.apply(this, this.hsv);\n    var cValue = this.rgbToHex(this.rgb);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.updateInput(cValue);\n    this.triggerEvent(cValue, pValue, rgba, isKey);\n  };\n\n  ColorPicker.prototype.updateInput = function (value) {\n    var wrapper = this.getWrapper();\n\n    if (!wrapper.classList.contains(HIDEVALUE)) {\n      if (!wrapper.classList.contains(HIDEHEX)) {\n        Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n      }\n\n      if (!wrapper.classList.contains(HIDERGBA)) {\n        if (this.isRgb) {\n          this.updateValue(this.rgb, false);\n        } else {\n          this.updateValue(this.hsv, false);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.updatePreview = function (value) {\n    if (this.enableOpacity) {\n      this.updateOpacitySliderBg();\n    }\n\n    select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n    select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n  };\n\n  ColorPicker.prototype.getDragHandler = function () {\n    return select('.' + HANDLER, this.container);\n  };\n\n  ColorPicker.prototype.removeTileSelection = function () {\n    var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n    selectedEle.forEach(function (ele) {\n      ele.classList.remove(SELECT);\n      ele.setAttribute('aria-selected', 'false');\n    });\n  };\n\n  ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n    return value.slice(value.indexOf('(') + 1, value.indexOf(')')).split(',').map(function (n, i) {\n      return i !== 3 ? parseInt(n, 10) : parseFloat(n);\n    });\n  };\n  /**\n   * To get color value in specified type.\n   * @param value - Specify the color value.\n   * @param type - Specify the type to which the specified color needs to be converted.\n   * @method getValue\n   * @return {string}\n   */\n\n\n  ColorPicker.prototype.getValue = function (value, type) {\n    if (!value) {\n      value = this.value;\n    }\n\n    type = !type ? 'hex' : type.toLowerCase();\n\n    if (value[0] === 'r') {\n      var cValue = this.convertRgbToNumberArray(value);\n\n      if (type === 'hex' || type === 'hexa') {\n        var hex = this.rgbToHex(cValue);\n        return type === 'hex' ? hex.slice(0, 7) : hex;\n      } else {\n        if (type === 'hsv') {\n          return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n        } else {\n          if (type === 'hsva') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n          } else {\n            return 'null';\n          }\n        }\n      }\n    } else {\n      if (value[0] === 'h') {\n        var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n\n        if (type === 'rgba') {\n          return this.convertToRgbString(cValue);\n        } else {\n          if (type === 'hex' || type === 'hexa') {\n            var hex = this.rgbToHex(cValue);\n            return type === 'hex' ? hex.slice(0, 7) : hex;\n          } else {\n            if (type === 'rgb') {\n              return this.convertToRgbString(cValue.slice(0, 3));\n            } else {\n              return 'null';\n            }\n          }\n        }\n      } else {\n        value = this.roundValue(value);\n        var rgb = this.hexToRgb(value);\n\n        if (type === 'rgb' || type === 'hsv') {\n          rgb = rgb.slice(0, 3);\n        }\n\n        if (type === 'rgba' || type === 'rgb') {\n          return this.convertToRgbString(rgb);\n        } else {\n          if (type === 'hsva' || type === 'hsv') {\n            return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n          } else {\n            if (type === 'hex') {\n              return value.slice(0, 7);\n            } else {\n              if (type === 'a') {\n                return rgb[3].toString();\n              } else {\n                return 'null';\n              }\n            }\n          }\n        }\n      }\n    }\n  };\n  /**\n   * To show/hide ColorPicker popup based on current state of the SplitButton.\n   * @method toggle\n   * @return {void}\n   */\n\n\n  ColorPicker.prototype.toggle = function () {\n    this.container.parentElement.classList.contains('e-popup-close') ? this.splitBtn.toggle() : this.closePopup(null);\n  };\n  /**\n   * Get component name.\n   * @returns string\n   * @private\n   */\n\n\n  ColorPicker.prototype.getModuleName = function () {\n    return 'colorpicker';\n  };\n  /**\n   * Gets the properties to be maintained in the persisted state.\n   * @return {string}\n   */\n\n\n  ColorPicker.prototype.getPersistData = function () {\n    return this.addOnPersist(['value']);\n  };\n\n  ColorPicker.prototype.wireEvents = function () {\n    if (this.isPicker()) {\n      var dragHandler = this.getDragHandler();\n      EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n      EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n\n      if (this.modeSwitcher || this.showButtons) {\n        this.addCtrlSwitchEvent();\n      }\n\n      EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n    } else {\n      EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n      EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n    }\n  };\n\n  ColorPicker.prototype.formResetHandler = function () {\n    this.value = this.initialInputValue;\n    attributes(this.element, {\n      'value': this.initialInputValue\n    });\n  };\n\n  ColorPicker.prototype.addCtrlSwitchEvent = function () {\n    EventHandler.add(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler, this);\n  };\n\n  ColorPicker.prototype.pickerKeyDown = function (e) {\n    switch (e.keyCode) {\n      case 39:\n        this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n        break;\n\n      case 37:\n        this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n        break;\n\n      case 38:\n        this.handlerDragPosition(2, 1, e);\n        break;\n\n      case 40:\n        this.handlerDragPosition(2, -1, e);\n        break;\n\n      case 13:\n        e.preventDefault();\n        var cValue = this.rgbToHex(this.rgb);\n        this.enterKeyHandler(cValue, e);\n    }\n  };\n\n  ColorPicker.prototype.enterKeyHandler = function (value, e) {\n    this.triggerChangeEvent(value);\n\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    }\n  };\n\n  ColorPicker.prototype.closePopup = function (e) {\n    var _this = this;\n\n    var beforeCloseArgs = {\n      element: this.container,\n      event: e,\n      cancel: false\n    };\n    this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n      if (!observedcloseArgs.cancel) {\n        _this.splitBtn.toggle();\n\n        _this.onPopupClose();\n      }\n    });\n  };\n\n  ColorPicker.prototype.triggerChangeEvent = function (value) {\n    var hex = value.slice(0, 7);\n    this.trigger('change', {\n      currentValue: {\n        hex: hex,\n        rgba: this.convertToRgbString(this.rgb)\n      },\n      previousValue: {\n        hex: this.value.slice(0, 7),\n        rgba: this.convertToRgbString(this.hexToRgb(this.value))\n      },\n      value: this.enableOpacity ? value : hex\n    });\n\n    if (this.enableOpacity) {\n      this.setProperties({\n        'value': value\n      }, true);\n    } else {\n      this.setProperties({\n        'value': hex\n      }, true);\n    }\n\n    this.element.value = hex ? hex : '#000000';\n  };\n\n  ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n    e.preventDefault();\n    this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n\n    if (this.hsv[prob] < 0) {\n      this.hsv[prob] = 0;\n    }\n\n    this.updateHsv();\n    this.convertToOtherFormat(true);\n  };\n\n  ColorPicker.prototype.handlerDown = function (e) {\n    e.preventDefault();\n    var x;\n    var y;\n\n    if (e.type === 'mousedown') {\n      this.clientX = Math.abs(e.pageX - pageXOffset);\n      this.clientY = Math.abs(e.pageY - pageYOffset);\n      this.setTooltipOffset(8);\n    } else {\n      this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n      this.setTooltipOffset(-8);\n    }\n\n    this.setHsv(this.clientX, this.clientY);\n    this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getDragHandler().focus();\n    EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n    EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n  };\n\n  ColorPicker.prototype.handlerMove = function (e) {\n    if (e.type !== 'touchmove') {\n      e.preventDefault();\n    }\n\n    var x;\n    var y;\n\n    if (e.type === 'mousemove') {\n      x = Math.abs(e.pageX - pageXOffset);\n      y = Math.abs(e.pageY - pageYOffset);\n    } else {\n      x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n      y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n    }\n\n    this.setHsv(x, y);\n    var dragHandler = this.getDragHandler();\n    var left = parseInt(dragHandler.style.left, 10);\n    var top = parseInt(dragHandler.style.top, 10);\n    this.updateHsv();\n    this.convertToOtherFormat();\n    this.getTooltipInst().refresh(dragHandler);\n\n    if (!this.tooltipEle.style.transform) {\n      if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n        select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n        dragHandler.style.transition = 'none';\n\n        if (!this.inline) {\n          this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n        }\n\n        this.tooltipEle.style.transform = 'rotate(45deg)';\n        dragHandler.classList.add('e-hide-handler');\n      }\n    }\n  };\n\n  ColorPicker.prototype.setHsv = function (clientX, clientY) {\n    var ele = select('.' + HSVAREA, this.container);\n    var position = ele.getBoundingClientRect();\n\n    if (this.enableRtl) {\n      clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n    } else {\n      clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n    }\n\n    clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n    this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight - Math.max(0, Math.min(ele.offsetHeight, clientY - ele.offsetTop))) / ele.offsetHeight) * 10) / 10;\n    this.hsv[1] = Math.round(Number(100 * Math.max(0, Math.min(ele.offsetWidth, clientX - ele.offsetLeft)) / ele.offsetWidth) * 10) / 10;\n  };\n\n  ColorPicker.prototype.handlerEnd = function (e) {\n    if (e.type !== 'touchend') {\n      e.preventDefault();\n    }\n\n    EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n    EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n    var dragHandler = this.getDragHandler();\n    select('.' + HSVAREA, this.container).style.cursor = '';\n\n    if (this.tooltipEle.style.transform) {\n      this.tooltipEle.style.transform = '';\n      dragHandler.classList.remove('e-hide-handler');\n    }\n\n    if (!this.inline && !this.showButtons) {\n      this.closePopup(e);\n    }\n  };\n\n  ColorPicker.prototype.btnClickHandler = function (e) {\n    var target = e.target;\n\n    if (closest(target, '.' + MODESWITCH)) {\n      e.stopPropagation();\n      this.switchToPalette();\n    } else {\n      if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n        this.ctrlBtnClick(target, e);\n      }\n    }\n  };\n\n  ColorPicker.prototype.switchToPalette = function () {\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n    this.unWireEvents();\n    this.destroyOtherComp();\n    detach(select('.e-slider-preview', this.container));\n\n    if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n      remove(select('.' + INPUTWRAPPER, this.container));\n    }\n\n    detach(this.getHsvContainer());\n    this.createPalette();\n    this.firstPaletteFocus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Palette'\n    });\n  };\n\n  ColorPicker.prototype.refreshPopupPos = function () {\n    if (!this.inline) {\n      var popupEle = this.getPopupEle();\n      popupEle.style.left = formatUnit(0 + pageXOffset);\n      popupEle.style.top = formatUnit(0 + pageYOffset);\n      this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n    }\n  };\n\n  ColorPicker.prototype.formatSwitchHandler = function (e) {\n    var target = e.target.parentElement;\n\n    if (this.isRgb) {\n      this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n      this.isRgb = false;\n    } else {\n      this.updateValue(this.rgb, true, 2);\n      this.isRgb = true;\n    }\n  };\n\n  ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n    var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n    var inst;\n\n    for (var i = 0, len = clsName.length; i < len; i++) {\n      inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n      inst.value = Math.round(value[i]);\n\n      if (format) {\n        inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n        inst.max = max ? max[i] : 255;\n      }\n\n      inst.dataBind();\n    }\n  };\n\n  ColorPicker.prototype.previewHandler = function (e) {\n    var target = e.target;\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n\n    if (!this.rgb[3]) {\n      this.rgb[3] = 1;\n    }\n\n    var cValue = this.rgbToHex(this.rgb);\n    var hsv = this.rgbToHsv.apply(this, this.rgb);\n\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n    }\n\n    this.setHsvContainerBg(hsv[0]);\n\n    if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n      this.opacitySlider.setProperties({\n        'value': hsv[3] * 100\n      }, true);\n      this.opacitySlider.refresh();\n      this.updateOpacitySliderBg();\n    }\n\n    this.hsv = hsv;\n    this.setHandlerPosition();\n    this.updateInput(cValue);\n    select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n    this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n  };\n\n  ColorPicker.prototype.paletteClickHandler = function (e) {\n    e.preventDefault();\n    var target = e.target;\n\n    if (target.classList.contains(TILE)) {\n      this.removeTileSelection();\n      this.addTileSelection(target);\n\n      if (target.classList.contains(NOCOLOR)) {\n        this.noColorTile();\n      } else {\n        var cValue = target.getAttribute('aria-label');\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hexToRgb(this.roundValue(cValue));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n\n        if (this.getWrapper().classList.contains(SHOWVALUE)) {\n          this.updateInput(cValue);\n        }\n\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n      }\n\n      if (!this.inline && !this.showButtons) {\n        this.closePopup(e);\n      }\n    } else {\n      if (closest(target, '.' + MODESWITCH)) {\n        this.switchToPicker();\n      } else {\n        if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n          this.ctrlBtnClick(target, e);\n        } else {\n          if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n            this.formatSwitchHandler(e);\n          }\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.noColorTile = function (isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var pValue = this.rgbToHex(this.rgb);\n    this.rgb = [];\n    this.hsv = [];\n    this.triggerEvent('', pValue, '', isKey);\n  };\n\n  ColorPicker.prototype.switchToPicker = function () {\n    var wrapper = this.getWrapper();\n    this.trigger('beforeModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n    this.unWireEvents();\n    [].slice.call(selectAll('.' + PALETTES, this.container)).forEach(function (ele) {\n      detach(ele);\n    });\n\n    if (wrapper.classList.contains(SHOWVALUE)) {\n      detach(select('.' + INPUTWRAPPER, this.container));\n    }\n\n    this.container.style.width = '';\n    var grpEle = select('.e-custom-palette', this.container);\n\n    if (this.presetColors) {\n      remove(grpEle);\n    }\n\n    this.createPicker();\n    this.getDragHandler().focus();\n    this.createInput();\n    this.refreshPopupPos();\n    this.wireEvents();\n    this.trigger('onModeSwitch', {\n      element: this.container,\n      mode: 'Picker'\n    });\n  };\n\n  ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n    if (ele.classList.contains(APPLY)) {\n      var cValue = this.rgbToHex(this.rgb);\n      this.triggerChangeEvent(cValue);\n    }\n\n    if (!this.inline) {\n      this.closePopup(e);\n      this.splitBtn.element.focus();\n    }\n  };\n\n  ColorPicker.prototype.paletteKeyDown = function (e) {\n    var target = e.target;\n\n    if (!target.classList.contains(PALETTES)) {\n      return;\n    }\n\n    var selectedEle;\n    var idx;\n    var tiles = [].slice.call(selectAll('.' + TILE, target));\n    var prevSelectedEle = tiles.filter(function (tile) {\n      return tile.classList.contains('e-selected');\n    }).pop();\n\n    switch (!e.altKey && e.keyCode) {\n      case 39:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)] : tiles[this.enableRtl ? tiles.length - 1 : 0];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 37:\n        e.preventDefault();\n        selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)] : tiles[this.enableRtl ? 0 : tiles.length - 1];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 38:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n        selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 40:\n        e.preventDefault();\n        idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n\n        if (tiles[idx]) {\n          selectedEle = tiles[idx];\n        } else {\n          idx %= tiles.length;\n          idx += tiles[tiles.length - 1].parentElement.childElementCount;\n          selectedEle = tiles[idx];\n        }\n\n        this.keySelectionChanges(selectedEle);\n        break;\n\n      case 13:\n        e.preventDefault();\n\n        if (prevSelectedEle) {\n          var cValue = prevSelectedEle.getAttribute('aria-label');\n          this.enterKeyHandler(cValue ? cValue : '', e);\n        }\n\n    }\n  };\n\n  ColorPicker.prototype.keySelectionChanges = function (newEle) {\n    this.removeTileSelection();\n    this.addTileSelection(newEle);\n\n    if (newEle.classList.contains(NOCOLOR)) {\n      this.noColorTile(true);\n    } else {\n      var cValue = newEle.getAttribute('aria-label');\n      var pValue = this.rgbToHex(this.rgb);\n      this.rgb = this.hexToRgb(cValue);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n\n      if (this.getWrapper().classList.contains(SHOWVALUE)) {\n        this.updateInput(cValue);\n      }\n\n      this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n    }\n  };\n\n  ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n    items = Array.prototype.slice.call(items);\n    var n = items.length;\n    var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n    var idx = items.indexOf(element);\n    idx += cIdx;\n    idx < 0 ? idx += n + emptyCount : idx %= n + emptyCount;\n    return idx;\n  };\n\n  ColorPicker.prototype.inputHandler = function (e) {\n    var target = e.target;\n\n    if (!target.value.length) {\n      return;\n    }\n\n    var hsv;\n    var pValue;\n    var label = select('.e-float-text', target.parentElement).textContent;\n\n    switch (label) {\n      case 'HEX':\n        var value = '';\n\n        if (target.value[0] === '#' && target.value.length !== 5 || target.value[0] !== '#' && target.value.length !== 4) {\n          value = this.roundValue(target.value);\n        }\n\n        if (value.length === 9) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb = this.hexToRgb(value + value.substr(-2));\n          this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n        } else {\n          return;\n        }\n\n        break;\n\n      case 'R':\n        if (this.rgb[0] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[0] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'G':\n        if (this.rgb[1] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[1] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'B':\n        if (this.rgb[2] !== Number(target.value)) {\n          pValue = this.rgbToHex(this.rgb);\n          this.rgb[2] = Number(target.value);\n          hsv = this.rgbToHsv.apply(this, this.rgb);\n          this.inputValueChange(hsv, pValue);\n        }\n\n        break;\n\n      case 'H':\n        this.hueSlider.value = Number(target.value);\n        break;\n\n      case 'S':\n        if (this.hsv[1] !== Number(target.value)) {\n          this.hsv[1] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n\n        break;\n\n      case 'V':\n        if (this.hsv[2] !== Number(target.value)) {\n          this.hsv[2] = Number(target.value);\n          this.updateHsv();\n          this.convertToOtherFormat();\n        }\n\n        break;\n\n      case 'A':\n        this.opacitySlider.value = Number(target.value);\n        break;\n    }\n  };\n\n  ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n    if (hsv[0] !== this.hsv[0]) {\n      this.hueSlider.setProperties({\n        'value': hsv[0]\n      }, true);\n      this.hueSlider.refresh();\n      this.setHsvContainerBg(hsv[0]);\n    }\n\n    this.hsv = hsv;\n    var cValue = this.rgbToHex(this.rgb);\n    this.setHandlerPosition();\n    this.updateInput(value ? value : cValue);\n    var rgba = this.convertToRgbString(this.rgb);\n    this.updatePreview(rgba);\n    this.triggerEvent(cValue, pValue, rgba);\n  };\n\n  ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n    if (isKey === void 0) {\n      isKey = false;\n    }\n\n    var hex = cValue.slice(0, 7);\n\n    if (!this.showButtons && !isKey) {\n      this.trigger('change', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: this.value.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(this.value))\n        },\n        value: cValue\n      });\n      this.setProperties({\n        'value': cValue\n      }, true);\n      this.element.value = hex ? hex : '#000000';\n    } else {\n      this.trigger('select', {\n        currentValue: {\n          hex: hex,\n          rgba: rgba\n        },\n        previousValue: {\n          hex: pValue.slice(0, 7),\n          rgba: this.convertToRgbString(this.hexToRgb(pValue))\n        }\n      });\n    }\n  };\n  /**\n   * Removes the component from the DOM and detaches all its related event handlers.\n   * Also it maintains the initial input element from the DOM.\n   * @method destroy\n   * @return {void}\n   */\n\n\n  ColorPicker.prototype.destroy = function () {\n    var _this = this;\n\n    var wrapper = this.getWrapper();\n\n    _super.prototype.destroy.call(this);\n\n    ['tabindex', 'spellcheck'].forEach(function (attr) {\n      _this.element.removeAttribute(attr);\n    });\n\n    if (this.inline) {\n      this.unWireEvents();\n      this.destroyOtherComp();\n    } else {\n      if (this.isPopupOpen()) {\n        this.unWireEvents();\n        this.destroyOtherComp();\n      }\n\n      this.splitBtn.destroy();\n      this.splitBtn = null;\n    }\n\n    this.tileRipple();\n    this.tileRipple = null;\n    this.ctrlBtnRipple();\n    this.ctrlBtnRipple = null;\n\n    if (this.element.nextElementSibling) {\n      detach(this.element.nextElementSibling);\n    }\n\n    if (wrapper) {\n      wrapper.parentElement.insertBefore(this.element, wrapper);\n      detach(wrapper);\n    }\n\n    this.container = null;\n\n    if (this.formElement) {\n      EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n    }\n  };\n\n  ColorPicker.prototype.destroyOtherComp = function () {\n    if (this.isPicker()) {\n      this.hueSlider.destroy();\n\n      if (this.enableOpacity) {\n        this.opacitySlider.destroy();\n        this.opacitySlider = null;\n      }\n\n      this.hueSlider = null;\n      var tooltipInst = this.getTooltipInst();\n      tooltipInst.close();\n      tooltipInst.destroy();\n      this.tooltipEle = null;\n    }\n  };\n\n  ColorPicker.prototype.isPopupOpen = function () {\n    return this.getPopupEle().classList.contains('e-popup-open');\n  };\n\n  ColorPicker.prototype.unWireEvents = function () {\n    if (this.isPicker()) {\n      var wrapper = this.getWrapper();\n      var dragHandler = this.getDragHandler();\n      EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n      EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n\n      if (this.modeSwitcher || this.showButtons) {\n        EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n      }\n\n      EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n    } else {\n      EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n      EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n    }\n  };\n\n  ColorPicker.prototype.roundValue = function (value) {\n    if (!value) {\n      return '';\n    }\n\n    if (value[0] !== '#') {\n      value = '#' + value;\n    }\n\n    var len = value.length;\n\n    if (len === 4) {\n      value += 'f';\n      len = 5;\n    }\n\n    if (len === 5) {\n      var tempValue = '';\n\n      for (var i = 1, len_1 = value.length; i < len_1; i++) {\n        tempValue += value.charAt(i) + value.charAt(i);\n      }\n\n      value = '#' + tempValue;\n      len = 9;\n    }\n\n    if (len === 7) {\n      value += 'ff';\n    }\n\n    return value;\n  };\n\n  ColorPicker.prototype.hexToRgb = function (hex) {\n    if (!hex) {\n      return [];\n    }\n\n    hex = hex.trim();\n\n    if (hex.length !== 9) {\n      hex = this.roundValue(hex);\n    }\n\n    var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n    hex = hex.slice(1, 7);\n    var bigInt = parseInt(hex, 16);\n    var h = [];\n    h.push(bigInt >> 16 & 255);\n    h.push(bigInt >> 8 & 255);\n    h.push(bigInt & 255);\n    h.push(opacity);\n    return h;\n  };\n\n  ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n    if (this.rgb && !this.rgb.length) {\n      return [];\n    }\n\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var h;\n    var s;\n    var v = max;\n    var d = max - min;\n    s = max === 0 ? 0 : d / max;\n\n    if (max === min) {\n      h = 0;\n    } else {\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n\n        case g:\n          h = (b - r) / d + 2;\n          break;\n\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n\n      h /= 6;\n    }\n\n    var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n\n    if (!isNullOrUndefined(opacity)) {\n      hsv.push(opacity);\n    }\n\n    return hsv;\n  };\n\n  ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    s /= 100;\n    v /= 100;\n\n    if (s === 0) {\n      r = g = b = v;\n      return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n    }\n\n    h /= 60;\n    i = Math.floor(h);\n    f = h - i;\n    p = v * (1 - s);\n    q = v * (1 - s * f);\n    t = v * (1 - s * (1 - f));\n\n    switch (i) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n\n      default:\n        r = v;\n        g = p;\n        b = q;\n    }\n\n    var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n\n    if (!isNullOrUndefined(opacity)) {\n      rgb.push(opacity);\n    }\n\n    return rgb;\n  };\n\n  ColorPicker.prototype.rgbToHex = function (rgb) {\n    return rgb.length ? '#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) + (!isNullOrUndefined(rgb[3]) ? rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00' : '') : '';\n  };\n\n  ColorPicker.prototype.hex = function (x) {\n    return ('0' + x.toString(16)).slice(-2);\n  };\n\n  ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n    var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n\n    if (prop) {\n      if (ctrlSwitchWrapper) {\n        this.appendModeSwitchBtn();\n      } else {\n        this.createCtrlBtn();\n\n        if (this.isPicker() && !this.disabled) {\n          this.addCtrlSwitchEvent();\n        }\n      }\n    } else {\n      if (ctrlSwitchWrapper) {\n        if (this.showButtons) {\n          detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n        } else {\n          remove(ctrlSwitchWrapper);\n        }\n      }\n    }\n  };\n\n  ColorPicker.prototype.changeShowBtnProps = function (prop) {\n    var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n\n    if (prop) {\n      if (ctrlBtnWrapper) {\n        remove(ctrlBtnWrapper);\n      }\n\n      this.createCtrlBtn();\n\n      if (this.isPicker() && !this.disabled) {\n        this.addCtrlSwitchEvent();\n      }\n    } else {\n      if (this.modeSwitcher) {\n        detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n      } else {\n        remove(ctrlBtnWrapper);\n      }\n    }\n  };\n\n  ColorPicker.prototype.changeValueProp = function (newProp) {\n    if (this.isPicker()) {\n      this.rgb = this.hexToRgb(newProp);\n      this.hsv = this.rgbToHsv.apply(this, this.rgb);\n      this.setHandlerPosition();\n      detach(closest(this.hueSlider.element, '.e-slider-preview'));\n      this.createSlider();\n      this.setHsvContainerBg();\n      this.updateInput(newProp);\n\n      if (this.rgb.length === 4) {\n        this.updateOpacityInput(this.rgb[3] * 100);\n      }\n    } else {\n      this.removeTileSelection();\n      var ele = select('span[aria-label=\"' + this.roundValue(newProp) + '\"]', this.container);\n\n      if (ele) {\n        this.addTileSelection(ele);\n      }\n    }\n  };\n\n  ColorPicker.prototype.setInputEleProps = function (prop) {\n    remove(select('.' + INPUTWRAPPER, this.container));\n    this.createInput();\n  };\n\n  ColorPicker.prototype.changeDisabledProp = function (newProp) {\n    if (this.isPicker()) {\n      this.hueSlider.enabled = !newProp;\n      this.opacitySlider.enabled = !newProp;\n      this.setInputEleProps(newProp);\n    }\n\n    if (newProp) {\n      this.toggleDisabled(true);\n      this.unWireEvents();\n    } else {\n      this.toggleDisabled(false);\n      this.wireEvents();\n    }\n  };\n\n  ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n    var wrapper = this.getWrapper();\n    var popupWrapper = this.getPopupEle();\n\n    if (oldProp) {\n      removeClass([wrapper, popupWrapper], oldProp.split(' '));\n    }\n\n    if (newProp) {\n      addClass([wrapper, popupWrapper], newProp.split(' '));\n    }\n  };\n\n  ColorPicker.prototype.changeRtlProps = function (newProp) {\n    if (newProp) {\n      addClass([this.getWrapper()], 'e-rtl');\n    } else {\n      removeClass([this.getWrapper()], 'e-rtl');\n    }\n  };\n\n  ColorPicker.prototype.changePaletteProps = function () {\n    detach(this.container.children[0]);\n    this.container.style.width = '';\n    this.createPalette();\n  };\n\n  ColorPicker.prototype.changeOpacityProps = function (newProp) {\n    var wrapper = this.getWrapper();\n\n    if (newProp) {\n      removeClass([this.container.parentElement], HIDEOPACITY);\n      this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', {\n        className: 'e-opacity-slider'\n      })));\n\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        this.appendOpacityValue(select('.e-input-container', this.container));\n      }\n    } else {\n      addClass([this.container.parentElement], HIDEOPACITY);\n      this.opacitySlider.destroy();\n      remove(this.opacitySlider.element);\n      this.opacitySlider = null;\n\n      if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n        remove(select('.' + OPACITY, this.container).parentElement);\n      }\n    }\n  };\n  /**\n   * Called internally if any of the property value changed.\n   * @param  {ColorPickerModel} newProp\n   * @param  {ColorPickerModel} oldProp\n   * @returns void\n   * @private\n   */\n\n\n  ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n    var _this = this;\n\n    if (!isNullOrUndefined(newProp.value)) {\n      var value = this.roundValue(newProp.value);\n\n      if (value.length === 9) {\n        this.element.value = this.roundValue(value).slice(0, 7);\n        var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n\n        if (preview) {\n          preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n        }\n      } else {\n        this.value = oldProp.value;\n      }\n    }\n\n    if (!this.inline && isNullOrUndefined(newProp.inline)) {\n      var otherCompModel = ['disabled', 'enableRtl'];\n      this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n\n      if (!this.isPopupOpen()) {\n        this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n        this.changeRtlProps(newProp.enableRtl);\n        return;\n      }\n    }\n\n    var _loop_1 = function (prop) {\n      switch (prop) {\n        case 'inline':\n          if (newProp.inline) {\n            this_1.getWrapper().appendChild(this_1.container);\n            this_1.splitBtn.destroy();\n            detach(this_1.element.nextElementSibling);\n\n            if (!this_1.container.children.length) {\n              this_1.createWidget();\n            }\n          } else {\n            this_1.destroyOtherComp();\n            this_1.unWireEvents();\n            this_1.container.innerHTML = '';\n            this_1.createSplitBtn();\n          }\n\n          break;\n\n        case 'cssClass':\n          this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n          var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n          props = props.reduce(function (a, b) {\n            if (a.indexOf(b) < 0) {\n              a.push(b);\n            }\n\n            return a;\n          }, []);\n          var count_1 = 0;\n          props.forEach(function (cls) {\n            if (count_1 === 0 && (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n              var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n\n              if (inputWrap) {\n                remove(select('.' + INPUTWRAPPER, _this.container));\n              }\n\n              _this.createInput();\n\n              count_1++;\n            }\n          });\n          break;\n\n        case 'enableRtl':\n          if (this_1.isPicker()) {\n            this_1.hueSlider.enableRtl = newProp.enableRtl;\n\n            if (this_1.enableOpacity) {\n              this_1.opacitySlider.enableRtl = newProp.enableRtl;\n            }\n\n            this_1.setInputEleProps(newProp.enableRtl);\n          }\n\n          this_1.changeRtlProps(newProp.enableRtl);\n          break;\n\n        case 'disabled':\n          this_1.changeDisabledProp(newProp.disabled);\n          break;\n\n        case 'value':\n          if (this_1.value !== oldProp.value) {\n            this_1.changeValueProp(newProp.value);\n          }\n\n          break;\n\n        case 'showButtons':\n          this_1.changeShowBtnProps(newProp.showButtons);\n          break;\n\n        case 'mode':\n          if (newProp.mode === 'Picker') {\n            this_1.switchToPicker();\n          } else {\n            this_1.switchToPalette();\n          }\n\n          break;\n\n        case 'modeSwitcher':\n          this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n          break;\n\n        case 'columns':\n        case 'presetColors':\n          if (!this_1.isPicker()) {\n            this_1.changePaletteProps();\n          }\n\n          break;\n\n        case 'noColor':\n          if (newProp.noColor) {\n            if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n              this_1.setNoColor();\n            }\n          } else {\n            this_1.changePaletteProps();\n          }\n\n          break;\n\n        case 'enableOpacity':\n          this_1.changeOpacityProps(newProp.enableOpacity);\n          break;\n      }\n    };\n\n    var this_1 = this;\n\n    for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n      var prop = _a[_i];\n\n      _loop_1(prop);\n    }\n  };\n  /**\n   * Sets the focus to Colorpicker\n   * its native method\n   * @public\n   */\n\n\n  ColorPicker.prototype.focusIn = function () {\n    this.element.parentElement.focus();\n  };\n\n  __decorate([Property('#008000ff')], ColorPicker.prototype, \"value\", void 0);\n\n  __decorate([Property('')], ColorPicker.prototype, \"cssClass\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"disabled\", void 0);\n\n  __decorate([Property('Picker')], ColorPicker.prototype, \"mode\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"modeSwitcher\", void 0);\n\n  __decorate([Property(null)], ColorPicker.prototype, \"presetColors\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"showButtons\", void 0);\n\n  __decorate([Property(10)], ColorPicker.prototype, \"columns\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"inline\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"noColor\", void 0);\n\n  __decorate([Property(false)], ColorPicker.prototype, \"enablePersistence\", void 0);\n\n  __decorate([Property(true)], ColorPicker.prototype, \"enableOpacity\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"select\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"change\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeTileRender\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeOpen\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"open\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeClose\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"onModeSwitch\", void 0);\n\n  __decorate([Event()], ColorPicker.prototype, \"created\", void 0);\n\n  ColorPicker = __decorate([NotifyPropertyChanges], ColorPicker);\n  return ColorPicker;\n}(Component);\n\nexport { ColorPicker };","map":{"version":3,"sources":["/Users/ewong/Development/Whiteboard/node_modules/@syncfusion/ej2-inputs/src/color-picker/color-picker.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Component","Event","NotifyPropertyChanges","Property","Browser","closest","detach","EventHandler","getInstance","select","selectAll","formatUnit","addClass","attributes","classList","isNullOrUndefined","L10n","remove","removeClass","rippleEffect","SplitButton","getModel","Deferred","Tooltip","getZindexPartial","Popup","Input","NumericTextBox","Slider","APPLY","CANCEL","CURRENT","CONTAINER","CTRLBTN","CTRLSWITCH","DISABLED","FORMATSWITCH","HANDLER","HEX","HIDEHEX","HIDEOPACITY","HIDERGBA","HIDEVALUE","HIDEVALUESWITCH","HSVAREA","HSVCONTAINER","INPUTWRAPPER","MODESWITCH","NOCOLOR","OPACITY","PALETTES","PALETTECONTENT","PICKERCONTENT","PREVIEW","PREVIOUS","RTL","SHOWVALUE","SELECT","SPLITPREVIEW","TILE","presets","default","ColorPicker","_super","options","element","call","preRender","ele","formElement","add","formResetHandler","localeText","Apply","Cancel","ModeSwitcher","l10n","locale","getAttribute","setAttribute","id","render","initWrapper","inline","createWidget","createSplitBtn","enableOpacity","container","parentElement","renderComplete","wrapper","createElement","className","getModuleName","parentNode","insertBefore","appendChild","getWrapper","value","roundValue","toLowerCase","noColor","mode","slicedValue","slice","initialInputValue","setProperties","enableRtl","cssClass","split","tileRipple","selector","ctrlBtnRipple","createPalette","firstPaletteFocus","createPicker","getDragHandler","focus","isRgb","createInput","createCtrlBtn","disabled","wireEvents","toggleDisabled","isDevice","refreshPopupPos","_this","splitButton","splitBtn","iconCss","open","onOpen","bind","click","args","trigger","currentValue","hex","rgba","convertToRgbString","hexToRgb","previousValue","appendTo","preview","style","backgroundColor","popupEle","getPopupEle","popupInst","getPopupInst","relateTo","document","body","position","X","Y","targetType","collision","offsetY","zIndex","toString","bindCallBackEvent","beforeOpen","callBackPromise","observeOpenArgs","cancel","top","pageYOffset","left","pageXOffset","display","modal","Number","resolve","beforeClose","event","beforeCloseArgs","observedCloseArgs","onPopupClose","unWireEvents","destroyOtherComp","width","innerHTML","outerHTML","presetColors","paletteGroup","appendElement","keys","appendPalette","len","modeSwitcher","setNoColor","parseInt","getComputedStyle","borderBottomWidth","children","offsetWidth","rgb","hsv","rgbToHsv","apply","colors","refEle","palette","attrs","row","tile","roundedColor","columns","presetName","addTileSelection","noColorEle","querySelector","forEach","attr","removeAttribute","insertPos","hsvContainer","dragHandler","setHsvContainerBg","setHandlerPosition","createSlider","createDragTooltip","h","getHsvContainer","hsvToRgb","hsvArea","Math","abs","offsetHeight","sliderPreviewWrapper","createPreview","sliderWrapper","slider","hueSlider","min","max","enabled","change","hueChange","createOpacitySlider","opacitySlider","opacityChange","opacityBgTrack","updateOpacitySliderBg","direction","background","convertToOtherFormat","pValue","rgbToHex","cValue","updateOpacityInput","updatePreview","triggerEvent","contains","opacityTextBoxInst","dataBind","parentEle","previewContainer","colorValue","isPicker","createNumericInput","label","numericInput","placeholder","format","showSpinButton","floatLabelType","readonly","inputHandler","inputWrap","appendValueSwitchBtn","hexInput","properties","setValue","addEventListener","clsName","appendOpacityValue","targetEle","valueSwitchBtn","formatSwitchHandler","showButtons","setLocale","btnWrapper","controlBtnWrapper","getConstant","appendModeSwitchBtn","title","tooltip","opensOn","showTipPointer","tooltipEle","animation","effect","close","getTooltipInst","setTooltipOffset","enable","join","convertToHsvString","updateHsv","isKey","updateInput","substr","updateValue","removeTileSelection","selectedEle","convertRgbToNumberArray","indexOf","map","n","parseFloat","getValue","type","toggle","closePopup","getPersistData","addOnPersist","pickerKeyDown","handlerDown","addCtrlSwitchEvent","previewHandler","paletteClickHandler","paletteKeyDown","btnClickHandler","e","keyCode","handlerDragPosition","preventDefault","enterKeyHandler","triggerChangeEvent","observedcloseArgs","prob","ctrlKey","x","y","clientX","pageX","clientY","pageY","changedTouches","setHsv","transition","handlerMove","handlerEnd","refresh","transform","cursor","getBoundingClientRect","right","round","offsetTop","offsetLeft","stopPropagation","switchToPalette","ctrlBtnClick","refreshPosition","idx","inst","toUpperCase","noColorTile","switchToPicker","grpEle","tiles","prevSelectedEle","filter","pop","altKey","tilePosition","keySelectionChanges","childElementCount","newEle","items","cIdx","emptyCount","textContent","inputValueChange","destroy","isPopupOpen","nextElementSibling","tooltipInst","tempValue","len_1","charAt","trim","opacity","toFixed","bigInt","push","g","s","v","f","q","t","floor","changeModeSwitcherProp","prop","ctrlSwitchWrapper","changeShowBtnProps","ctrlBtnWrapper","changeValueProp","newProp","setInputEleProps","changeDisabledProp","changeCssClassProps","oldProp","popupWrapper","changeRtlProps","changePaletteProps","changeOpacityProps","onPropertyChanged","otherCompModel","_loop_1","this_1","props","concat","reduce","a","count_1","cls","_i","_a","focusIn"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Component, Event, NotifyPropertyChanges, Property } from '@syncfusion/ej2-base';\nimport { Browser, closest, detach, EventHandler, getInstance, select, selectAll, formatUnit } from '@syncfusion/ej2-base';\nimport { addClass, attributes, classList, isNullOrUndefined, L10n } from '@syncfusion/ej2-base';\nimport { remove, removeClass, rippleEffect } from '@syncfusion/ej2-base';\nimport { SplitButton, getModel } from '@syncfusion/ej2-splitbuttons';\nimport { Deferred } from '@syncfusion/ej2-splitbuttons';\nimport { Tooltip, getZindexPartial, Popup } from '@syncfusion/ej2-popups';\nimport { Input } from './../input/index';\nimport { NumericTextBox } from './../numerictextbox/index';\nimport { Slider } from './../slider/slider';\nvar APPLY = 'e-apply';\nvar CANCEL = 'e-cancel';\nvar CURRENT = 'e-current';\nvar CONTAINER = 'e-container';\nvar CTRLBTN = 'e-ctrl-btn';\nvar CTRLSWITCH = 'e-switch-ctrl-btn';\nvar DISABLED = 'e-disabled';\nvar FORMATSWITCH = 'e-value-switch-btn';\nvar HANDLER = 'e-handler';\nvar HEX = 'e-hex';\nvar HIDEHEX = 'e-hide-hex-value';\nvar HIDEOPACITY = 'e-hide-opacity';\nvar HIDERGBA = 'e-hide-switchable-value';\nvar HIDEVALUE = 'e-hide-value';\nvar HIDEVALUESWITCH = 'e-hide-valueswitcher';\nvar HSVAREA = 'e-hsv-color';\nvar HSVCONTAINER = 'e-hsv-container';\nvar INPUTWRAPPER = 'e-selected-value';\nvar MODESWITCH = 'e-mode-switch-btn';\nvar NOCOLOR = 'e-nocolor-item';\nvar OPACITY = 'e-opacity-value';\nvar PALETTES = 'e-palette';\nvar PALETTECONTENT = 'e-color-palette';\nvar PICKERCONTENT = 'e-color-picker';\nvar PREVIEW = 'e-preview-container';\nvar PREVIOUS = 'e-previous';\nvar RTL = 'e-rtl';\nvar SHOWVALUE = 'e-show-value';\nvar SELECT = 'e-selected';\nvar SPLITPREVIEW = 'e-split-preview';\nvar TILE = 'e-tile';\nvar presets = {\n    default: ['#000000', '#f44336', '#e91e63', '#9c27b0', '#673ab7', '#2196f3', '#03a9f4', '#00bcd4', '#009688', '#ffeb3b',\n        '#ffffff', '#ffebee', '#fce4ec', '#f3e5f5', '#ede7f6', '#e3f2fd', '#e1f5fe', '#e0f7fa', '#e0f2f1', '#fffde7',\n        '#f2f2f2', '#ffcdd2', '#f8bbd0', '#e1bee7', '#d1c4e9', '#bbdefb', '#b3e5fc', '#b2ebf2', '#b2dfdb', '#fff9c4',\n        '#e6e6e6', '#ef9a9a', '#f48fb1', '#ce93d8', '#b39ddb', '#90caf9', '#81d4fa', '#80deea', '#80cbc4', '#fff59d',\n        '#cccccc', '#e57373', '#f06292', '#ba68c8', '#9575cd', '#64b5f6', '#4fc3f7', '#4dd0e1', '#4db6ac', '#fff176',\n        '#b3b3b3', '#ef5350', '#ec407a', '#ab47bc', '#7e57c2', '#42a5f5', '#29b6f6', '#26c6da', '#26a69a', '#ffee58',\n        '#999999', '#e53935', '#d81b60', '#8e24aa', '#5e35b1', '#1e88e5', '#039be5', '#00acc1', '#00897b', '#fdd835',\n        '#808080', '#d32f2f', '#c2185b', '#7b1fa2', '#512da8', '#1976d2', '#0288d1', '#0097a7', '#00796b', '#fbc02d',\n        '#666666', '#c62828', '#ad1457', '#6a1b9a', '#4527a0', '#1565c0', '#0277bd', '#00838f', '#00695c', '#f9a825',\n        '#4d4d4d', '#b71c1c', '#880e4f', '#4a148c', '#311b92', '#0d47a1', '#01579b', '#006064', '#004d40', '#f57f17']\n};\n/**\n * ColorPicker component is a user interface to select and adjust color values. It provides supports for various\n * color specification like Red Green Blue, Hue Saturation Value and Hex codes.\n * ```html\n * <input type=\"color\" id=\"color-picker\">\n * ```\n * ```typescript\n * <script>\n *   let colorPickerObj: ColorPicker = new ColorPicker(null , \"#color-picker\");\n * </script>\n * ```\n */\nvar ColorPicker = /** @class */ (function (_super) {\n    __extends(ColorPicker, _super);\n    function ColorPicker(options, element) {\n        return _super.call(this, options, element) || this;\n    }\n    ColorPicker.prototype.preRender = function () {\n        var ele = this.element;\n        this.formElement = closest(this.element, 'form');\n        if (this.formElement) {\n            EventHandler.add(this.formElement, 'reset', this.formResetHandler, this);\n        }\n        var localeText = { Apply: 'Apply', Cancel: 'Cancel', ModeSwitcher: 'Switch Mode' };\n        this.l10n = new L10n('colorpicker', localeText, this.locale);\n        if (ele.getAttribute('ejs-for') && !ele.getAttribute('name')) {\n            ele.setAttribute('name', ele.id);\n        }\n    };\n    /**\n     * To Initialize the component rendering\n     * @private\n     */\n    ColorPicker.prototype.render = function () {\n        this.initWrapper();\n        if (this.inline) {\n            this.createWidget();\n        }\n        else {\n            this.createSplitBtn();\n        }\n        if (!this.enableOpacity) {\n            addClass([this.container.parentElement], HIDEOPACITY);\n        }\n        this.renderComplete();\n    };\n    ColorPicker.prototype.initWrapper = function () {\n        var wrapper = this.createElement('div', { className: 'e-' + this.getModuleName() + '-wrapper' });\n        this.element.parentNode.insertBefore(wrapper, this.element);\n        wrapper.appendChild(this.element);\n        attributes(this.element, { 'tabindex': '-1', 'spellcheck': 'false' });\n        this.container = this.createElement('div', { className: CONTAINER });\n        this.getWrapper().appendChild(this.container);\n        var value = this.value ? this.roundValue(this.value).toLowerCase() : '#008000ff';\n        if (this.noColor && this.mode === 'Palette' && this.value === '') {\n            value = '';\n        }\n        var slicedValue = value.slice(0, 7);\n        if (isNullOrUndefined(this.initialInputValue)) {\n            this.initialInputValue = slicedValue;\n        }\n        this.element.value = slicedValue;\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': slicedValue }, true);\n        }\n        if (this.enableRtl) {\n            wrapper.classList.add(RTL);\n        }\n        if (this.cssClass) {\n            addClass([wrapper], this.cssClass.split(' '));\n        }\n        this.tileRipple = rippleEffect(this.container, { selector: '.' + TILE });\n        this.ctrlBtnRipple = rippleEffect(this.container, { selector: '.e-btn' });\n    };\n    ColorPicker.prototype.getWrapper = function () {\n        return this.element.parentElement;\n    };\n    ColorPicker.prototype.createWidget = function () {\n        if (this.mode === 'Palette') {\n            this.createPalette();\n            if (!this.inline) {\n                this.firstPaletteFocus();\n            }\n        }\n        else {\n            this.createPicker();\n            if (!this.inline) {\n                this.getDragHandler().focus();\n            }\n        }\n        this.isRgb = true;\n        this.createInput();\n        this.createCtrlBtn();\n        if (!this.disabled) {\n            this.wireEvents();\n        }\n        if (this.inline && this.disabled) {\n            this.toggleDisabled(true);\n        }\n        if (Browser.isDevice) {\n            this.refreshPopupPos();\n        }\n    };\n    ColorPicker.prototype.createSplitBtn = function () {\n        var _this = this;\n        var splitButton = this.createElement('button', { className: 'e-split-colorpicker' });\n        this.getWrapper().appendChild(splitButton);\n        this.splitBtn = new SplitButton({\n            iconCss: 'e-selected-color',\n            target: this.container,\n            disabled: this.disabled,\n            enableRtl: this.enableRtl,\n            open: this.onOpen.bind(this),\n            click: function (args) {\n                _this.trigger('change', {\n                    currentValue: { hex: _this.value.slice(0, 7), rgba: _this.convertToRgbString(_this.hexToRgb(_this.value)) },\n                    previousValue: { hex: null, rgba: null }, value: _this.value\n                });\n            }\n        });\n        this.splitBtn.createElement = this.createElement;\n        this.splitBtn.appendTo(splitButton);\n        var preview = this.createElement('span', { className: SPLITPREVIEW });\n        select('.e-selected-color', splitButton).appendChild(preview);\n        preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(this.value));\n        var popupEle = this.getPopupEle();\n        addClass([popupEle], 'e-colorpicker-popup');\n        if (this.cssClass) {\n            addClass([popupEle], this.cssClass.split(' '));\n        }\n        if (Browser.isDevice) {\n            var popupInst = this.getPopupInst();\n            popupInst.relateTo = document.body;\n            popupInst.position = { X: 'center', Y: 'center' };\n            popupInst.targetType = 'container';\n            popupInst.collision = { X: 'fit', Y: 'fit' };\n            popupInst.offsetY = 4;\n            popupEle.style.zIndex = getZindexPartial(this.splitBtn.element).toString();\n        }\n        this.bindCallBackEvent();\n    };\n    ColorPicker.prototype.onOpen = function (args) {\n        this.trigger('open', { element: this.container });\n    };\n    ColorPicker.prototype.getPopupInst = function () {\n        return getInstance(this.getPopupEle(), Popup);\n    };\n    ColorPicker.prototype.bindCallBackEvent = function () {\n        var _this = this;\n        this.splitBtn.beforeOpen = function (args) {\n            var callBackPromise = new Deferred();\n            _this.trigger('beforeOpen', args, function (observeOpenArgs) {\n                if (!observeOpenArgs.cancel) {\n                    var popupEle = _this.getPopupEle();\n                    popupEle.style.top = formatUnit(0 + pageYOffset);\n                    popupEle.style.left = formatUnit(0 + pageXOffset);\n                    popupEle.style.display = 'block';\n                    _this.createWidget();\n                    popupEle.style.display = '';\n                    if (Browser.isDevice) {\n                        _this.modal = _this.createElement('div');\n                        _this.modal.className = 'e-' + _this.getModuleName() + ' e-modal';\n                        _this.modal.style.display = 'none';\n                        document.body.insertBefore(_this.modal, popupEle);\n                        document.body.className += ' e-colorpicker-overflow';\n                        _this.modal.style.display = 'block';\n                        _this.modal.style.zIndex = (Number(popupEle.style.zIndex) - 1).toString();\n                    }\n                }\n                args.cancel = observeOpenArgs.cancel;\n                callBackPromise.resolve(observeOpenArgs);\n            });\n            return callBackPromise;\n        };\n        this.splitBtn.beforeClose = function (args) {\n            var callBackPromise = new Deferred();\n            if (!isNullOrUndefined(args.event)) {\n                var beforeCloseArgs = { element: _this.container, event: args.event, cancel: false };\n                _this.trigger('beforeClose', beforeCloseArgs, function (observedCloseArgs) {\n                    if (Browser.isDevice && args.event.target === _this.modal) {\n                        observedCloseArgs.cancel = true;\n                    }\n                    if (!observedCloseArgs.cancel) {\n                        _this.onPopupClose();\n                    }\n                    args.cancel = observedCloseArgs.cancel;\n                    callBackPromise.resolve(observedCloseArgs);\n                });\n            }\n            else {\n                callBackPromise.resolve(args);\n            }\n            return callBackPromise;\n        };\n    };\n    ColorPicker.prototype.onPopupClose = function () {\n        this.unWireEvents();\n        this.destroyOtherComp();\n        this.container.style.width = '';\n        select('.' + SPLITPREVIEW, this.splitBtn.element).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n        this.container.innerHTML = '';\n        removeClass([this.container], [PICKERCONTENT, PALETTECONTENT]);\n        if (Browser.isDevice && this.modal) {\n            removeClass([document.body], 'e-colorpicker-overflow');\n            this.modal.style.display = 'none';\n            this.modal.outerHTML = '';\n            this.modal = null;\n        }\n    };\n    ColorPicker.prototype.createPalette = function () {\n        classList(this.container, [PALETTECONTENT], [PICKERCONTENT]);\n        if (this.presetColors) {\n            var paletteGroup = this.createElement('div', { className: 'e-custom-palette' });\n            this.appendElement(paletteGroup);\n            var keys = Object.keys(this.presetColors);\n            if (keys.length === 1) {\n                this.appendPalette(this.presetColors[keys[0]], keys[0], paletteGroup);\n            }\n            else {\n                for (var i = 0, len = keys.length; i < len; i++) {\n                    this.appendPalette(this.presetColors[keys[i]], keys[i], paletteGroup);\n                }\n            }\n            if (selectAll('.e-row', paletteGroup).length > 10) {\n                addClass([paletteGroup], 'e-palette-group');\n            }\n        }\n        else {\n            this.appendPalette(presets.default, 'default');\n        }\n        if (this.mode === 'Palette' && !this.modeSwitcher && this.noColor) {\n            this.setNoColor();\n        }\n        var width = parseInt(getComputedStyle(this.container).borderBottomWidth, 10);\n        this.container.style.width = formatUnit(this.container.children[0].offsetWidth + width + width);\n        this.rgb = this.hexToRgb(this.roundValue(this.value));\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n    };\n    ColorPicker.prototype.firstPaletteFocus = function () {\n        if (!select('.' + SELECT, this.container.children[0])) {\n            selectAll('.' + PALETTES, this.container)[0].focus();\n        }\n    };\n    ColorPicker.prototype.appendPalette = function (colors, key, refEle) {\n        var palette = this.createElement('div', { className: PALETTES, attrs: { 'tabindex': '0' } });\n        if (refEle) {\n            refEle.appendChild(palette);\n        }\n        else {\n            this.appendElement(palette);\n        }\n        var row;\n        var tile;\n        var roundedColor;\n        for (var i = 0, len = colors.length; i < len; i++) {\n            if (i === 0 || i % this.columns === 0) {\n                row = this.createElement('div', {\n                    className: 'e-row', attrs: { 'role': 'row' }\n                });\n                palette.appendChild(row);\n            }\n            roundedColor = this.roundValue(colors[i]).toLowerCase();\n            tile = this.createElement('span', {\n                className: TILE, attrs: { 'role': 'gridcell', 'aria-label': roundedColor, 'aria-selected': 'false' }\n            });\n            this.trigger('beforeTileRender', { element: tile, presetName: key, value: colors[i] });\n            row.appendChild(tile);\n            if (this.value === roundedColor) {\n                this.addTileSelection(tile);\n                palette.focus();\n            }\n            tile.style.backgroundColor = this.convertToRgbString(this.hexToRgb(roundedColor));\n        }\n    };\n    ColorPicker.prototype.setNoColor = function () {\n        var noColorEle = this.container.querySelector('.e-row').children[0];\n        noColorEle.classList.add(NOCOLOR);\n        if (!this.value) {\n            noColorEle.classList.add(SELECT);\n            closest(noColorEle, '.' + PALETTES).focus();\n        }\n        ['aria-selected', 'aria-label'].forEach(function (attr) { noColorEle.removeAttribute(attr); });\n        noColorEle.style.backgroundColor = '';\n    };\n    ColorPicker.prototype.appendElement = function (ele, insertPos) {\n        if (insertPos === void 0) { insertPos = 0; }\n        var refEle = this.container.children[insertPos];\n        refEle ? this.container.insertBefore(ele, refEle) : this.container.appendChild(ele);\n    };\n    ColorPicker.prototype.addTileSelection = function (ele) {\n        ele.classList.add(SELECT);\n        ele.setAttribute('aria-selected', 'true');\n    };\n    ColorPicker.prototype.createPicker = function () {\n        classList(this.container, [PICKERCONTENT], [PALETTECONTENT]);\n        var hsvContainer = this.createElement('div', { className: HSVCONTAINER });\n        this.appendElement(hsvContainer);\n        hsvContainer.appendChild(this.createElement('div', { className: HSVAREA }));\n        var dragHandler = this.createElement('span', { className: HANDLER, attrs: { 'tabindex': '0' } });\n        hsvContainer.appendChild(dragHandler);\n        this.rgb = this.hexToRgb(this.value);\n        this.hsv = this.rgbToHsv.apply(this, this.rgb);\n        this.setHsvContainerBg();\n        this.setHandlerPosition();\n        this.createSlider();\n        this.createDragTooltip();\n    };\n    ColorPicker.prototype.setHsvContainerBg = function (h) {\n        if (h === void 0) { h = this.hsv[0]; }\n        this.getHsvContainer().style.backgroundColor = this.convertToRgbString(this.hsvToRgb(h, 100, 100, 1));\n    };\n    ColorPicker.prototype.getHsvContainer = function () {\n        return select('.' + HSVCONTAINER, this.container);\n    };\n    ColorPicker.prototype.setHandlerPosition = function () {\n        var dragHandler = this.getDragHandler();\n        var hsvArea = select('.' + HSVAREA, this.container);\n        if (this.enableRtl) {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * Math.abs(100 - this.hsv[1]) / 100);\n        }\n        else {\n            dragHandler.style.left = formatUnit(hsvArea.offsetWidth * this.hsv[1] / 100);\n        }\n        dragHandler.style.top = formatUnit(hsvArea.offsetHeight * (100 - this.hsv[2]) / 100);\n    };\n    ColorPicker.prototype.createSlider = function () {\n        var sliderPreviewWrapper = this.createElement('div', { className: 'e-slider-preview' });\n        this.appendElement(sliderPreviewWrapper, 1);\n        this.createPreview(sliderPreviewWrapper);\n        var sliderWrapper = this.createElement('div', { className: 'e-colorpicker-slider' });\n        sliderPreviewWrapper.insertBefore(sliderWrapper, sliderPreviewWrapper.children[0]);\n        var slider = this.createElement('div', { className: 'e-hue-slider' });\n        sliderWrapper.appendChild(slider);\n        this.hueSlider = new Slider({\n            value: this.hsv[0],\n            min: 0,\n            max: 359,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.hueChange.bind(this)\n        });\n        this.hueSlider.createElement = this.createElement;\n        this.hueSlider.appendTo(slider);\n        if (this.enableOpacity) {\n            slider = this.createElement('div', { className: 'e-opacity-slider' });\n            sliderWrapper.appendChild(slider);\n            this.createOpacitySlider(slider);\n        }\n    };\n    ColorPicker.prototype.createOpacitySlider = function (slider) {\n        this.opacitySlider = new Slider({\n            value: this.rgb[3] * 100,\n            min: 0,\n            max: 100,\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            change: this.opacityChange.bind(this)\n        });\n        this.opacitySlider.createElement = this.createElement;\n        this.opacitySlider.appendTo(slider);\n        var opacityBgTrack = this.createElement('div', { className: 'e-opacity-empty-track' });\n        slider.appendChild(opacityBgTrack);\n        this.updateOpacitySliderBg();\n    };\n    ColorPicker.prototype.updateOpacitySliderBg = function () {\n        var direction = this.enableRtl ? 'to left' : 'to right';\n        select('.e-slider-track', this.opacitySlider.element).style.background =\n            'linear-gradient(' + direction + ', rgba(' + this.rgb.slice(0, 3) + ', 0) 0%, ' +\n                this.convertToRgbString(this.rgb.slice(0, 3)) + ' 100%)';\n    };\n    ColorPicker.prototype.hueChange = function (args) {\n        this.hsv[0] = args.value;\n        this.setHsvContainerBg();\n        this.convertToOtherFormat();\n    };\n    ColorPicker.prototype.opacityChange = function (args) {\n        var value = args.value;\n        var pValue = this.rgbToHex(this.rgb);\n        this.hsv[3] = value / 100;\n        this.rgb[3] = value / 100;\n        var cValue = this.rgbToHex(this.rgb);\n        this.updateOpacityInput(value);\n        var rgb = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgb);\n        this.triggerEvent(cValue, pValue, rgb);\n    };\n    ColorPicker.prototype.updateOpacityInput = function (value) {\n        if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n            var opacityTextBoxInst = getInstance(select('.' + OPACITY, this.container), NumericTextBox);\n            opacityTextBoxInst.value = value;\n            opacityTextBoxInst.dataBind();\n        }\n    };\n    ColorPicker.prototype.createPreview = function (parentEle) {\n        var previewContainer = this.createElement('div', { className: PREVIEW });\n        parentEle.appendChild(previewContainer);\n        var preview = this.createElement('span', { className: 'e-preview ' + CURRENT });\n        previewContainer.appendChild(preview);\n        var colorValue = this.convertToRgbString(this.rgb);\n        preview.style.backgroundColor = colorValue;\n        preview = this.createElement('span', { className: 'e-preview ' + PREVIOUS });\n        previewContainer.appendChild(preview);\n        preview.style.backgroundColor = colorValue;\n    };\n    ColorPicker.prototype.isPicker = function () {\n        return !this.container.classList.contains(PALETTECONTENT);\n    };\n    ColorPicker.prototype.getPopupEle = function () {\n        return this.container.parentElement;\n    };\n    ColorPicker.prototype.createNumericInput = function (element, value, label, max) {\n        var _this = this;\n        var numericInput = new NumericTextBox({\n            value: value,\n            placeholder: label,\n            min: 0,\n            max: max,\n            format: '###.##',\n            showSpinButton: false,\n            floatLabelType: 'Always',\n            enableRtl: this.enableRtl,\n            enabled: !this.disabled,\n            readonly: this.isPicker() ? false : true,\n            change: function (args) {\n                if (args.event) {\n                    _this.inputHandler(args.event);\n                }\n            }\n        });\n        numericInput.createElement = this.createElement;\n        numericInput.appendTo(element);\n    };\n    ColorPicker.prototype.createInput = function () {\n        var isPicker = this.isPicker();\n        var wrapper = this.getWrapper();\n        if ((isPicker && !wrapper.classList.contains(HIDEVALUE)) || (!isPicker && wrapper.classList.contains(SHOWVALUE))) {\n            var inputWrap = this.createElement('div', { className: INPUTWRAPPER });\n            isPicker ? this.appendElement(inputWrap, 2) : this.appendElement(inputWrap, 1);\n            var container = this.createElement('div', { className: 'e-input-container' });\n            inputWrap.appendChild(container);\n            if (!wrapper.classList.contains(HIDEVALUESWITCH)) {\n                this.appendValueSwitchBtn(inputWrap);\n            }\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                var hexInput = this.createElement('input', {\n                    className: HEX,\n                    attrs: { 'maxlength': '7', 'spellcheck': 'false' }\n                });\n                container.appendChild(hexInput);\n                Input.createInput({\n                    element: hexInput,\n                    floatLabelType: 'Always',\n                    properties: {\n                        placeholder: 'HEX',\n                        enableRtl: this.enableRtl,\n                        enabled: !this.disabled,\n                        readonly: this.isPicker() ? false : true\n                    }\n                }, this.createElement);\n                Input.setValue(this.value.slice(0, 7), hexInput);\n                hexInput.addEventListener('input', this.inputHandler.bind(this));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                var label = void 0;\n                var value = void 0;\n                if (this.isRgb) {\n                    label = 'RGB';\n                    value = this.rgb;\n                }\n                else {\n                    label = 'HSV';\n                    value = this.hsv;\n                }\n                var clsName = ['rh', 'gs', 'bv'];\n                for (var i = 0; i < 3; i++) {\n                    this.createNumericInput(container.appendChild(this.createElement('input', { className: 'e-' + clsName[i] + '-value' })), value[i], label[i], 255);\n                }\n                if (this.enableOpacity) {\n                    this.appendOpacityValue(container);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.appendOpacityValue = function (container) {\n        this.createNumericInput(container.appendChild(this.createElement('input', { className: OPACITY })), this.rgb[3] * 100, 'A', 100);\n    };\n    ColorPicker.prototype.appendValueSwitchBtn = function (targetEle) {\n        var valueSwitchBtn = this.createElement('button', {\n            className: 'e-icons e-css e-btn e-flat e-icon-btn ' + FORMATSWITCH\n        });\n        targetEle.appendChild(valueSwitchBtn);\n        if (this.isPicker() && !this.getWrapper().classList.contains(HIDERGBA)) {\n            valueSwitchBtn.addEventListener('click', this.formatSwitchHandler.bind(this));\n        }\n    };\n    ColorPicker.prototype.createCtrlBtn = function () {\n        if (this.modeSwitcher || this.showButtons) {\n            this.l10n.setLocale(this.locale);\n            var btnWrapper = this.createElement('div', { className: CTRLSWITCH });\n            this.container.appendChild(btnWrapper);\n            if (this.showButtons) {\n                var controlBtnWrapper = this.createElement('div', { className: CTRLBTN });\n                btnWrapper.appendChild(controlBtnWrapper);\n                var apply = this.l10n.getConstant('Apply');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: apply,\n                    className: 'e-btn e-css e-flat e-primary e-small ' + APPLY,\n                    attrs: { 'title': apply }\n                }));\n                var cancel = this.l10n.getConstant('Cancel');\n                controlBtnWrapper.appendChild(this.createElement('button', {\n                    innerHTML: cancel,\n                    className: 'e-btn e-css e-flat e-small ' + CANCEL,\n                    attrs: { 'title': cancel }\n                }));\n            }\n            if (this.modeSwitcher) {\n                this.appendModeSwitchBtn();\n            }\n        }\n    };\n    ColorPicker.prototype.appendModeSwitchBtn = function () {\n        var modeSwitcher = this.createElement('button', {\n            className: 'e-icons e-btn e-flat e-icon-btn ' + MODESWITCH, attrs: { title: this.l10n.getConstant('ModeSwitcher') }\n        });\n        select('.' + CTRLSWITCH, this.container).insertBefore(modeSwitcher, select('.' + CTRLBTN, this.container));\n    };\n    ColorPicker.prototype.createDragTooltip = function () {\n        var _this = this;\n        var tooltip = new Tooltip({\n            opensOn: 'Custom',\n            showTipPointer: false,\n            cssClass: 'e-color-picker-tooltip',\n            beforeOpen: function (args) {\n                _this.tooltipEle = args.element;\n            },\n            animation: { open: { effect: 'None' }, close: { effect: 'None' } }\n        });\n        tooltip.createElement = this.createElement;\n        tooltip.appendTo(this.container);\n        tooltip.open(this.container);\n        this.tooltipEle.style.zIndex = getZindexPartial(this.tooltipEle).toString();\n        select('.e-tip-content', this.tooltipEle).appendChild(this.createElement('div', { className: 'e-tip-transparent' }));\n    };\n    ColorPicker.prototype.getTooltipInst = function () {\n        return getInstance(this.container, Tooltip);\n    };\n    ColorPicker.prototype.setTooltipOffset = function (value) {\n        this.getTooltipInst().offsetY = value;\n    };\n    ColorPicker.prototype.toggleDisabled = function (enable) {\n        enable ? this.getWrapper().classList.add(DISABLED) : this.getWrapper().classList.remove(DISABLED);\n        if (this.showButtons) {\n            ([].slice.call(selectAll('.e-btn', this.container))).forEach(function (ele) {\n                enable ? attributes(ele, { 'disabled': '' }) : ele.removeAttribute('disabled');\n            });\n        }\n    };\n    ColorPicker.prototype.convertToRgbString = function (rgb) {\n        return rgb.length ? rgb.length === 4 ? 'rgba(' + rgb.join() + ')' : 'rgb(' + rgb.join() + ')' : '';\n    };\n    ColorPicker.prototype.convertToHsvString = function (hsv) {\n        return hsv.length === 4 ? 'hsva(' + hsv.join() + ')' : 'hsv(' + hsv.join() + ')';\n    };\n    ColorPicker.prototype.updateHsv = function () {\n        this.hsv[1] = this.hsv[1] > 100 ? 100 : this.hsv[1];\n        this.hsv[2] = this.hsv[2] > 100 ? 100 : this.hsv[2];\n        this.setHandlerPosition();\n    };\n    ColorPicker.prototype.convertToOtherFormat = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.hsvToRgb.apply(this, this.hsv);\n        var cValue = this.rgbToHex(this.rgb);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.updateInput(cValue);\n        this.triggerEvent(cValue, pValue, rgba, isKey);\n    };\n    ColorPicker.prototype.updateInput = function (value) {\n        var wrapper = this.getWrapper();\n        if (!wrapper.classList.contains(HIDEVALUE)) {\n            if (!wrapper.classList.contains(HIDEHEX)) {\n                Input.setValue(value.substr(0, 7), select('.' + HEX, this.container));\n            }\n            if (!wrapper.classList.contains(HIDERGBA)) {\n                if (this.isRgb) {\n                    this.updateValue(this.rgb, false);\n                }\n                else {\n                    this.updateValue(this.hsv, false);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.updatePreview = function (value) {\n        if (this.enableOpacity) {\n            this.updateOpacitySliderBg();\n        }\n        select('.e-tip-transparent', this.tooltipEle).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = value;\n        select('.' + PREVIEW + ' .' + PREVIOUS, this.container).style.backgroundColor\n            = this.convertToRgbString(this.hexToRgb(this.value));\n    };\n    ColorPicker.prototype.getDragHandler = function () {\n        return select('.' + HANDLER, this.container);\n    };\n    ColorPicker.prototype.removeTileSelection = function () {\n        var selectedEle = [].slice.call(selectAll('.' + SELECT, this.container.children[0]));\n        selectedEle.forEach(function (ele) {\n            ele.classList.remove(SELECT);\n            ele.setAttribute('aria-selected', 'false');\n        });\n    };\n    ColorPicker.prototype.convertRgbToNumberArray = function (value) {\n        return (value.slice(value.indexOf('(') + 1, value.indexOf(')'))).split(',').map(function (n, i) {\n            return (i !== 3) ? parseInt(n, 10) : parseFloat(n);\n        });\n    };\n    /**\n     * To get color value in specified type.\n     * @param value - Specify the color value.\n     * @param type - Specify the type to which the specified color needs to be converted.\n     * @method getValue\n     * @return {string}\n     */\n    ColorPicker.prototype.getValue = function (value, type) {\n        if (!value) {\n            value = this.value;\n        }\n        type = !type ? 'hex' : type.toLowerCase();\n        if (value[0] === 'r') {\n            var cValue = this.convertRgbToNumberArray(value);\n            if (type === 'hex' || type === 'hexa') {\n                var hex = this.rgbToHex(cValue);\n                return type === 'hex' ? hex.slice(0, 7) : hex;\n            }\n            else {\n                if (type === 'hsv') {\n                    return this.convertToHsvString(this.rgbToHsv.apply(this, cValue.slice(0, 3)));\n                }\n                else {\n                    if (type === 'hsva') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, cValue));\n                    }\n                    else {\n                        return 'null';\n                    }\n                }\n            }\n        }\n        else {\n            if (value[0] === 'h') {\n                var cValue = this.hsvToRgb.apply(this, this.convertRgbToNumberArray(value));\n                if (type === 'rgba') {\n                    return this.convertToRgbString(cValue);\n                }\n                else {\n                    if (type === 'hex' || type === 'hexa') {\n                        var hex = this.rgbToHex(cValue);\n                        return type === 'hex' ? hex.slice(0, 7) : hex;\n                    }\n                    else {\n                        if (type === 'rgb') {\n                            return this.convertToRgbString(cValue.slice(0, 3));\n                        }\n                        else {\n                            return 'null';\n                        }\n                    }\n                }\n            }\n            else {\n                value = this.roundValue(value);\n                var rgb = this.hexToRgb(value);\n                if (type === 'rgb' || type === 'hsv') {\n                    rgb = rgb.slice(0, 3);\n                }\n                if (type === 'rgba' || type === 'rgb') {\n                    return this.convertToRgbString(rgb);\n                }\n                else {\n                    if (type === 'hsva' || type === 'hsv') {\n                        return this.convertToHsvString(this.rgbToHsv.apply(this, rgb));\n                    }\n                    else {\n                        if (type === 'hex') {\n                            return value.slice(0, 7);\n                        }\n                        else {\n                            if (type === 'a') {\n                                return rgb[3].toString();\n                            }\n                            else {\n                                return 'null';\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    };\n    /**\n     * To show/hide ColorPicker popup based on current state of the SplitButton.\n     * @method toggle\n     * @return {void}\n     */\n    ColorPicker.prototype.toggle = function () {\n        this.container.parentElement.classList.contains('e-popup-close') ? this.splitBtn.toggle() : this.closePopup(null);\n    };\n    /**\n     * Get component name.\n     * @returns string\n     * @private\n     */\n    ColorPicker.prototype.getModuleName = function () {\n        return 'colorpicker';\n    };\n    /**\n     * Gets the properties to be maintained in the persisted state.\n     * @return {string}\n     */\n    ColorPicker.prototype.getPersistData = function () {\n        return this.addOnPersist(['value']);\n    };\n    ColorPicker.prototype.wireEvents = function () {\n        if (this.isPicker()) {\n            var dragHandler = this.getDragHandler();\n            EventHandler.add(dragHandler, 'keydown', this.pickerKeyDown, this);\n            EventHandler.add(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown, this);\n            if (this.modeSwitcher || this.showButtons) {\n                this.addCtrlSwitchEvent();\n            }\n            EventHandler.add(select('.' + PREVIOUS, this.container), 'click', this.previewHandler, this);\n        }\n        else {\n            EventHandler.add(this.container, 'click', this.paletteClickHandler, this);\n            EventHandler.add(this.container, 'keydown', this.paletteKeyDown, this);\n        }\n    };\n    ColorPicker.prototype.formResetHandler = function () {\n        this.value = this.initialInputValue;\n        attributes(this.element, { 'value': this.initialInputValue });\n    };\n    ColorPicker.prototype.addCtrlSwitchEvent = function () {\n        EventHandler.add(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler, this);\n    };\n    ColorPicker.prototype.pickerKeyDown = function (e) {\n        switch (e.keyCode) {\n            case 39:\n                this.handlerDragPosition(1, this.enableRtl ? -1 : 1, e);\n                break;\n            case 37:\n                this.handlerDragPosition(1, this.enableRtl ? 1 : -1, e);\n                break;\n            case 38:\n                this.handlerDragPosition(2, 1, e);\n                break;\n            case 40:\n                this.handlerDragPosition(2, -1, e);\n                break;\n            case 13:\n                e.preventDefault();\n                var cValue = this.rgbToHex(this.rgb);\n                this.enterKeyHandler(cValue, e);\n        }\n    };\n    ColorPicker.prototype.enterKeyHandler = function (value, e) {\n        this.triggerChangeEvent(value);\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.closePopup = function (e) {\n        var _this = this;\n        var beforeCloseArgs = { element: this.container, event: e, cancel: false };\n        this.trigger('beforeClose', beforeCloseArgs, function (observedcloseArgs) {\n            if (!observedcloseArgs.cancel) {\n                _this.splitBtn.toggle();\n                _this.onPopupClose();\n            }\n        });\n    };\n    ColorPicker.prototype.triggerChangeEvent = function (value) {\n        var hex = value.slice(0, 7);\n        this.trigger('change', {\n            currentValue: { hex: hex, rgba: this.convertToRgbString(this.rgb) },\n            previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) },\n            value: this.enableOpacity ? value : hex\n        });\n        if (this.enableOpacity) {\n            this.setProperties({ 'value': value }, true);\n        }\n        else {\n            this.setProperties({ 'value': hex }, true);\n        }\n        this.element.value = hex ? hex : '#000000';\n    };\n    ColorPicker.prototype.handlerDragPosition = function (prob, value, e) {\n        e.preventDefault();\n        this.hsv[prob] += value * (e.ctrlKey ? 1 : 3);\n        if (this.hsv[prob] < 0) {\n            this.hsv[prob] = 0;\n        }\n        this.updateHsv();\n        this.convertToOtherFormat(true);\n    };\n    ColorPicker.prototype.handlerDown = function (e) {\n        e.preventDefault();\n        var x;\n        var y;\n        if (e.type === 'mousedown') {\n            this.clientX = Math.abs(e.pageX - pageXOffset);\n            this.clientY = Math.abs(e.pageY - pageYOffset);\n            this.setTooltipOffset(8);\n        }\n        else {\n            this.clientX = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            this.clientY = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n            this.setTooltipOffset(-8);\n        }\n        this.setHsv(this.clientX, this.clientY);\n        this.getDragHandler().style.transition = 'left .4s cubic-bezier(.25, .8, .25, 1), top .4s cubic-bezier(.25, .8, .25, 1)';\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getDragHandler().focus();\n        EventHandler.add(document, 'mousemove touchmove', this.handlerMove, this);\n        EventHandler.add(document, 'mouseup touchend', this.handlerEnd, this);\n    };\n    ColorPicker.prototype.handlerMove = function (e) {\n        if (e.type !== 'touchmove') {\n            e.preventDefault();\n        }\n        var x;\n        var y;\n        if (e.type === 'mousemove') {\n            x = Math.abs(e.pageX - pageXOffset);\n            y = Math.abs(e.pageY - pageYOffset);\n        }\n        else {\n            x = Math.abs(e.changedTouches[0].pageX - pageXOffset);\n            y = Math.abs(e.changedTouches[0].pageY - pageYOffset);\n        }\n        this.setHsv(x, y);\n        var dragHandler = this.getDragHandler();\n        var left = parseInt(dragHandler.style.left, 10);\n        var top = parseInt(dragHandler.style.top, 10);\n        this.updateHsv();\n        this.convertToOtherFormat();\n        this.getTooltipInst().refresh(dragHandler);\n        if (!this.tooltipEle.style.transform) {\n            if (Math.abs(this.clientX - x) > 8 || Math.abs(this.clientY - y) > 8) {\n                select('.' + HSVAREA, this.container).style.cursor = 'pointer';\n                dragHandler.style.transition = 'none';\n                if (!this.inline) {\n                    this.tooltipEle.style.zIndex = (parseInt(this.getPopupEle().style.zIndex, 10) + 1).toString();\n                }\n                this.tooltipEle.style.transform = 'rotate(45deg)';\n                dragHandler.classList.add('e-hide-handler');\n            }\n        }\n    };\n    ColorPicker.prototype.setHsv = function (clientX, clientY) {\n        var ele = select('.' + HSVAREA, this.container);\n        var position = ele.getBoundingClientRect();\n        if (this.enableRtl) {\n            clientX = clientX > position.right ? 0 : Math.abs(clientX - position.right);\n        }\n        else {\n            clientX = clientX > position.left ? Math.abs(clientX - position.left) : 0;\n        }\n        clientY = clientY > position.top ? Math.abs(clientY - position.top) : 0;\n        this.hsv[2] = Math.round(Number(100 * (ele.offsetHeight -\n            Math.max(0, Math.min(ele.offsetHeight, (clientY - ele.offsetTop)))) / ele.offsetHeight) * 10) / 10;\n        this.hsv[1] =\n            Math.round(Number(100 * (Math.max(0, Math.min(ele.offsetWidth, (clientX - ele.offsetLeft)))) / ele.offsetWidth) * 10) / 10;\n    };\n    ColorPicker.prototype.handlerEnd = function (e) {\n        if (e.type !== 'touchend') {\n            e.preventDefault();\n        }\n        EventHandler.remove(document, 'mousemove touchmove', this.handlerMove);\n        EventHandler.remove(document, 'mouseup touchend', this.handlerEnd);\n        var dragHandler = this.getDragHandler();\n        select('.' + HSVAREA, this.container).style.cursor = '';\n        if (this.tooltipEle.style.transform) {\n            this.tooltipEle.style.transform = '';\n            dragHandler.classList.remove('e-hide-handler');\n        }\n        if (!this.inline && !this.showButtons) {\n            this.closePopup(e);\n        }\n    };\n    ColorPicker.prototype.btnClickHandler = function (e) {\n        var target = e.target;\n        if (closest(target, '.' + MODESWITCH)) {\n            e.stopPropagation();\n            this.switchToPalette();\n        }\n        else {\n            if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                this.ctrlBtnClick(target, e);\n            }\n        }\n    };\n    ColorPicker.prototype.switchToPalette = function () {\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Palette' });\n        this.unWireEvents();\n        this.destroyOtherComp();\n        detach(select('.e-slider-preview', this.container));\n        if (!this.getWrapper().classList.contains(HIDEVALUE)) {\n            remove(select('.' + INPUTWRAPPER, this.container));\n        }\n        detach(this.getHsvContainer());\n        this.createPalette();\n        this.firstPaletteFocus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Palette' });\n    };\n    ColorPicker.prototype.refreshPopupPos = function () {\n        if (!this.inline) {\n            var popupEle = this.getPopupEle();\n            popupEle.style.left = formatUnit(0 + pageXOffset);\n            popupEle.style.top = formatUnit(0 + pageYOffset);\n            this.getPopupInst().refreshPosition(this.splitBtn.element.parentElement);\n        }\n    };\n    ColorPicker.prototype.formatSwitchHandler = function (e) {\n        var target = e.target.parentElement;\n        if (this.isRgb) {\n            this.updateValue(this.hsv, true, 3, [360, 100, 100]);\n            this.isRgb = false;\n        }\n        else {\n            this.updateValue(this.rgb, true, 2);\n            this.isRgb = true;\n        }\n    };\n    ColorPicker.prototype.updateValue = function (value, format, idx, max) {\n        var clsName = ['e-rh-value', 'e-gs-value', 'e-bv-value'];\n        var inst;\n        for (var i = 0, len = clsName.length; i < len; i++) {\n            inst = getInstance(select('.' + clsName[i], this.container), NumericTextBox);\n            inst.value = Math.round(value[i]);\n            if (format) {\n                inst.placeholder = clsName[i].substr(idx, 1).toUpperCase();\n                inst.max = max ? max[i] : 255;\n            }\n            inst.dataBind();\n        }\n    };\n    ColorPicker.prototype.previewHandler = function (e) {\n        var target = e.target;\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = this.convertRgbToNumberArray(target.style.backgroundColor);\n        if (!this.rgb[3]) {\n            this.rgb[3] = 1;\n        }\n        var cValue = this.rgbToHex(this.rgb);\n        var hsv = this.rgbToHsv.apply(this, this.rgb);\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n        }\n        this.setHsvContainerBg(hsv[0]);\n        if (this.enableOpacity && hsv[3] !== this.hsv[3]) {\n            this.opacitySlider.setProperties({ 'value': hsv[3] * 100 }, true);\n            this.opacitySlider.refresh();\n            this.updateOpacitySliderBg();\n        }\n        this.hsv = hsv;\n        this.setHandlerPosition();\n        this.updateInput(cValue);\n        select('.' + PREVIEW + ' .' + CURRENT, this.container).style.backgroundColor = this.convertToRgbString(this.rgb);\n        this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n    };\n    ColorPicker.prototype.paletteClickHandler = function (e) {\n        e.preventDefault();\n        var target = e.target;\n        if (target.classList.contains(TILE)) {\n            this.removeTileSelection();\n            this.addTileSelection(target);\n            if (target.classList.contains(NOCOLOR)) {\n                this.noColorTile();\n            }\n            else {\n                var cValue = target.getAttribute('aria-label');\n                var pValue = this.rgbToHex(this.rgb);\n                this.rgb = this.hexToRgb(this.roundValue(cValue));\n                this.hsv = this.rgbToHsv.apply(this, this.rgb);\n                if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                    this.updateInput(cValue);\n                }\n                this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb));\n            }\n            if (!this.inline && !this.showButtons) {\n                this.closePopup(e);\n            }\n        }\n        else {\n            if (closest(target, '.' + MODESWITCH)) {\n                this.switchToPicker();\n            }\n            else {\n                if (target.classList.contains(APPLY) || target.classList.contains(CANCEL)) {\n                    this.ctrlBtnClick(target, e);\n                }\n                else {\n                    if (this.getWrapper().classList.contains(SHOWVALUE) && closest(target, '.' + FORMATSWITCH)) {\n                        this.formatSwitchHandler(e);\n                    }\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.noColorTile = function (isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var pValue = this.rgbToHex(this.rgb);\n        this.rgb = [];\n        this.hsv = [];\n        this.triggerEvent('', pValue, '', isKey);\n    };\n    ColorPicker.prototype.switchToPicker = function () {\n        var wrapper = this.getWrapper();\n        this.trigger('beforeModeSwitch', { element: this.container, mode: 'Picker' });\n        this.unWireEvents();\n        ([].slice.call(selectAll('.' + PALETTES, this.container))).forEach(function (ele) {\n            detach(ele);\n        });\n        if (wrapper.classList.contains(SHOWVALUE)) {\n            detach(select('.' + INPUTWRAPPER, this.container));\n        }\n        this.container.style.width = '';\n        var grpEle = select('.e-custom-palette', this.container);\n        if (this.presetColors) {\n            remove(grpEle);\n        }\n        this.createPicker();\n        this.getDragHandler().focus();\n        this.createInput();\n        this.refreshPopupPos();\n        this.wireEvents();\n        this.trigger('onModeSwitch', { element: this.container, mode: 'Picker' });\n    };\n    ColorPicker.prototype.ctrlBtnClick = function (ele, e) {\n        if (ele.classList.contains(APPLY)) {\n            var cValue = this.rgbToHex(this.rgb);\n            this.triggerChangeEvent(cValue);\n        }\n        if (!this.inline) {\n            this.closePopup(e);\n            this.splitBtn.element.focus();\n        }\n    };\n    ColorPicker.prototype.paletteKeyDown = function (e) {\n        var target = e.target;\n        if (!target.classList.contains(PALETTES)) {\n            return;\n        }\n        var selectedEle;\n        var idx;\n        var tiles = [].slice.call(selectAll('.' + TILE, target));\n        var prevSelectedEle = (tiles.filter(function (tile) { return tile.classList.contains('e-selected'); })).pop();\n        switch (!e.altKey && e.keyCode) {\n            case 39:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? -1 : 1)]\n                    : tiles[this.enableRtl ? tiles.length - 1 : 0];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 37:\n                e.preventDefault();\n                selectedEle = prevSelectedEle ? tiles[this.tilePosition(tiles, prevSelectedEle, this.enableRtl ? 1 : -1)]\n                    : tiles[this.enableRtl ? 0 : tiles.length - 1];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 38:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, -this.columns) : 0;\n                selectedEle = tiles[idx] ? tiles[idx] : tiles[idx - this.columns];\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 40:\n                e.preventDefault();\n                idx = prevSelectedEle ? this.tilePosition(tiles, prevSelectedEle, this.columns) : tiles.length - 1;\n                if (tiles[idx]) {\n                    selectedEle = tiles[idx];\n                }\n                else {\n                    idx %= tiles.length;\n                    idx += tiles[tiles.length - 1].parentElement.childElementCount;\n                    selectedEle = tiles[idx];\n                }\n                this.keySelectionChanges(selectedEle);\n                break;\n            case 13:\n                e.preventDefault();\n                if (prevSelectedEle) {\n                    var cValue = prevSelectedEle.getAttribute('aria-label');\n                    this.enterKeyHandler(cValue ? cValue : '', e);\n                }\n        }\n    };\n    ColorPicker.prototype.keySelectionChanges = function (newEle) {\n        this.removeTileSelection();\n        this.addTileSelection(newEle);\n        if (newEle.classList.contains(NOCOLOR)) {\n            this.noColorTile(true);\n        }\n        else {\n            var cValue = newEle.getAttribute('aria-label');\n            var pValue = this.rgbToHex(this.rgb);\n            this.rgb = this.hexToRgb(cValue);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            if (this.getWrapper().classList.contains(SHOWVALUE)) {\n                this.updateInput(cValue);\n            }\n            this.triggerEvent(cValue, pValue, this.convertToRgbString(this.rgb), true);\n        }\n    };\n    ColorPicker.prototype.tilePosition = function (items, element, cIdx) {\n        items = Array.prototype.slice.call(items);\n        var n = items.length;\n        var emptyCount = this.columns - items[n - 1].parentElement.childElementCount;\n        var idx = items.indexOf(element);\n        idx += cIdx;\n        idx < 0 ? idx += n + emptyCount : idx %= n + emptyCount;\n        return idx;\n    };\n    ColorPicker.prototype.inputHandler = function (e) {\n        var target = e.target;\n        if (!target.value.length) {\n            return;\n        }\n        var hsv;\n        var pValue;\n        var label = select('.e-float-text', target.parentElement).textContent;\n        switch (label) {\n            case 'HEX':\n                var value = '';\n                if ((target.value[0] === '#' && target.value.length !== 5) || (target.value[0] !== '#' && target.value.length !== 4)) {\n                    value = this.roundValue(target.value);\n                }\n                if (value.length === 9) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb = this.hexToRgb(value + value.substr(-2));\n                    this.inputValueChange(this.rgbToHsv.apply(this, this.rgb), pValue, target.value);\n                }\n                else {\n                    return;\n                }\n                break;\n            case 'R':\n                if (this.rgb[0] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[0] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'G':\n                if (this.rgb[1] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[1] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'B':\n                if (this.rgb[2] !== Number(target.value)) {\n                    pValue = this.rgbToHex(this.rgb);\n                    this.rgb[2] = Number(target.value);\n                    hsv = this.rgbToHsv.apply(this, this.rgb);\n                    this.inputValueChange(hsv, pValue);\n                }\n                break;\n            case 'H':\n                this.hueSlider.value = Number(target.value);\n                break;\n            case 'S':\n                if (this.hsv[1] !== Number(target.value)) {\n                    this.hsv[1] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'V':\n                if (this.hsv[2] !== Number(target.value)) {\n                    this.hsv[2] = Number(target.value);\n                    this.updateHsv();\n                    this.convertToOtherFormat();\n                }\n                break;\n            case 'A':\n                this.opacitySlider.value = Number(target.value);\n                break;\n        }\n    };\n    ColorPicker.prototype.inputValueChange = function (hsv, pValue, value) {\n        if (hsv[0] !== this.hsv[0]) {\n            this.hueSlider.setProperties({ 'value': hsv[0] }, true);\n            this.hueSlider.refresh();\n            this.setHsvContainerBg(hsv[0]);\n        }\n        this.hsv = hsv;\n        var cValue = this.rgbToHex(this.rgb);\n        this.setHandlerPosition();\n        this.updateInput(value ? value : cValue);\n        var rgba = this.convertToRgbString(this.rgb);\n        this.updatePreview(rgba);\n        this.triggerEvent(cValue, pValue, rgba);\n    };\n    ColorPicker.prototype.triggerEvent = function (cValue, pValue, rgba, isKey) {\n        if (isKey === void 0) { isKey = false; }\n        var hex = cValue.slice(0, 7);\n        if (!this.showButtons && !isKey) {\n            this.trigger('change', { currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: this.value.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(this.value)) }, value: cValue });\n            this.setProperties({ 'value': cValue }, true);\n            this.element.value = hex ? hex : '#000000';\n        }\n        else {\n            this.trigger('select', {\n                currentValue: { hex: hex, rgba: rgba },\n                previousValue: { hex: pValue.slice(0, 7), rgba: this.convertToRgbString(this.hexToRgb(pValue)) }\n            });\n        }\n    };\n    /**\n     * Removes the component from the DOM and detaches all its related event handlers.\n     * Also it maintains the initial input element from the DOM.\n     * @method destroy\n     * @return {void}\n     */\n    ColorPicker.prototype.destroy = function () {\n        var _this = this;\n        var wrapper = this.getWrapper();\n        _super.prototype.destroy.call(this);\n        ['tabindex', 'spellcheck'].forEach(function (attr) { _this.element.removeAttribute(attr); });\n        if (this.inline) {\n            this.unWireEvents();\n            this.destroyOtherComp();\n        }\n        else {\n            if (this.isPopupOpen()) {\n                this.unWireEvents();\n                this.destroyOtherComp();\n            }\n            this.splitBtn.destroy();\n            this.splitBtn = null;\n        }\n        this.tileRipple();\n        this.tileRipple = null;\n        this.ctrlBtnRipple();\n        this.ctrlBtnRipple = null;\n        if (this.element.nextElementSibling) {\n            detach(this.element.nextElementSibling);\n        }\n        if (wrapper) {\n            wrapper.parentElement.insertBefore(this.element, wrapper);\n            detach(wrapper);\n        }\n        this.container = null;\n        if (this.formElement) {\n            EventHandler.remove(this.formElement, 'reset', this.formResetHandler);\n        }\n    };\n    ColorPicker.prototype.destroyOtherComp = function () {\n        if (this.isPicker()) {\n            this.hueSlider.destroy();\n            if (this.enableOpacity) {\n                this.opacitySlider.destroy();\n                this.opacitySlider = null;\n            }\n            this.hueSlider = null;\n            var tooltipInst = this.getTooltipInst();\n            tooltipInst.close();\n            tooltipInst.destroy();\n            this.tooltipEle = null;\n        }\n    };\n    ColorPicker.prototype.isPopupOpen = function () {\n        return this.getPopupEle().classList.contains('e-popup-open');\n    };\n    ColorPicker.prototype.unWireEvents = function () {\n        if (this.isPicker()) {\n            var wrapper = this.getWrapper();\n            var dragHandler = this.getDragHandler();\n            EventHandler.remove(dragHandler, 'keydown', this.pickerKeyDown);\n            EventHandler.remove(this.getHsvContainer(), 'mousedown touchstart', this.handlerDown);\n            if (this.modeSwitcher || this.showButtons) {\n                EventHandler.remove(select('.' + CTRLSWITCH, this.container), 'click', this.btnClickHandler);\n            }\n            EventHandler.remove(select('.' + PREVIOUS, this.container), 'click', this.previewHandler);\n        }\n        else {\n            EventHandler.remove(this.container, 'click', this.paletteClickHandler);\n            EventHandler.remove(this.container, 'keydown', this.paletteKeyDown);\n        }\n    };\n    ColorPicker.prototype.roundValue = function (value) {\n        if (!value) {\n            return '';\n        }\n        if (value[0] !== '#') {\n            value = '#' + value;\n        }\n        var len = value.length;\n        if (len === 4) {\n            value += 'f';\n            len = 5;\n        }\n        if (len === 5) {\n            var tempValue = '';\n            for (var i = 1, len_1 = value.length; i < len_1; i++) {\n                tempValue += (value.charAt(i) + value.charAt(i));\n            }\n            value = '#' + tempValue;\n            len = 9;\n        }\n        if (len === 7) {\n            value += 'ff';\n        }\n        return value;\n    };\n    ColorPicker.prototype.hexToRgb = function (hex) {\n        if (!hex) {\n            return [];\n        }\n        hex = hex.trim();\n        if (hex.length !== 9) {\n            hex = this.roundValue(hex);\n        }\n        var opacity = Number((parseInt(hex.slice(-2), 16) / 255).toFixed(2));\n        hex = hex.slice(1, 7);\n        var bigInt = parseInt(hex, 16);\n        var h = [];\n        h.push((bigInt >> 16) & 255);\n        h.push((bigInt >> 8) & 255);\n        h.push(bigInt & 255);\n        h.push(opacity);\n        return h;\n    };\n    ColorPicker.prototype.rgbToHsv = function (r, g, b, opacity) {\n        if (this.rgb && !this.rgb.length) {\n            return [];\n        }\n        r /= 255;\n        g /= 255;\n        b /= 255;\n        var max = Math.max(r, g, b);\n        var min = Math.min(r, g, b);\n        var h;\n        var s;\n        var v = max;\n        var d = max - min;\n        s = max === 0 ? 0 : d / max;\n        if (max === min) {\n            h = 0;\n        }\n        else {\n            switch (max) {\n                case r:\n                    h = (g - b) / d + (g < b ? 6 : 0);\n                    break;\n                case g:\n                    h = (b - r) / d + 2;\n                    break;\n                case b:\n                    h = (r - g) / d + 4;\n                    break;\n            }\n            h /= 6;\n        }\n        var hsv = [Math.round(h * 360), Math.round(s * 1000) / 10, Math.round(v * 1000) / 10];\n        if (!isNullOrUndefined(opacity)) {\n            hsv.push(opacity);\n        }\n        return hsv;\n    };\n    ColorPicker.prototype.hsvToRgb = function (h, s, v, opacity) {\n        var r;\n        var g;\n        var b;\n        var i;\n        var f;\n        var p;\n        var q;\n        var t;\n        s /= 100;\n        v /= 100;\n        if (s === 0) {\n            r = g = b = v;\n            return [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), opacity];\n        }\n        h /= 60;\n        i = Math.floor(h);\n        f = h - i;\n        p = v * (1 - s);\n        q = v * (1 - s * f);\n        t = v * (1 - s * (1 - f));\n        switch (i) {\n            case 0:\n                r = v;\n                g = t;\n                b = p;\n                break;\n            case 1:\n                r = q;\n                g = v;\n                b = p;\n                break;\n            case 2:\n                r = p;\n                g = v;\n                b = t;\n                break;\n            case 3:\n                r = p;\n                g = q;\n                b = v;\n                break;\n            case 4:\n                r = t;\n                g = p;\n                b = v;\n                break;\n            default:\n                r = v;\n                g = p;\n                b = q;\n        }\n        var rgb = [Math.round(r * 255), Math.round(g * 255), Math.round(b * 255)];\n        if (!isNullOrUndefined(opacity)) {\n            rgb.push(opacity);\n        }\n        return rgb;\n    };\n    ColorPicker.prototype.rgbToHex = function (rgb) {\n        return rgb.length ? ('#' + this.hex(rgb[0]) + this.hex(rgb[1]) + this.hex(rgb[2]) +\n            (!isNullOrUndefined(rgb[3]) ? (rgb[3] !== 0 ? (Math.round(rgb[3] * 255) + 0x10000).toString(16).substr(-2) : '00') : '')) : '';\n    };\n    ColorPicker.prototype.hex = function (x) {\n        return ('0' + x.toString(16)).slice(-2);\n    };\n    ColorPicker.prototype.changeModeSwitcherProp = function (prop) {\n        var ctrlSwitchWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlSwitchWrapper) {\n                this.appendModeSwitchBtn();\n            }\n            else {\n                this.createCtrlBtn();\n                if (this.isPicker() && !this.disabled) {\n                    this.addCtrlSwitchEvent();\n                }\n            }\n        }\n        else {\n            if (ctrlSwitchWrapper) {\n                if (this.showButtons) {\n                    detach(select('.' + MODESWITCH, ctrlSwitchWrapper));\n                }\n                else {\n                    remove(ctrlSwitchWrapper);\n                }\n            }\n        }\n    };\n    ColorPicker.prototype.changeShowBtnProps = function (prop) {\n        var ctrlBtnWrapper = select('.' + CTRLSWITCH, this.container);\n        if (prop) {\n            if (ctrlBtnWrapper) {\n                remove(ctrlBtnWrapper);\n            }\n            this.createCtrlBtn();\n            if (this.isPicker() && !this.disabled) {\n                this.addCtrlSwitchEvent();\n            }\n        }\n        else {\n            if (this.modeSwitcher) {\n                detach(select('.' + CTRLBTN, ctrlBtnWrapper));\n            }\n            else {\n                remove(ctrlBtnWrapper);\n            }\n        }\n    };\n    ColorPicker.prototype.changeValueProp = function (newProp) {\n        if (this.isPicker()) {\n            this.rgb = this.hexToRgb(newProp);\n            this.hsv = this.rgbToHsv.apply(this, this.rgb);\n            this.setHandlerPosition();\n            detach(closest(this.hueSlider.element, '.e-slider-preview'));\n            this.createSlider();\n            this.setHsvContainerBg();\n            this.updateInput(newProp);\n            if (this.rgb.length === 4) {\n                this.updateOpacityInput(this.rgb[3] * 100);\n            }\n        }\n        else {\n            this.removeTileSelection();\n            var ele = select('span[aria-label=\"' + this.roundValue(newProp) + '\"]', this.container);\n            if (ele) {\n                this.addTileSelection(ele);\n            }\n        }\n    };\n    ColorPicker.prototype.setInputEleProps = function (prop) {\n        remove(select('.' + INPUTWRAPPER, this.container));\n        this.createInput();\n    };\n    ColorPicker.prototype.changeDisabledProp = function (newProp) {\n        if (this.isPicker()) {\n            this.hueSlider.enabled = !newProp;\n            this.opacitySlider.enabled = !newProp;\n            this.setInputEleProps(newProp);\n        }\n        if (newProp) {\n            this.toggleDisabled(true);\n            this.unWireEvents();\n        }\n        else {\n            this.toggleDisabled(false);\n            this.wireEvents();\n        }\n    };\n    ColorPicker.prototype.changeCssClassProps = function (newProp, oldProp) {\n        var wrapper = this.getWrapper();\n        var popupWrapper = this.getPopupEle();\n        if (oldProp) {\n            removeClass([wrapper, popupWrapper], oldProp.split(' '));\n        }\n        if (newProp) {\n            addClass([wrapper, popupWrapper], newProp.split(' '));\n        }\n    };\n    ColorPicker.prototype.changeRtlProps = function (newProp) {\n        if (newProp) {\n            addClass([this.getWrapper()], 'e-rtl');\n        }\n        else {\n            removeClass([this.getWrapper()], 'e-rtl');\n        }\n    };\n    ColorPicker.prototype.changePaletteProps = function () {\n        detach(this.container.children[0]);\n        this.container.style.width = '';\n        this.createPalette();\n    };\n    ColorPicker.prototype.changeOpacityProps = function (newProp) {\n        var wrapper = this.getWrapper();\n        if (newProp) {\n            removeClass([this.container.parentElement], HIDEOPACITY);\n            this.createOpacitySlider(select('.e-colorpicker-slider', this.container).appendChild(this.createElement('div', { className: 'e-opacity-slider' })));\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                this.appendOpacityValue(select('.e-input-container', this.container));\n            }\n        }\n        else {\n            addClass([this.container.parentElement], HIDEOPACITY);\n            this.opacitySlider.destroy();\n            remove(this.opacitySlider.element);\n            this.opacitySlider = null;\n            if (!wrapper.classList.contains(HIDEVALUE) && !wrapper.classList.contains(HIDERGBA)) {\n                remove(select('.' + OPACITY, this.container).parentElement);\n            }\n        }\n    };\n    /**\n     * Called internally if any of the property value changed.\n     * @param  {ColorPickerModel} newProp\n     * @param  {ColorPickerModel} oldProp\n     * @returns void\n     * @private\n     */\n    ColorPicker.prototype.onPropertyChanged = function (newProp, oldProp) {\n        var _this = this;\n        if (!isNullOrUndefined(newProp.value)) {\n            var value = this.roundValue(newProp.value);\n            if (value.length === 9) {\n                this.element.value = this.roundValue(value).slice(0, 7);\n                var preview = this.splitBtn && select('.' + SPLITPREVIEW, this.splitBtn.element);\n                if (preview) {\n                    preview.style.backgroundColor = this.convertToRgbString(this.hexToRgb(newProp.value));\n                }\n            }\n            else {\n                this.value = oldProp.value;\n            }\n        }\n        if (!this.inline && isNullOrUndefined(newProp.inline)) {\n            var otherCompModel = ['disabled', 'enableRtl'];\n            this.splitBtn.setProperties(getModel(newProp, otherCompModel));\n            if (!this.isPopupOpen()) {\n                this.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                this.changeRtlProps(newProp.enableRtl);\n                return;\n            }\n        }\n        var _loop_1 = function (prop) {\n            switch (prop) {\n                case 'inline':\n                    if (newProp.inline) {\n                        this_1.getWrapper().appendChild(this_1.container);\n                        this_1.splitBtn.destroy();\n                        detach(this_1.element.nextElementSibling);\n                        if (!this_1.container.children.length) {\n                            this_1.createWidget();\n                        }\n                    }\n                    else {\n                        this_1.destroyOtherComp();\n                        this_1.unWireEvents();\n                        this_1.container.innerHTML = '';\n                        this_1.createSplitBtn();\n                    }\n                    break;\n                case 'cssClass':\n                    this_1.changeCssClassProps(newProp.cssClass, oldProp.cssClass);\n                    var props = newProp.cssClass.split(' ').concat(oldProp.cssClass.split(' '));\n                    props = props.reduce(function (a, b) { if (a.indexOf(b) < 0) {\n                        a.push(b);\n                    } return a; }, []);\n                    var count_1 = 0;\n                    props.forEach(function (cls) {\n                        if (count_1 === 0 &&\n                            (cls === HIDEVALUE || cls === HIDEVALUESWITCH || cls === SHOWVALUE || cls === HIDEHEX || cls === HIDERGBA)) {\n                            var inputWrap = select('.' + INPUTWRAPPER, _this.container);\n                            if (inputWrap) {\n                                remove(select('.' + INPUTWRAPPER, _this.container));\n                            }\n                            _this.createInput();\n                            count_1++;\n                        }\n                    });\n                    break;\n                case 'enableRtl':\n                    if (this_1.isPicker()) {\n                        this_1.hueSlider.enableRtl = newProp.enableRtl;\n                        if (this_1.enableOpacity) {\n                            this_1.opacitySlider.enableRtl = newProp.enableRtl;\n                        }\n                        this_1.setInputEleProps(newProp.enableRtl);\n                    }\n                    this_1.changeRtlProps(newProp.enableRtl);\n                    break;\n                case 'disabled':\n                    this_1.changeDisabledProp(newProp.disabled);\n                    break;\n                case 'value':\n                    if (this_1.value !== oldProp.value) {\n                        this_1.changeValueProp(newProp.value);\n                    }\n                    break;\n                case 'showButtons':\n                    this_1.changeShowBtnProps(newProp.showButtons);\n                    break;\n                case 'mode':\n                    if (newProp.mode === 'Picker') {\n                        this_1.switchToPicker();\n                    }\n                    else {\n                        this_1.switchToPalette();\n                    }\n                    break;\n                case 'modeSwitcher':\n                    this_1.changeModeSwitcherProp(newProp.modeSwitcher);\n                    break;\n                case 'columns':\n                case 'presetColors':\n                    if (!this_1.isPicker()) {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'noColor':\n                    if (newProp.noColor) {\n                        if (this_1.mode === 'Palette' && !this_1.modeSwitcher) {\n                            this_1.setNoColor();\n                        }\n                    }\n                    else {\n                        this_1.changePaletteProps();\n                    }\n                    break;\n                case 'enableOpacity':\n                    this_1.changeOpacityProps(newProp.enableOpacity);\n                    break;\n            }\n        };\n        var this_1 = this;\n        for (var _i = 0, _a = Object.keys(newProp); _i < _a.length; _i++) {\n            var prop = _a[_i];\n            _loop_1(prop);\n        }\n    };\n    /**\n     * Sets the focus to Colorpicker\n     * its native method\n     * @public\n     */\n    ColorPicker.prototype.focusIn = function () {\n        this.element.parentElement.focus();\n    };\n    __decorate([\n        Property('#008000ff')\n    ], ColorPicker.prototype, \"value\", void 0);\n    __decorate([\n        Property('')\n    ], ColorPicker.prototype, \"cssClass\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"disabled\", void 0);\n    __decorate([\n        Property('Picker')\n    ], ColorPicker.prototype, \"mode\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"modeSwitcher\", void 0);\n    __decorate([\n        Property(null)\n    ], ColorPicker.prototype, \"presetColors\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"showButtons\", void 0);\n    __decorate([\n        Property(10)\n    ], ColorPicker.prototype, \"columns\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"inline\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"noColor\", void 0);\n    __decorate([\n        Property(false)\n    ], ColorPicker.prototype, \"enablePersistence\", void 0);\n    __decorate([\n        Property(true)\n    ], ColorPicker.prototype, \"enableOpacity\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"select\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"change\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeTileRender\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeOpen\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"open\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeClose\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"beforeModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"onModeSwitch\", void 0);\n    __decorate([\n        Event()\n    ], ColorPicker.prototype, \"created\", void 0);\n    ColorPicker = __decorate([\n        NotifyPropertyChanges\n    ], ColorPicker);\n    return ColorPicker;\n}(Component));\nexport { ColorPicker };\n"]},"metadata":{},"sourceType":"module"}