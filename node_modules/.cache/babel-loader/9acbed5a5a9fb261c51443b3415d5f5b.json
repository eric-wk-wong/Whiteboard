{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\n\nvar MonthAgenda =\n/** @class */\nfunction (_super) {\n  __extends(MonthAgenda, _super);\n  /**\n   * Constructor\n   */\n\n\n  function MonthAgenda(parent) {\n    var _this = _super.call(this, parent) || this;\n\n    _this.dayNameFormat = 'narrow';\n    _this.viewClass = 'e-month-agenda-view';\n    _this.agendaDates = {};\n    _this.agendaBase = new AgendaBase(parent);\n    _this.monthAgendaDate = new Date('' + parent.selectedDate);\n    return _this;\n  }\n\n  MonthAgenda.prototype.renderAppointmentContainer = function () {\n    if (this.parent.isServerRenderer()) {\n      this.setEventWrapperHeight();\n      return;\n    }\n\n    var contentArea = this.getContentAreaElement();\n    var wrapperContainer = createElement('div', {\n      className: cls.WRAPPER_CONTAINER_CLASS\n    });\n    contentArea.appendChild(wrapperContainer);\n    var appWrap = createElement('div', {\n      className: cls.APPOINTMENT_WRAP_CLASS\n    });\n    wrapperContainer.appendChild(appWrap);\n    this.appendAppContainer(appWrap);\n    this.setEventWrapperHeight();\n  };\n\n  MonthAgenda.prototype.getDayNameFormat = function () {\n    if (this.parent.isAdaptive) {\n      return 'narrow';\n    }\n\n    return 'abbreviated';\n  };\n\n  MonthAgenda.prototype.setEventWrapperHeight = function () {\n    var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n    var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n\n    if (resourceWrapper) {\n      headerHeight += resourceWrapper.offsetHeight;\n    }\n\n    var contentArea = this.getContentAreaElement().firstElementChild;\n    var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n    var availableHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n    var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n    var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n    wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availableHeight);\n  };\n\n  MonthAgenda.prototype.onDataReady = function (args) {\n    this.setEventWrapperHeight();\n    this.clearElements();\n    var eventCollection = args.processedData;\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n      eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n    }\n\n    this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n    var count = 0;\n\n    for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n      var date = _a[_i];\n      var filterData = this.appointmentFiltering(date);\n      var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n\n      if (filterData.length > 0) {\n        if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n          workCell.appendChild(createElement('div', {\n            className: cls.APPOINTMENT_INDICATOR_CLASS\n          }));\n        }\n\n        if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n          this.onEventRender(filterData, date);\n        }\n      }\n\n      count++;\n    }\n\n    this.parent.notify(events.eventsLoaded, {});\n  };\n\n  MonthAgenda.prototype.onCellClick = function (event) {\n    this.parent.quickPopup.quickPopupHide();\n    var filterData = this.appointmentFiltering(event.startTime);\n    this.parent.resetEventTemplates();\n    this.onEventRender(filterData, event.startTime);\n    this.parent.notify(events.eventsLoaded, {});\n    this.monthAgendaDate = new Date('' + event.startTime);\n  };\n\n  MonthAgenda.prototype.onEventRender = function (events, date) {\n    var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n    util.removeChildren(appWrap);\n\n    if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n      if (events.length > 0) {\n        var appContainer = createElement('div', {\n          className: cls.APPOINTMENT_CONTAINER_CLASS\n        });\n        appWrap.appendChild(this.agendaBase.createAgendaContentElement('data', events, appContainer));\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    } else {\n      if (events.length > 0) {\n        var table = this.createTableLayout();\n        var tBody = table.querySelector('tbody');\n        this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n        table.appendChild(tBody);\n        appWrap.appendChild(table);\n      } else {\n        this.appendAppContainer(appWrap);\n      }\n    }\n\n    this.agendaBase.wireEventActions();\n  };\n\n  MonthAgenda.prototype.appointmentFiltering = function (date) {\n    var dateStart = util.resetTime(new Date(date.getTime()));\n    var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n    return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n  };\n\n  MonthAgenda.prototype.clearElements = function () {\n    var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n\n    for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n      var appointmentIndicator = appointmentIndicators_1[_i];\n      remove(appointmentIndicator);\n    }\n\n    this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n  };\n\n  MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n    var app = createElement('div', {\n      className: cls.APPOINTMENT_CONTAINER_CLASS\n    });\n    addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n    app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n    util.removeChildren(appWrap);\n    appWrap.appendChild(app);\n  };\n\n  MonthAgenda.prototype.getNextPreviousDate = function (type) {\n    var selectedDate = this.parent.selectedDate;\n    var interval = type === 'next' ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n    var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n    var month = type === 'next' ? 2 : 0;\n    var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n    var date = lastDate >= this.monthAgendaDate.getDate() ? this.monthAgendaDate.getDate() : lastDate;\n    this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n    return this.monthAgendaDate;\n  };\n  /**\n   * Get module name.\n   */\n\n\n  MonthAgenda.prototype.getModuleName = function () {\n    return 'monthAgenda';\n  };\n\n  return MonthAgenda;\n}(Month);\n\nexport { MonthAgenda };","map":{"version":3,"sources":["/Users/jay/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/month-agenda.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","createElement","addClass","formatUnit","remove","AgendaBase","Month","util","events","cls","MonthAgenda","_super","parent","_this","call","dayNameFormat","viewClass","agendaDates","agendaBase","monthAgendaDate","Date","selectedDate","renderAppointmentContainer","isServerRenderer","setEventWrapperHeight","contentArea","getContentAreaElement","wrapperContainer","className","WRAPPER_CONTAINER_CLASS","appendChild","appWrap","APPOINTMENT_WRAP_CLASS","appendAppContainer","getDayNameFormat","isAdaptive","headerHeight","headerModule","getHeaderElement","offsetHeight","resourceWrapper","element","querySelector","RESOURCE_HEADER_TOOLBAR","firstElementChild","dateHeader","DATE_HEADER_WRAP_CLASS","availableHeight","eventWrapper","style","height","onDataReady","args","clearElements","eventCollection","processedData","uiStateValues","isGroupAdaptive","resource","resourceBase","lastResourceLevel","groupIndex","eventBase","filterEventsByResource","eventsProcessed","processAgendaEvents","count","_i","_a","renderDates","length","date","filterData","appointmentFiltering","workCell","querySelectorAll","WORK_CELLS_CLASS","APPOINTMENT_INDICATOR_CLASS","getTime","resetTime","onEventRender","notify","eventsLoaded","onCellClick","event","quickPopup","quickPopupHide","startTime","resetEventTemplates","removeChildren","activeViewOptions","group","resources","appContainer","APPOINTMENT_CONTAINER_CLASS","createAgendaContentElement","table","createTableLayout","tBody","calculateResourceTableElement","wireEventActions","dateStart","dateEnd","setTime","MS_PER_DAY","filterEvents","appointmentIndicators","slice","appointmentIndicators_1","appointmentIndicator","app","AGENDA_NO_EVENT_CLASS","innerHTML","localeObj","getConstant","getNextPreviousDate","type","interval","navigateDate","addMonths","month","lastDate","getFullYear","getMonth","getDate","getModuleName"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    }\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { createElement, addClass, formatUnit, remove } from '@syncfusion/ej2-base';\nimport { AgendaBase } from '../event-renderer/agenda-base';\nimport { Month } from './month';\nimport * as util from '../base/util';\nimport * as events from '../base/constant';\nimport * as cls from '../base/css-constant';\n/**\n * month agenda view\n */\nvar MonthAgenda = /** @class */ (function (_super) {\n    __extends(MonthAgenda, _super);\n    /**\n     * Constructor\n     */\n    function MonthAgenda(parent) {\n        var _this = _super.call(this, parent) || this;\n        _this.dayNameFormat = 'narrow';\n        _this.viewClass = 'e-month-agenda-view';\n        _this.agendaDates = {};\n        _this.agendaBase = new AgendaBase(parent);\n        _this.monthAgendaDate = new Date('' + parent.selectedDate);\n        return _this;\n    }\n    MonthAgenda.prototype.renderAppointmentContainer = function () {\n        if (this.parent.isServerRenderer()) {\n            this.setEventWrapperHeight();\n            return;\n        }\n        var contentArea = this.getContentAreaElement();\n        var wrapperContainer = createElement('div', { className: cls.WRAPPER_CONTAINER_CLASS });\n        contentArea.appendChild(wrapperContainer);\n        var appWrap = createElement('div', { className: cls.APPOINTMENT_WRAP_CLASS });\n        wrapperContainer.appendChild(appWrap);\n        this.appendAppContainer(appWrap);\n        this.setEventWrapperHeight();\n    };\n    MonthAgenda.prototype.getDayNameFormat = function () {\n        if (this.parent.isAdaptive) {\n            return 'narrow';\n        }\n        return 'abbreviated';\n    };\n    MonthAgenda.prototype.setEventWrapperHeight = function () {\n        var headerHeight = (this.parent.headerModule ? this.parent.headerModule.getHeaderElement().offsetHeight : 0) + 2;\n        var resourceWrapper = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n        if (resourceWrapper) {\n            headerHeight += resourceWrapper.offsetHeight;\n        }\n        var contentArea = this.getContentAreaElement().firstElementChild;\n        var dateHeader = this.element.querySelector('.' + cls.DATE_HEADER_WRAP_CLASS);\n        var availableHeight = this.parent.element.offsetHeight - headerHeight - dateHeader.offsetHeight - contentArea.offsetHeight;\n        var wrapperContainer = this.element.querySelector('.' + cls.WRAPPER_CONTAINER_CLASS);\n        var eventWrapper = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        wrapperContainer.style.height = eventWrapper.style.height = formatUnit(availableHeight);\n    };\n    MonthAgenda.prototype.onDataReady = function (args) {\n        this.setEventWrapperHeight();\n        this.clearElements();\n        var eventCollection = args.processedData;\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resource = this.parent.resourceBase.lastResourceLevel[this.parent.uiStateValues.groupIndex];\n            eventCollection = this.parent.eventBase.filterEventsByResource(resource, eventCollection);\n        }\n        this.parent.eventsProcessed = this.agendaBase.processAgendaEvents(eventCollection);\n        var count = 0;\n        for (var _i = 0, _a = this.renderDates; _i < _a.length; _i++) {\n            var date = _a[_i];\n            var filterData = this.appointmentFiltering(date);\n            var workCell = this.element.querySelectorAll('.' + cls.WORK_CELLS_CLASS)[count];\n            if (filterData.length > 0) {\n                if (!workCell.querySelector('.' + cls.APPOINTMENT_INDICATOR_CLASS)) {\n                    workCell.appendChild(createElement('div', { className: cls.APPOINTMENT_INDICATOR_CLASS }));\n                }\n                if (date.getTime() === util.resetTime(new Date(this.monthAgendaDate.getTime())).getTime()) {\n                    this.onEventRender(filterData, date);\n                }\n            }\n            count++;\n        }\n        this.parent.notify(events.eventsLoaded, {});\n    };\n    MonthAgenda.prototype.onCellClick = function (event) {\n        this.parent.quickPopup.quickPopupHide();\n        var filterData = this.appointmentFiltering(event.startTime);\n        this.parent.resetEventTemplates();\n        this.onEventRender(filterData, event.startTime);\n        this.parent.notify(events.eventsLoaded, {});\n        this.monthAgendaDate = new Date('' + event.startTime);\n    };\n    MonthAgenda.prototype.onEventRender = function (events, date) {\n        var appWrap = this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS);\n        util.removeChildren(appWrap);\n        if (this.parent.activeViewOptions.group.resources.length === 0 || this.parent.uiStateValues.isGroupAdaptive) {\n            if (events.length > 0) {\n                var appContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n                appWrap.appendChild(this.agendaBase.\n                    createAgendaContentElement('data', events, appContainer));\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        else {\n            if (events.length > 0) {\n                var table = this.createTableLayout();\n                var tBody = table.querySelector('tbody');\n                this.agendaBase.calculateResourceTableElement(tBody, 1, date);\n                table.appendChild(tBody);\n                appWrap.appendChild(table);\n            }\n            else {\n                this.appendAppContainer(appWrap);\n            }\n        }\n        this.agendaBase.wireEventActions();\n    };\n    MonthAgenda.prototype.appointmentFiltering = function (date) {\n        var dateStart = util.resetTime(new Date(date.getTime()));\n        var dateEnd = util.setTime(new Date(dateStart.getTime()), util.MS_PER_DAY);\n        return this.parent.eventBase.filterEvents(dateStart, dateEnd);\n    };\n    MonthAgenda.prototype.clearElements = function () {\n        var appointmentIndicators = [].slice.call(this.element.querySelectorAll('.' + cls.APPOINTMENT_INDICATOR_CLASS));\n        for (var _i = 0, appointmentIndicators_1 = appointmentIndicators; _i < appointmentIndicators_1.length; _i++) {\n            var appointmentIndicator = appointmentIndicators_1[_i];\n            remove(appointmentIndicator);\n        }\n        this.appendAppContainer(this.element.querySelector('.' + cls.APPOINTMENT_WRAP_CLASS));\n    };\n    MonthAgenda.prototype.appendAppContainer = function (appWrap) {\n        var app = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n        addClass([app], cls.AGENDA_NO_EVENT_CLASS);\n        app.innerHTML = this.parent.localeObj.getConstant('noEvents');\n        util.removeChildren(appWrap);\n        appWrap.appendChild(app);\n    };\n    MonthAgenda.prototype.getNextPreviousDate = function (type) {\n        var selectedDate = this.parent.selectedDate;\n        var interval = (type === 'next') ? this.parent.activeViewOptions.interval : -this.parent.activeViewOptions.interval;\n        var navigateDate = util.addMonths(this.parent.selectedDate, interval);\n        var month = (type === 'next') ? 2 : 0;\n        var lastDate = new Date(selectedDate.getFullYear(), selectedDate.getMonth() + month, 0).getDate();\n        var date = (lastDate >= this.monthAgendaDate.getDate()) ? this.monthAgendaDate.getDate() : lastDate;\n        this.monthAgendaDate = new Date(navigateDate.getFullYear(), navigateDate.getMonth(), date);\n        return this.monthAgendaDate;\n    };\n    /**\n     * Get module name.\n     */\n    MonthAgenda.prototype.getModuleName = function () {\n        return 'monthAgenda';\n    };\n    return MonthAgenda;\n}(Month));\nexport { MonthAgenda };\n"]},"metadata":{},"sourceType":"module"}