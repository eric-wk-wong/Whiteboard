{"ast":null,"code":"import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, isBlazor, EventHandler } from '@syncfusion/ej2-base';\nimport { getDateInMs, addDays, resetTime, WEEK_LENGTH, getWeekFirstDate, getOuterHeight, getScrollBarWidth, capitalizeFirstWord } from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\n\nexport var ViewHelper;\n\n(function (ViewHelper) {\n  ViewHelper.getDayName = function (proxy, date) {\n    return proxy.getDayNames('abbreviated')[date.getDay()];\n  };\n\n  ViewHelper.getDate = function (proxy, date) {\n    return proxy.globalize.formatDate(date, {\n      format: 'd',\n      calendar: proxy.getCalendarMode()\n    });\n  };\n\n  ViewHelper.getTime = function (proxy, date) {\n    if (proxy.isAdaptive) {\n      if (proxy.timeFormat === 'HH:mm' || proxy.timeFormat === 'HH.mm') {\n        return proxy.globalize.formatDate(date, {\n          format: 'H',\n          calendar: proxy.getCalendarMode()\n        });\n      }\n\n      return isBlazor() ? proxy.globalize.formatDate(date, {\n        format: 'h',\n        calendar: proxy.getCalendarMode()\n      }) : proxy.globalize.formatDate(date, {\n        skeleton: 'h',\n        calendar: proxy.getCalendarMode()\n      });\n    }\n\n    return proxy.getTimeString(date);\n  };\n\n  ViewHelper.getTimelineDate = function (proxy, date) {\n    var skeleton = isBlazor() ? 'M' : 'MMMd';\n    var text = proxy.globalize.formatDate(date, {\n      skeleton: skeleton,\n      calendar: proxy.getCalendarMode()\n    }) + ', ' + proxy.getDayNames('wide')[date.getDay()];\n    return capitalizeFirstWord(text, 'multiple');\n  };\n})(ViewHelper || (ViewHelper = {}));\n\nvar ViewBase =\n/** @class */\nfunction () {\n  /**\n   * Constructor\n   */\n  function ViewBase(parent) {\n    this.parent = parent;\n  }\n\n  ViewBase.prototype.isTimelineView = function () {\n    return this.parent.currentView.indexOf('Timeline') !== -1;\n  };\n\n  ViewBase.prototype.getContentRows = function () {\n    return [];\n  };\n\n  ViewBase.prototype.serverRenderLayout = function () {// Need only for layout server rendering\n  };\n\n  ViewBase.prototype.createEventTable = function (trCount) {\n    var eventTable = createElement('div', {\n      className: cls.EVENT_TABLE_CLASS\n    });\n    append(this.getEventRows(trCount), eventTable);\n    return eventTable;\n  };\n\n  ViewBase.prototype.getEventRows = function (trCount) {\n    var eventRows = [];\n    var eventContainer;\n\n    for (var row = 0; row < trCount; row++) {\n      eventContainer = createElement('div', {\n        className: cls.APPOINTMENT_CONTAINER_CLASS\n      });\n\n      if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n        eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n      }\n\n      eventRows.push(eventContainer);\n    }\n\n    return eventRows;\n  };\n\n  ViewBase.prototype.collapseRows = function (wrap) {\n    if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n      this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n      this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n    }\n  };\n\n  ViewBase.prototype.createTableLayout = function (className) {\n    var clsName = className || '';\n    var table = createElement('table', {\n      className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName\n    });\n    var tbody = createElement('tbody');\n    table.appendChild(tbody);\n    return table;\n  };\n\n  ViewBase.prototype.createColGroup = function (table, lastRow) {\n    var length = lastRow.length;\n\n    if (lastRow[0] && lastRow[0].colSpan) {\n      length = lastRow.map(function (value) {\n        return value.colSpan;\n      }).reduce(function (prev, next) {\n        return prev + next;\n      });\n    }\n\n    var colGroupEle = createElement('colgroup');\n\n    for (var i = 0; i < length; i++) {\n      colGroupEle.appendChild(createElement('col'));\n    }\n\n    prepend([colGroupEle], table);\n  };\n\n  ViewBase.prototype.getScrollXIndent = function (content) {\n    return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n  };\n\n  ViewBase.prototype.scrollTopPanel = function (target) {\n    this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n  };\n\n  ViewBase.prototype.scrollHeaderLabels = function (target) {\n    var _this = this;\n\n    var headerTable = this.element.querySelector('.e-date-header-wrap table');\n    var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n\n    var applyLeft = function (headerCells, isRtl) {\n      var currentCell;\n      var tdLeft = 0;\n      var colSpan = 0;\n      var hiddenLeft = isRtl ? target.scrollWidth - target.offsetWidth - target.scrollLeft : target.scrollLeft;\n\n      for (var i = 0; i < headerCells.length; i++) {\n        colSpan += parseInt(headerCells[i].getAttribute('colSpan'), 10);\n\n        if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n          currentCell = headerCells[i];\n          break;\n        }\n\n        tdLeft += headerCells[i].offsetWidth;\n      }\n\n      currentCell.children[0].style[isRtl ? 'right' : 'left'] = hiddenLeft - tdLeft + 'px';\n    };\n\n    var className = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n\n    for (var i = 0; i < className.length; i++) {\n      var headerCells = [].slice.call(this.element.querySelectorAll(className[i]));\n\n      if (headerCells.length > 0) {\n        headerCells.forEach(function (element) {\n          return element.children[0].style[_this.parent.enableRtl ? 'right' : 'left'] = '';\n        });\n        applyLeft(headerCells, this.parent.enableRtl);\n      }\n    }\n  };\n\n  ViewBase.prototype.addAttributes = function (td, element) {\n    if (td.template) {\n      append(td.template, element);\n    }\n\n    if (td.colSpan) {\n      element.setAttribute('colspan', td.colSpan.toString());\n    }\n\n    if (td.className) {\n      addClass([element], td.className);\n    }\n  };\n\n  ViewBase.prototype.getHeaderBarHeight = function () {\n    var headerBarHeight = 2;\n\n    if (this.parent.headerModule) {\n      headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n    }\n\n    if (this.parent.uiStateValues.isGroupAdaptive) {\n      var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n\n      if (resHeader) {\n        headerBarHeight += resHeader.offsetHeight;\n      }\n    }\n\n    return headerBarHeight;\n  };\n\n  ViewBase.prototype.renderPanel = function (type) {\n    if (type === cls.PREVIOUS_PANEL_CLASS || isBlazor()) {\n      prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n    } else {\n      this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n    }\n  };\n\n  ViewBase.prototype.setPanel = function (panel) {\n    this.element = panel;\n  };\n\n  ViewBase.prototype.getPanel = function () {\n    return this.element;\n  };\n\n  ViewBase.prototype.getDatesHeaderElement = function () {\n    return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n  };\n\n  ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n    // Here getDateSlots only need in vertical and month views\n    return [];\n  };\n\n  ViewBase.prototype.generateColumnLevels = function () {\n    // Here generateColumnLevels only need in vertical and month views\n    return [];\n  };\n\n  ViewBase.prototype.getColumnLevels = function () {\n    return this.colLevels;\n  };\n\n  ViewBase.prototype.highlightCurrentTime = function () {// Here showTimeIndicator functionalities\n  };\n\n  ViewBase.prototype.startDate = function () {\n    return this.renderDates[0];\n  };\n\n  ViewBase.prototype.endDate = function () {\n    return addDays(this.renderDates[this.renderDates.length - 1], 1);\n  };\n\n  ViewBase.prototype.getStartHour = function () {\n    var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n\n    if (isNullOrUndefined(startHour)) {\n      startHour = new Date(2000, 0, 0, 0);\n    }\n\n    return startHour;\n  };\n\n  ViewBase.prototype.getEndHour = function () {\n    var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n\n    if (isNullOrUndefined(endHour)) {\n      endHour = new Date(2000, 0, 0, 0);\n    }\n\n    return endHour;\n  };\n\n  ViewBase.prototype.isCurrentDate = function (date) {\n    return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n  };\n\n  ViewBase.prototype.isCurrentMonth = function (date) {\n    return date.getFullYear() === this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n  };\n\n  ViewBase.prototype.isWorkDay = function (date, workDays) {\n    if (workDays === void 0) {\n      workDays = this.parent.activeViewOptions.workDays;\n    }\n\n    if (workDays.indexOf(date.getDay()) >= 0) {\n      return true;\n    }\n\n    return false;\n  };\n\n  ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n    if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n      return false;\n    }\n\n    startHour.setMilliseconds(0);\n    endHour.setMilliseconds(0);\n\n    if (getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  ViewBase.prototype.getRenderDates = function (workDays) {\n    var renderDates = []; // Due to same code for vertical and time line, week & work week views, if condition has used\n\n    if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n      var selectedDate = resetTime(this.parent.selectedDate);\n      var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n\n      for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n        if (this.parent.activeViewOptions.showWeekend) {\n          renderDates.push(start);\n        } else {\n          if (this.isWorkDay(start, workDays)) {\n            renderDates.push(start);\n          }\n        }\n\n        start = addDays(start, 1);\n      }\n    } else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n      var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n\n      for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n        if (this.isWorkDay(start, workDays)) {\n          renderDates.push(start);\n        }\n\n        start = addDays(start, 1);\n      }\n    } else {\n      var start = resetTime(this.parent.selectedDate);\n\n      do {\n        if (this.parent.activeViewOptions.showWeekend) {\n          renderDates.push(start);\n        } else {\n          if (this.isWorkDay(start, workDays)) {\n            renderDates.push(start);\n          }\n        }\n\n        start = addDays(start, 1);\n      } while (this.parent.activeViewOptions.interval !== renderDates.length);\n    }\n\n    if (!workDays) {\n      this.renderDates = renderDates;\n    }\n\n    if (this.parent.headerModule) {\n      this.parent.headerModule.previousNextIconHandler();\n    }\n\n    return renderDates;\n  };\n\n  ViewBase.prototype.getNextPreviousDate = function (type) {\n    if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n      if (this.parent.activeViewOptions.showWeekend) {\n        var daysCount = this.parent.activeViewOptions.interval;\n        return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n      } else {\n        var date = void 0;\n\n        if (type === 'next') {\n          date = addDays(this.renderDates.slice(-1)[0], 1);\n\n          while (!this.isWorkDay(date)) {\n            date = addDays(date, 1);\n          }\n        } else {\n          date = addDays(this.renderDates[0], -1);\n          var count = 0;\n\n          do {\n            if (this.isWorkDay(date)) {\n              count += 1;\n            }\n\n            if (this.parent.activeViewOptions.interval !== count) {\n              date = addDays(date, -1);\n            }\n          } while (this.parent.activeViewOptions.interval !== count);\n        }\n\n        return date;\n      }\n    }\n\n    if (type === 'next') {\n      return addDays(this.parent.selectedDate, WEEK_LENGTH * this.parent.activeViewOptions.interval);\n    } else {\n      return addDays(this.parent.selectedDate, -WEEK_LENGTH * this.parent.activeViewOptions.interval);\n    }\n  };\n\n  ViewBase.prototype.getLabelText = function (view) {\n    var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n    return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(isBlazor() ? this.parent.globalize.formatDate(this.parent.selectedDate, {\n      skeleton: 'D',\n      calendar: this.parent.getCalendarMode()\n    }) : this.parent.globalize.formatDate(this.parent.selectedDate, {\n      skeleton: 'long',\n      calendar: this.parent.getCalendarMode()\n    }), 'single');\n  };\n\n  ViewBase.prototype.getDateRangeText = function () {\n    if (this.parent.isAdaptive) {\n      return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, {\n        format: 'MMMM y',\n        calendar: this.parent.getCalendarMode()\n      }), 'single');\n    }\n\n    return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n  };\n\n  ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n    var globalize = this.parent.globalize;\n    var mode = this.parent.getCalendarMode();\n\n    if (startDate === endDate) {\n      endDate = null;\n    }\n\n    if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n      var text = '';\n\n      if (!endDate) {\n        text = globalize.formatDate(startDate, {\n          format: this.parent.activeViewOptions.dateFormat,\n          calendar: mode\n        });\n        return capitalizeFirstWord(text, 'multiple');\n      }\n\n      text = globalize.formatDate(startDate, {\n        format: this.parent.activeViewOptions.dateFormat,\n        calendar: mode\n      }) + ' - ' + globalize.formatDate(endDate, {\n        format: this.parent.activeViewOptions.dateFormat,\n        calendar: mode\n      });\n      return capitalizeFirstWord(text, 'multiple');\n    }\n\n    var formattedStr;\n    var longDateFormat;\n\n    if (isBlazor()) {\n      longDateFormat = 'MMMM d, y';\n    } else {\n      if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n        longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n      } else {\n        longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n      }\n    }\n\n    if (!endDate) {\n      return capitalizeFirstWord(globalize.formatDate(startDate, {\n        format: longDateFormat,\n        calendar: mode\n      }), 'single');\n    }\n\n    var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n\n    if (dateFormat.substr(0, 1) === 'd') {\n      if (startDate.getFullYear() === endDate.getFullYear()) {\n        if (startDate.getMonth() === endDate.getMonth()) {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd MMMM yyyy',\n            calendar: mode\n          });\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'dd MMM',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd MMM yyyy',\n            calendar: mode\n          });\n        }\n      } else {\n        formattedStr = globalize.formatDate(startDate, {\n          format: 'dd MMM yyyy',\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: 'dd MMM yyyy',\n          calendar: mode\n        });\n      }\n    } else if (dateFormat.substr(0, 1) === 'm') {\n      if (startDate.getFullYear() === endDate.getFullYear()) {\n        if (startDate.getMonth() === endDate.getMonth()) {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'MMMM dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'dd, yyyy',\n            calendar: mode\n          });\n        } else {\n          formattedStr = globalize.formatDate(startDate, {\n            format: 'MMM dd',\n            calendar: mode\n          }) + ' - ' + globalize.formatDate(endDate, {\n            format: 'MMM dd, yyyy',\n            calendar: mode\n          });\n        }\n      } else {\n        formattedStr = globalize.formatDate(startDate, {\n          format: 'MMM dd, yyyy',\n          calendar: mode\n        }) + ' - ' + globalize.formatDate(endDate, {\n          format: 'MMM dd, yyyy',\n          calendar: mode\n        });\n      }\n    } else {\n      formattedStr = globalize.formatDate(startDate, {\n        format: longDateFormat,\n        calendar: mode\n      }) + ' - ' + globalize.formatDate(endDate, {\n        format: longDateFormat,\n        calendar: mode\n      });\n    }\n\n    return capitalizeFirstWord(formattedStr, 'multiple');\n  };\n\n  ViewBase.prototype.getMobileDateElement = function (date, className) {\n    var wrap = createElement('div', {\n      className: className,\n      innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, {\n        format: 'd',\n        calendar: this.parent.getCalendarMode()\n      }) + '</div>' + '<div class=\"e-m-day\">' + capitalizeFirstWord(this.parent.globalize.formatDate(date, {\n        format: 'E',\n        calendar: this.parent.getCalendarMode()\n      }), 'single') + '</div>'\n    });\n    return wrap;\n  };\n\n  ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n    if (className === void 0) {\n      className = cls.TEXT_ELLIPSIS;\n    }\n\n    if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n      var data = {\n        resource: tdData.resource,\n        resourceData: tdData.resourceData\n      };\n      var scheduleId = this.parent.element.id + '_';\n      var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n      var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n      var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n      append(quickTemplate, tdElement);\n    } else {\n      tdElement.appendChild(createElement('div', {\n        className: className,\n        innerHTML: tdData.resourceData[tdData.resource.textField]\n      }));\n    }\n  };\n\n  ViewBase.prototype.renderResourceMobileLayout = function () {\n    if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n      return;\n    }\n\n    this.parent.resourceBase.renderResourceHeader();\n    this.parent.resourceBase.renderResourceTree();\n  };\n\n  ViewBase.prototype.addAutoHeightClass = function (element) {\n    if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView() && this.parent.activeViewOptions.group.resources.length > 0) {\n      addClass([element], cls.AUTO_HEIGHT);\n    }\n  };\n\n  ViewBase.prototype.addIgnoreWhitespaceClass = function (element) {\n    if (this.parent.eventSettings.ignoreWhitespace) {\n      addClass([element], cls.IGNORE_WHITESPACE);\n    }\n  };\n\n  ViewBase.prototype.getColElements = function () {\n    return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n  };\n\n  ViewBase.prototype.setColWidth = function (content) {\n    if (this.isTimelineView()) {\n      var colElements = this.getColElements();\n      var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n      var colWidth_1 = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n      colElements.forEach(function (col) {\n        return setStyleAttribute(col, {\n          'width': formatUnit(colWidth_1)\n        });\n      });\n\n      if (content.offsetHeight !== content.clientHeight) {\n        var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n\n        if (!isNullOrUndefined(resourceColumn)) {\n          setStyleAttribute(resourceColumn, {\n            'height': formatUnit(content.clientHeight)\n          });\n        }\n      }\n    }\n  };\n\n  ViewBase.prototype.resetColWidth = function () {\n    var colElements = this.getColElements();\n    colElements.forEach(function (col) {\n      return col.style.width = '';\n    });\n  };\n\n  ViewBase.prototype.getContentAreaElement = function () {\n    return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n  };\n\n  ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n    var _this = this;\n\n    if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n      var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n      treeIcons.forEach(function (icon) {\n        EventHandler.clearEvents(icon);\n        EventHandler.add(icon, 'click', _this.parent.resourceBase.onTreeIconClick, _this.parent.resourceBase);\n      });\n    }\n  };\n\n  ViewBase.prototype.scrollToDate = function (scrollDate) {\n    if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n      return;\n    }\n\n    var scrollWrap = this.getContentAreaElement();\n    var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + util.resetTime(new Date(+scrollDate)).getTime() + \"\\\"]\";\n    var dateElement = scrollWrap.querySelector(elementSelector);\n\n    if (this.parent.currentView === 'Month' && dateElement) {\n      scrollWrap.scrollTop = dateElement.offsetTop;\n    }\n\n    if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n      scrollWrap.scrollLeft = dateElement.offsetLeft;\n    }\n  };\n\n  return ViewBase;\n}();\n\nexport { ViewBase };","map":{"version":3,"sources":["D:/developing/projects/Whiteboard/node_modules/@syncfusion/ej2-schedule/src/schedule/renderer/view-base.js"],"names":["createElement","append","prepend","isNullOrUndefined","getValue","getDefaultDateObject","cldrData","addClass","setStyleAttribute","formatUnit","isBlazor","EventHandler","getDateInMs","addDays","resetTime","WEEK_LENGTH","getWeekFirstDate","getOuterHeight","getScrollBarWidth","capitalizeFirstWord","cls","util","ViewHelper","getDayName","proxy","date","getDayNames","getDay","getDate","globalize","formatDate","format","calendar","getCalendarMode","getTime","isAdaptive","timeFormat","skeleton","getTimeString","getTimelineDate","text","ViewBase","parent","prototype","isTimelineView","currentView","indexOf","getContentRows","serverRenderLayout","createEventTable","trCount","eventTable","className","EVENT_TABLE_CLASS","getEventRows","eventRows","eventContainer","row","APPOINTMENT_CONTAINER_CLASS","resourceBase","uiStateValues","isGroupAdaptive","renderedResources","setAttribute","groupIndex","toString","push","collapseRows","wrap","activeViewOptions","group","resources","length","hideResourceRows","querySelector","createTableLayout","clsName","table","SCHEDULE_TABLE_CLASS","tbody","appendChild","createColGroup","lastRow","colSpan","map","value","reduce","prev","next","colGroupEle","i","getScrollXIndent","content","offsetHeight","clientHeight","scrollTopPanel","target","getDatesHeaderElement","firstElementChild","scrollLeft","scrollHeaderLabels","_this","headerTable","element","colWidth","offsetWidth","querySelectorAll","applyLeft","headerCells","isRtl","currentCell","tdLeft","hiddenLeft","scrollWidth","parseInt","getAttribute","Math","floor","children","style","slice","call","forEach","enableRtl","addAttributes","td","template","getHeaderBarHeight","headerBarHeight","headerModule","getHeaderElement","resHeader","RESOURCE_HEADER_TOOLBAR","renderPanel","type","PREVIOUS_PANEL_CLASS","TABLE_CONTAINER_CLASS","setPanel","panel","getPanel","DATE_HEADER_CONTAINER_CLASS","getDateSlots","renderDates","workDays","generateColumnLevels","getColumnLevels","colLevels","highlightCurrentTime","startDate","endDate","getStartHour","startHour","getStartEndTime","Date","getEndHour","endHour","isCurrentDate","setHours","getCurrentTime","isCurrentMonth","getFullYear","getMonth","isWorkDay","isWorkHour","setMilliseconds","getRenderDates","selectedDate","start","firstDayOfWeek","length_1","interval","showWeekend","length_2","previousNextIconHandler","getNextPreviousDate","daysCount","count","getLabelText","view","viewStr","charAt","toLowerCase","substring","localeObj","getConstant","getDateRangeText","formatDateRange","mode","dateFormat","formattedStr","longDateFormat","locale","trim","toLocaleLowerCase","substr","getMobileDateElement","innerHTML","setResourceHeaderContent","tdElement","tdData","TEXT_ELLIPSIS","resourceHeaderTemplate","data","resource","resourceData","scheduleId","id","viewName","resourceHeaderTemplateName","templateId","quickTemplate","getResourceHeaderTemplate","textField","renderResourceMobileLayout","lastResourceLevel","renderResourceHeader","renderResourceTree","addAutoHeightClass","rowAutoHeight","AUTO_HEIGHT","addIgnoreWhitespaceClass","eventSettings","ignoreWhitespace","IGNORE_WHITESPACE","getColElements","CONTENT_WRAP_CLASS","DATE_HEADER_WRAP_CLASS","setColWidth","colElements","contentBody","CONTENT_TABLE_CLASS","colWidth_1","ceil","col","resourceColumn","RESOURCE_COLUMN_WRAP_CLASS","resetColWidth","width","getContentAreaElement","wireExpandCollapseIconEvents","resourceCollection","treeIcons","RESOURCE_TREE_ICON_CLASS","icon","clearEvents","add","onTreeIconClick","scrollToDate","scrollDate","scrollWrap","elementSelector","WORK_CELLS_CLASS","dateElement","scrollTop","offsetTop","offsetLeft"],"mappings":"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","sourcesContent":["import { createElement, append, prepend, isNullOrUndefined, getValue, getDefaultDateObject, cldrData, addClass, setStyleAttribute, formatUnit, isBlazor, EventHandler } from '@syncfusion/ej2-base';\nimport { getDateInMs, addDays, resetTime, WEEK_LENGTH, getWeekFirstDate, getOuterHeight, getScrollBarWidth, capitalizeFirstWord } from '../base/util';\nimport * as cls from '../base/css-constant';\nimport * as util from '../base/util';\n/**\n * view base\n */\nexport var ViewHelper;\n(function (ViewHelper) {\n    ViewHelper.getDayName = function (proxy, date) {\n        return proxy.getDayNames('abbreviated')[date.getDay()];\n    };\n    ViewHelper.getDate = function (proxy, date) {\n        return proxy.globalize.formatDate(date, { format: 'd', calendar: proxy.getCalendarMode() });\n    };\n    ViewHelper.getTime = function (proxy, date) {\n        if (proxy.isAdaptive) {\n            if (proxy.timeFormat === 'HH:mm' || proxy.timeFormat === 'HH.mm') {\n                return proxy.globalize.formatDate(date, { format: 'H', calendar: proxy.getCalendarMode() });\n            }\n            return isBlazor() ?\n                proxy.globalize.formatDate(date, { format: 'h', calendar: proxy.getCalendarMode() }) :\n                proxy.globalize.formatDate(date, { skeleton: 'h', calendar: proxy.getCalendarMode() });\n        }\n        return proxy.getTimeString(date);\n    };\n    ViewHelper.getTimelineDate = function (proxy, date) {\n        var skeleton = isBlazor() ? 'M' : 'MMMd';\n        var text = proxy.globalize.formatDate(date, { skeleton: skeleton, calendar: proxy.getCalendarMode() }) + ', ' +\n            proxy.getDayNames('wide')[date.getDay()];\n        return capitalizeFirstWord(text, 'multiple');\n    };\n})(ViewHelper || (ViewHelper = {}));\nvar ViewBase = /** @class */ (function () {\n    /**\n     * Constructor\n     */\n    function ViewBase(parent) {\n        this.parent = parent;\n    }\n    ViewBase.prototype.isTimelineView = function () {\n        return this.parent.currentView.indexOf('Timeline') !== -1;\n    };\n    ViewBase.prototype.getContentRows = function () {\n        return [];\n    };\n    ViewBase.prototype.serverRenderLayout = function () {\n        // Need only for layout server rendering\n    };\n    ViewBase.prototype.createEventTable = function (trCount) {\n        var eventTable = createElement('div', { className: cls.EVENT_TABLE_CLASS });\n        append(this.getEventRows(trCount), eventTable);\n        return eventTable;\n    };\n    ViewBase.prototype.getEventRows = function (trCount) {\n        var eventRows = [];\n        var eventContainer;\n        for (var row = 0; row < trCount; row++) {\n            eventContainer = createElement('div', { className: cls.APPOINTMENT_CONTAINER_CLASS });\n            if (this.parent.resourceBase && !this.parent.uiStateValues.isGroupAdaptive && this.parent.resourceBase.renderedResources) {\n                eventContainer.setAttribute('data-group-index', this.parent.resourceBase.renderedResources[row].groupIndex.toString());\n            }\n            eventRows.push(eventContainer);\n        }\n        return eventRows;\n    };\n    ViewBase.prototype.collapseRows = function (wrap) {\n        if (this.parent.activeViewOptions.group.resources.length > 0 && !this.parent.uiStateValues.isGroupAdaptive) {\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('tbody'));\n            this.parent.resourceBase.hideResourceRows(wrap.querySelector('.' + cls.EVENT_TABLE_CLASS));\n        }\n    };\n    ViewBase.prototype.createTableLayout = function (className) {\n        var clsName = className || '';\n        var table = createElement('table', { className: cls.SCHEDULE_TABLE_CLASS + ' ' + clsName });\n        var tbody = createElement('tbody');\n        table.appendChild(tbody);\n        return table;\n    };\n    ViewBase.prototype.createColGroup = function (table, lastRow) {\n        var length = lastRow.length;\n        if (lastRow[0] && lastRow[0].colSpan) {\n            length = lastRow.map(function (value) { return value.colSpan; }).reduce(function (prev, next) { return prev + next; });\n        }\n        var colGroupEle = createElement('colgroup');\n        for (var i = 0; i < length; i++) {\n            colGroupEle.appendChild(createElement('col'));\n        }\n        prepend([colGroupEle], table);\n    };\n    ViewBase.prototype.getScrollXIndent = function (content) {\n        return content.offsetHeight - content.clientHeight > 0 ? getScrollBarWidth() : 0;\n    };\n    ViewBase.prototype.scrollTopPanel = function (target) {\n        this.getDatesHeaderElement().firstElementChild.scrollLeft = target.scrollLeft;\n    };\n    ViewBase.prototype.scrollHeaderLabels = function (target) {\n        var _this = this;\n        var headerTable = this.element.querySelector('.e-date-header-wrap table');\n        var colWidth = headerTable.offsetWidth / headerTable.querySelectorAll('colgroup col').length;\n        var applyLeft = function (headerCells, isRtl) {\n            var currentCell;\n            var tdLeft = 0;\n            var colSpan = 0;\n            var hiddenLeft = isRtl ? target.scrollWidth - target.offsetWidth - target.scrollLeft : target.scrollLeft;\n            for (var i = 0; i < headerCells.length; i++) {\n                colSpan += parseInt(headerCells[i].getAttribute('colSpan'), 10);\n                if (colSpan > Math.floor(hiddenLeft / colWidth)) {\n                    currentCell = headerCells[i];\n                    break;\n                }\n                tdLeft += headerCells[i].offsetWidth;\n            }\n            currentCell.children[0].style[isRtl ? 'right' : 'left'] = (hiddenLeft - tdLeft) + 'px';\n        };\n        var className = ['.e-header-year-cell', '.e-header-month-cell', '.e-header-week-cell', '.e-header-cells'];\n        for (var i = 0; i < className.length; i++) {\n            var headerCells = [].slice.call(this.element.querySelectorAll(className[i]));\n            if (headerCells.length > 0) {\n                headerCells.forEach(function (element) {\n                    return element.children[0].style[_this.parent.enableRtl ? 'right' : 'left'] = '';\n                });\n                applyLeft(headerCells, this.parent.enableRtl);\n            }\n        }\n    };\n    ViewBase.prototype.addAttributes = function (td, element) {\n        if (td.template) {\n            append(td.template, element);\n        }\n        if (td.colSpan) {\n            element.setAttribute('colspan', td.colSpan.toString());\n        }\n        if (td.className) {\n            addClass([element], td.className);\n        }\n    };\n    ViewBase.prototype.getHeaderBarHeight = function () {\n        var headerBarHeight = 2;\n        if (this.parent.headerModule) {\n            headerBarHeight += getOuterHeight(this.parent.headerModule.getHeaderElement());\n        }\n        if (this.parent.uiStateValues.isGroupAdaptive) {\n            var resHeader = this.parent.element.querySelector('.' + cls.RESOURCE_HEADER_TOOLBAR);\n            if (resHeader) {\n                headerBarHeight += resHeader.offsetHeight;\n            }\n        }\n        return headerBarHeight;\n    };\n    ViewBase.prototype.renderPanel = function (type) {\n        if (type === cls.PREVIOUS_PANEL_CLASS || isBlazor()) {\n            prepend([this.element], this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS));\n        }\n        else {\n            this.parent.element.querySelector('.' + cls.TABLE_CONTAINER_CLASS).appendChild(this.element);\n        }\n    };\n    ViewBase.prototype.setPanel = function (panel) {\n        this.element = panel;\n    };\n    ViewBase.prototype.getPanel = function () {\n        return this.element;\n    };\n    ViewBase.prototype.getDatesHeaderElement = function () {\n        return this.element.querySelector('.' + cls.DATE_HEADER_CONTAINER_CLASS);\n    };\n    ViewBase.prototype.getDateSlots = function (renderDates, workDays) {\n        // Here getDateSlots only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.generateColumnLevels = function () {\n        // Here generateColumnLevels only need in vertical and month views\n        return [];\n    };\n    ViewBase.prototype.getColumnLevels = function () {\n        return this.colLevels;\n    };\n    ViewBase.prototype.highlightCurrentTime = function () {\n        // Here showTimeIndicator functionalities\n    };\n    ViewBase.prototype.startDate = function () {\n        return this.renderDates[0];\n    };\n    ViewBase.prototype.endDate = function () {\n        return addDays(this.renderDates[this.renderDates.length - 1], 1);\n    };\n    ViewBase.prototype.getStartHour = function () {\n        var startHour = this.parent.getStartEndTime(this.parent.activeViewOptions.startHour);\n        if (isNullOrUndefined(startHour)) {\n            startHour = new Date(2000, 0, 0, 0);\n        }\n        return startHour;\n    };\n    ViewBase.prototype.getEndHour = function () {\n        var endHour = this.parent.getStartEndTime(this.parent.activeViewOptions.endHour);\n        if (isNullOrUndefined(endHour)) {\n            endHour = new Date(2000, 0, 0, 0);\n        }\n        return endHour;\n    };\n    ViewBase.prototype.isCurrentDate = function (date) {\n        return date.setHours(0, 0, 0, 0) === this.parent.getCurrentTime().setHours(0, 0, 0, 0);\n    };\n    ViewBase.prototype.isCurrentMonth = function (date) {\n        return date.getFullYear() ===\n            this.parent.getCurrentTime().getFullYear() && date.getMonth() === this.parent.getCurrentTime().getMonth();\n    };\n    ViewBase.prototype.isWorkDay = function (date, workDays) {\n        if (workDays === void 0) { workDays = this.parent.activeViewOptions.workDays; }\n        if (workDays.indexOf(date.getDay()) >= 0) {\n            return true;\n        }\n        return false;\n    };\n    ViewBase.prototype.isWorkHour = function (date, startHour, endHour, workDays) {\n        if (isNullOrUndefined(startHour) || isNullOrUndefined(endHour)) {\n            return false;\n        }\n        startHour.setMilliseconds(0);\n        endHour.setMilliseconds(0);\n        if (getDateInMs(date) < getDateInMs(startHour) || getDateInMs(date) >= getDateInMs(endHour) || !this.isWorkDay(date, workDays)) {\n            return false;\n        }\n        return true;\n    };\n    ViewBase.prototype.getRenderDates = function (workDays) {\n        var renderDates = [];\n        // Due to same code for vertical and time line, week & work week views, if condition has used\n        if (this.parent.currentView === 'Week' || this.parent.currentView === 'TimelineWeek') {\n            var selectedDate = resetTime(this.parent.selectedDate);\n            var start = getWeekFirstDate(selectedDate, this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_1 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_1; i++) {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else if (this.parent.currentView === 'WorkWeek' || this.parent.currentView === 'TimelineWorkWeek') {\n            var start = getWeekFirstDate(resetTime(this.parent.selectedDate), this.parent.activeViewOptions.firstDayOfWeek);\n            for (var i = 0, length_2 = WEEK_LENGTH * this.parent.activeViewOptions.interval; i < length_2; i++) {\n                if (this.isWorkDay(start, workDays)) {\n                    renderDates.push(start);\n                }\n                start = addDays(start, 1);\n            }\n        }\n        else {\n            var start = resetTime(this.parent.selectedDate);\n            do {\n                if (this.parent.activeViewOptions.showWeekend) {\n                    renderDates.push(start);\n                }\n                else {\n                    if (this.isWorkDay(start, workDays)) {\n                        renderDates.push(start);\n                    }\n                }\n                start = addDays(start, 1);\n            } while (this.parent.activeViewOptions.interval !== renderDates.length);\n        }\n        if (!workDays) {\n            this.renderDates = renderDates;\n        }\n        if (this.parent.headerModule) {\n            this.parent.headerModule.previousNextIconHandler();\n        }\n        return renderDates;\n    };\n    ViewBase.prototype.getNextPreviousDate = function (type) {\n        if (this.parent.currentView === 'Day' || this.parent.currentView === 'TimelineDay') {\n            if (this.parent.activeViewOptions.showWeekend) {\n                var daysCount = this.parent.activeViewOptions.interval;\n                return addDays(this.parent.selectedDate, type === 'next' ? daysCount : -daysCount);\n            }\n            else {\n                var date = void 0;\n                if (type === 'next') {\n                    date = addDays(this.renderDates.slice(-1)[0], 1);\n                    while (!this.isWorkDay(date)) {\n                        date = addDays(date, 1);\n                    }\n                }\n                else {\n                    date = addDays(this.renderDates[0], -1);\n                    var count = 0;\n                    do {\n                        if (this.isWorkDay(date)) {\n                            count += 1;\n                        }\n                        if (this.parent.activeViewOptions.interval !== count) {\n                            date = addDays(date, -1);\n                        }\n                    } while (this.parent.activeViewOptions.interval !== count);\n                }\n                return date;\n            }\n        }\n        if (type === 'next') {\n            return addDays(this.parent.selectedDate, WEEK_LENGTH * this.parent.activeViewOptions.interval);\n        }\n        else {\n            return addDays(this.parent.selectedDate, -WEEK_LENGTH * this.parent.activeViewOptions.interval);\n        }\n    };\n    ViewBase.prototype.getLabelText = function (view) {\n        var viewStr = view.charAt(0).toLowerCase() + view.substring(1);\n        return this.parent.localeObj.getConstant(viewStr) + ' of ' + capitalizeFirstWord(isBlazor() ?\n            this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'D', calendar: this.parent.getCalendarMode() }) :\n            this.parent.globalize.formatDate(this.parent.selectedDate, { skeleton: 'long', calendar: this.parent.getCalendarMode() }), 'single');\n    };\n    ViewBase.prototype.getDateRangeText = function () {\n        if (this.parent.isAdaptive) {\n            return capitalizeFirstWord(this.parent.globalize.formatDate(this.parent.selectedDate, { format: 'MMMM y', calendar: this.parent.getCalendarMode() }), 'single');\n        }\n        return this.formatDateRange(this.renderDates[0], this.renderDates[this.renderDates.length - 1]);\n    };\n    ViewBase.prototype.formatDateRange = function (startDate, endDate) {\n        var globalize = this.parent.globalize;\n        var mode = this.parent.getCalendarMode();\n        if (startDate === endDate) {\n            endDate = null;\n        }\n        if (!isNullOrUndefined(this.parent.activeViewOptions.dateFormat)) {\n            var text = '';\n            if (!endDate) {\n                text = globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode });\n                return capitalizeFirstWord(text, 'multiple');\n            }\n            text = (globalize.formatDate(startDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }) +\n                ' - ' + globalize.formatDate(endDate, { format: this.parent.activeViewOptions.dateFormat, calendar: mode }));\n            return capitalizeFirstWord(text, 'multiple');\n        }\n        var formattedStr;\n        var longDateFormat;\n        if (isBlazor()) {\n            longDateFormat = 'MMMM d, y';\n        }\n        else {\n            if (this.parent.locale === 'en' || this.parent.locale === 'en-US') {\n                longDateFormat = getValue('dateFormats.long', getDefaultDateObject(mode));\n            }\n            else {\n                longDateFormat = getValue('main.' + '' + this.parent.locale + '.dates.calendars.' + mode + '.dateFormats.long', cldrData);\n            }\n        }\n        if (!endDate) {\n            return capitalizeFirstWord(globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }), 'single');\n        }\n        var dateFormat = longDateFormat.trim().toLocaleLowerCase();\n        if (dateFormat.substr(0, 1) === 'd') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMMM yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'dd MMM', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.formatDate(startDate, { format: 'dd MMM yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'dd MMM yyyy', calendar: mode });\n            }\n        }\n        else if (dateFormat.substr(0, 1) === 'm') {\n            if (startDate.getFullYear() === endDate.getFullYear()) {\n                if (startDate.getMonth() === endDate.getMonth()) {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'dd, yyyy', calendar: mode });\n                }\n                else {\n                    formattedStr = globalize.formatDate(startDate, { format: 'MMM dd', calendar: mode }) + ' - ' +\n                        globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n                }\n            }\n            else {\n                formattedStr = globalize.\n                    formatDate(startDate, { format: 'MMM dd, yyyy', calendar: mode }) + ' - ' +\n                    globalize.formatDate(endDate, { format: 'MMM dd, yyyy', calendar: mode });\n            }\n        }\n        else {\n            formattedStr = globalize.formatDate(startDate, { format: longDateFormat, calendar: mode }) + ' - ' +\n                globalize.formatDate(endDate, { format: longDateFormat, calendar: mode });\n        }\n        return capitalizeFirstWord(formattedStr, 'multiple');\n    };\n    ViewBase.prototype.getMobileDateElement = function (date, className) {\n        var wrap = createElement('div', {\n            className: className,\n            innerHTML: '<div class=\"e-m-date\">' + this.parent.globalize.formatDate(date, { format: 'd', calendar: this.parent.getCalendarMode() }) + '</div>' + '<div class=\"e-m-day\">' + capitalizeFirstWord(this.parent.globalize.formatDate(date, { format: 'E', calendar: this.parent.getCalendarMode() }), 'single') + '</div>'\n        });\n        return wrap;\n    };\n    ViewBase.prototype.setResourceHeaderContent = function (tdElement, tdData, className) {\n        if (className === void 0) { className = cls.TEXT_ELLIPSIS; }\n        if (this.parent.activeViewOptions.resourceHeaderTemplate) {\n            var data = { resource: tdData.resource, resourceData: tdData.resourceData };\n            var scheduleId = this.parent.element.id + '_';\n            var viewName = this.parent.activeViewOptions.resourceHeaderTemplateName;\n            var templateId = scheduleId + viewName + 'resourceHeaderTemplate';\n            var quickTemplate = [].slice.call(this.parent.getResourceHeaderTemplate()(data, this.parent, 'resourceHeaderTemplate', templateId, false));\n            append(quickTemplate, tdElement);\n        }\n        else {\n            tdElement.appendChild(createElement('div', {\n                className: className, innerHTML: tdData.resourceData[tdData.resource.textField]\n            }));\n        }\n    };\n    ViewBase.prototype.renderResourceMobileLayout = function () {\n        if (this.parent.resourceBase.lastResourceLevel && this.parent.resourceBase.lastResourceLevel.length <= 0) {\n            return;\n        }\n        this.parent.resourceBase.renderResourceHeader();\n        this.parent.resourceBase.renderResourceTree();\n    };\n    ViewBase.prototype.addAutoHeightClass = function (element) {\n        if (!this.parent.uiStateValues.isGroupAdaptive && this.parent.rowAutoHeight && this.isTimelineView()\n            && this.parent.activeViewOptions.group.resources.length > 0) {\n            addClass([element], cls.AUTO_HEIGHT);\n        }\n    };\n    ViewBase.prototype.addIgnoreWhitespaceClass = function (element) {\n        if (this.parent.eventSettings.ignoreWhitespace) {\n            addClass([element], cls.IGNORE_WHITESPACE);\n        }\n    };\n    ViewBase.prototype.getColElements = function () {\n        return [].slice.call(this.element.querySelectorAll('.' + cls.CONTENT_WRAP_CLASS\n            + ' col, .' + cls.DATE_HEADER_WRAP_CLASS + ' col'));\n    };\n    ViewBase.prototype.setColWidth = function (content) {\n        if (this.isTimelineView()) {\n            var colElements = this.getColElements();\n            var contentBody = this.element.querySelector('.' + cls.CONTENT_TABLE_CLASS + ' tbody');\n            var colWidth_1 = Math.ceil(contentBody.offsetWidth / (colElements.length / 2));\n            colElements.forEach(function (col) { return setStyleAttribute(col, { 'width': formatUnit(colWidth_1) }); });\n            if (content.offsetHeight !== content.clientHeight) {\n                var resourceColumn = this.parent.element.querySelector('.' + cls.RESOURCE_COLUMN_WRAP_CLASS);\n                if (!isNullOrUndefined(resourceColumn)) {\n                    setStyleAttribute(resourceColumn, { 'height': formatUnit(content.clientHeight) });\n                }\n            }\n        }\n    };\n    ViewBase.prototype.resetColWidth = function () {\n        var colElements = this.getColElements();\n        colElements.forEach(function (col) { return col.style.width = ''; });\n    };\n    ViewBase.prototype.getContentAreaElement = function () {\n        return this.element.querySelector('.' + cls.CONTENT_WRAP_CLASS);\n    };\n    ViewBase.prototype.wireExpandCollapseIconEvents = function () {\n        var _this = this;\n        if (this.parent.resourceBase && this.parent.resourceBase.resourceCollection.length > 1) {\n            var treeIcons = [].slice.call(this.element.querySelectorAll('.' + cls.RESOURCE_TREE_ICON_CLASS));\n            treeIcons.forEach(function (icon) {\n                EventHandler.clearEvents(icon);\n                EventHandler.add(icon, 'click', _this.parent.resourceBase.onTreeIconClick, _this.parent.resourceBase);\n            });\n        }\n    };\n    ViewBase.prototype.scrollToDate = function (scrollDate) {\n        if (['Month', 'TimelineMonth'].indexOf(this.parent.currentView) === -1 || isNullOrUndefined(scrollDate)) {\n            return;\n        }\n        var scrollWrap = this.getContentAreaElement();\n        var elementSelector = \".\" + cls.WORK_CELLS_CLASS + \"[data-date=\\\"\" + util.resetTime(new Date(+scrollDate)).getTime() + \"\\\"]\";\n        var dateElement = scrollWrap.querySelector(elementSelector);\n        if (this.parent.currentView === 'Month' && dateElement) {\n            scrollWrap.scrollTop = dateElement.offsetTop;\n        }\n        if (this.parent.currentView === 'TimelineMonth' && dateElement) {\n            scrollWrap.scrollLeft = dateElement.offsetLeft;\n        }\n    };\n    return ViewBase;\n}());\nexport { ViewBase };\n"]},"metadata":{},"sourceType":"module"}