{"ast":null,"code":"/**\n * Save class provide method to save file\n * ```typescript\n * let blob : Blob = new Blob([''], { type: 'text/plain' });\n * Save.save('fileName.txt',blob);\n */\nvar Save =\n/** @class */\nfunction () {\n  /**\n   * Initialize new instance of {save}\n   */\n  function Save() {} // tslint:disable\n\n  /**\n   * Saves the file with specified name and sends the file to client browser\n   * @param  {string} fileName- file name to save.\n   * @param  {Blob} buffer- the content to write in file\n   * @param  {boolean} isMicrosoftBrowser- specify whether microsoft browser or not\n   * @returns {void}\n   */\n\n\n  Save.save = function (fileName, buffer) {\n    if (fileName === null || fileName === undefined || fileName === '') {\n      throw new Error('ArgumentException: fileName cannot be undefined, null or empty');\n    }\n\n    var extension = fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length);\n    var mimeType = this.getMimeType(extension);\n\n    if (mimeType !== '') {\n      buffer = new Blob([buffer], {\n        type: mimeType\n      });\n    }\n\n    if (this.isMicrosoftBrowser) {\n      navigator.msSaveBlob(buffer, fileName);\n    } else {\n      var downloadLink = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n      this.saveInternal(fileName, extension, buffer, downloadLink, 'download' in downloadLink);\n    }\n  };\n\n  Save.saveInternal = function (fileName, extension, buffer, downloadLink, hasDownloadAttribute) {\n    if (hasDownloadAttribute) {\n      downloadLink.download = fileName;\n      var dataUrl_1 = window.URL.createObjectURL(buffer);\n      downloadLink.href = dataUrl_1;\n      var event_1 = document.createEvent('MouseEvent');\n      event_1.initEvent('click', true, true);\n      downloadLink.dispatchEvent(event_1);\n      setTimeout(function () {\n        window.URL.revokeObjectURL(dataUrl_1);\n        dataUrl_1 = undefined;\n      });\n    } else {\n      if (extension !== 'docx' && extension !== 'xlsx') {\n        var url = window.URL.createObjectURL(buffer);\n        var isPopupBlocked = window.open(url, '_blank');\n\n        if (!isPopupBlocked) {\n          window.location.href = url;\n        }\n      } else {\n        var reader_1 = new FileReader();\n\n        reader_1.onloadend = function () {\n          var isPopupBlocked = window.open(reader_1.result, '_blank');\n\n          if (!isPopupBlocked) {\n            window.location.href = reader_1.result;\n          }\n        };\n\n        reader_1.readAsDataURL(buffer);\n      }\n    }\n  };\n  /**\n   *\n   * @param {string} extension - get mime type of the specified extension\n   * @private\n   */\n\n\n  Save.getMimeType = function (extension) {\n    var mimeType = '';\n\n    switch (extension) {\n      case 'html':\n        mimeType = 'text/html';\n        break;\n\n      case 'pdf':\n        mimeType = 'application/pdf';\n        break;\n\n      case 'docx':\n        mimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n        break;\n\n      case 'xlsx':\n        mimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n        break;\n\n      case 'txt':\n        mimeType = 'text/plain';\n        break;\n    }\n\n    return mimeType;\n  };\n\n  return Save;\n}();\n\nexport { Save };","map":{"version":3,"sources":["D:/developing/projects/whiteboard/node_modules/@syncfusion/ej2-file-utils/src/save.js"],"names":["Save","save","fileName","buffer","undefined","Error","extension","substring","lastIndexOf","length","mimeType","getMimeType","Blob","type","isMicrosoftBrowser","navigator","msSaveBlob","downloadLink","document","createElementNS","saveInternal","hasDownloadAttribute","download","dataUrl_1","window","URL","createObjectURL","href","event_1","createEvent","initEvent","dispatchEvent","setTimeout","revokeObjectURL","url","isPopupBlocked","open","location","reader_1","FileReader","onloadend","result","readAsDataURL"],"mappings":"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","sourcesContent":["/**\n * Save class provide method to save file\n * ```typescript\n * let blob : Blob = new Blob([''], { type: 'text/plain' });\n * Save.save('fileName.txt',blob);\n */\nvar Save = /** @class */ (function () {\n    /**\n     * Initialize new instance of {save}\n     */\n    function Save() {\n        // tslint:disable\n    }\n    /**\n     * Saves the file with specified name and sends the file to client browser\n     * @param  {string} fileName- file name to save.\n     * @param  {Blob} buffer- the content to write in file\n     * @param  {boolean} isMicrosoftBrowser- specify whether microsoft browser or not\n     * @returns {void}\n     */\n    Save.save = function (fileName, buffer) {\n        if (fileName === null || fileName === undefined || fileName === '') {\n            throw new Error('ArgumentException: fileName cannot be undefined, null or empty');\n        }\n        var extension = fileName.substring(fileName.lastIndexOf('.') + 1, fileName.length);\n        var mimeType = this.getMimeType(extension);\n        if (mimeType !== '') {\n            buffer = new Blob([buffer], { type: mimeType });\n        }\n        if (this.isMicrosoftBrowser) {\n            navigator.msSaveBlob(buffer, fileName);\n        }\n        else {\n            var downloadLink = document.createElementNS('http://www.w3.org/1999/xhtml', 'a');\n            this.saveInternal(fileName, extension, buffer, downloadLink, 'download' in downloadLink);\n        }\n    };\n    Save.saveInternal = function (fileName, extension, buffer, downloadLink, hasDownloadAttribute) {\n        if (hasDownloadAttribute) {\n            downloadLink.download = fileName;\n            var dataUrl_1 = window.URL.createObjectURL(buffer);\n            downloadLink.href = dataUrl_1;\n            var event_1 = document.createEvent('MouseEvent');\n            event_1.initEvent('click', true, true);\n            downloadLink.dispatchEvent(event_1);\n            setTimeout(function () {\n                window.URL.revokeObjectURL(dataUrl_1);\n                dataUrl_1 = undefined;\n            });\n        }\n        else {\n            if (extension !== 'docx' && extension !== 'xlsx') {\n                var url = window.URL.createObjectURL(buffer);\n                var isPopupBlocked = window.open(url, '_blank');\n                if (!isPopupBlocked) {\n                    window.location.href = url;\n                }\n            }\n            else {\n                var reader_1 = new FileReader();\n                reader_1.onloadend = function () {\n                    var isPopupBlocked = window.open(reader_1.result, '_blank');\n                    if (!isPopupBlocked) {\n                        window.location.href = reader_1.result;\n                    }\n                };\n                reader_1.readAsDataURL(buffer);\n            }\n        }\n    };\n    /**\n     *\n     * @param {string} extension - get mime type of the specified extension\n     * @private\n     */\n    Save.getMimeType = function (extension) {\n        var mimeType = '';\n        switch (extension) {\n            case 'html':\n                mimeType = 'text/html';\n                break;\n            case 'pdf':\n                mimeType = 'application/pdf';\n                break;\n            case 'docx':\n                mimeType = 'application/vnd.openxmlformats-officedocument.wordprocessingml.document';\n                break;\n            case 'xlsx':\n                mimeType = 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet';\n                break;\n            case 'txt':\n                mimeType = 'text/plain';\n                break;\n        }\n        return mimeType;\n    };\n    return Save;\n}());\nexport { Save };\n"]},"metadata":{},"sourceType":"module"}